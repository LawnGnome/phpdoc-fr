<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.12 $ -->
<!-- EN-Revision: 1.5 Maintainer: gui Status: ready -->
<!-- Reviewed: yes -->

<sect1 xml:id="install.unix.debian" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Installation sous Debian GNU/Linux</title>
 <para>
  Cette section contient des notes et astuces spécifiques à l'installation de
  PHP sous <link xlink:href="&url.debian;">Debian GNU/Linux</link>.
 </para>
 <sect2 xml:id="install.unix.debian.apt">
  <title>Utilisation de APT</title>
   <simpara>
    Au lieu de télécharger les sources de PHP et de les compiler vous-même,
    l'utilisation du système de paquets de Debian est la méthode la plus
    simple et la plus propre pour installer PHP. Si vous n'êtes pas
    familier avec la compilation de logiciels sous Linux, c'est la voie à
    suivre.
   </simpara>
   <simpara>
    La première décision à prendre est de choisir entre Apache 1.3.x et Apache
    2.x. Les paquets PHP correspondants sont nommés respectivement
    libapache-mod-php* et libapache2-mod-php*. La procédure ci-dessous
    considérera Apache 1.3.x.
    À noter que, lors de la rédaction de ce manuel, aucun paquet officiel de
    PHP 5 n'est encore disponible. Ainsi, la procédure s'occupera de
    l'installation de PHP 4.
   </simpara>
   <simpara>
    PHP est aussi disponible en version CGI ou CLI, dont les paquets sont
    nommés respectivement php4-cgi et php4-cli. Si vous en avez besoin, vous
    aurez juste à reproduire la procédure avec les bons noms de paquet.
    php4-pear est un autre paquet spécial que vous pourriez être amené à
    installer. Il contient une installation minimale de PEAR ainsi que
    l'utilitaire <command>pear</command> en ligne de commande.
   </simpara>
   <simpara>
    Si vous avez besoin de paquets plus récents que les paquets stables issus
    de Debian, ou si certains modules ne sont pas présents dans la
    distribution officielle, vous pouvez jeter un oeil sur 
    <link xlink:href="&url.apt-get;">http://www.apt-get.org/</link>. 
    Un des résultats de la recherche sera
    <link xlink:href="http://www.dotdeb.org/">Dotdeb</link>. Ce référentiel non
    officiel est entretenu par <link xlink:href="mailto:gui@php.net">Guillaume Plessis</link>
    et contient des paquets Debian des versions les plus récentes de PHP 4
    et PHP 5. Pour l'utiliser, ajoutez simplement les deux lignes suivantes
    dans votre fichier <filename>/etc/apt/sources.lists</filename> et lancez
    la commande <command>apt-get update</command> :
   </simpara>
   <example>
    <title>Les deux lignes relatives à Dotdeb</title>
    <programlisting role="shell">
<![CDATA[
deb http://packages.dotdeb.org stable all
deb-src http://packages.dotdeb.org stable all
]]>
    </programlisting>
   </example>
   <simpara>
    Enfin, vous devez vous assurer que votre liste de paquets est récente. Si
    vous ne l'avez pas mise à jour récemment, lancez la commande
    <command>apt-get update</command>. Ainsi, vous vous assurez d'utiliser les
    paquets les plus récents d'Apache et PHP.
   </simpara>
   <simpara>
    Maintenant que tout est en place, utilisez les commandes suivantes pour
    installer Apache et PHP :
   </simpara>
   <example xml:id="install.unix.debian.apt.example">
    <title>Exemple d'installation sous Debian avec Apache 1.3</title>
    <programlisting role="shell">
<![CDATA[
# apt-get install libapache-mod-php4
]]>
    </programlisting>
   </example>
   <simpara>
    APT installera automatiquement le module PHP 4 pour Apache 1.3 ainsi que
    toutes ses dépendances et les activera. S'il ne vous a pas été demandé de
    redémarrer Apache pendant l'installation, vous devrez le faire
    manuellement :
   </simpara>
   <example xml:id="install.unix.debian.apt.example2">
    <title>Arrêter et démarrer Apache une fois que PHP 4 est installé</title>
    <programlisting role="shell">
<![CDATA[
# /etc/init.d/apache stop
# /etc/init.d/apache start
]]>
    </programlisting>
   </example>
 </sect2>
 <sect2 xml:id="install.unix.debian.config">
  <title>Meilleur contrôle de la configuration</title>
   <simpara>
    Dans la partie précédente, PHP a été installé juste avec les modules de
    base. Ce n'est pas forcément ce que vous voulez et vous pourriez découvrir
    rapidement que vous avez besoin de davantage de modules, comme MySQL,
    CURL, GD, etc.
   </simpara>
   <simpara>
    Lorsque vous compilez PHP par vous-même, vous devez activer les modules
    via la commande <command>configure</command> Avec APT, vous avez juste
    besoin d'installer des paquets supplémentaires. Ils sont tous nommés
    'php4-*' (ou 'php5-*' si vous avez installé PHP 5 d'un référentiel
    tiers).
   </simpara>
   <example xml:id="install.unix.debian.config.example">
    <title>Obtenir la liste des paquets supplémentaires</title>
    <programlisting role="shell">
<![CDATA[
# dpkg -l 'php4-*'
]]>
    </programlisting>
   </example>
   <simpara>
    Comme vous pouvez vous en rendre compte avec le résultat de la commande
    précédente, les modules PHP que vous pouvez installer sont nombreux (mis
    à part les exceptions php4-cgi, php4-cli and php4-pear décrits
    précédemment).
    Choisissez-les avec soin selon vos besoins. Si vous choisissez un module
    et que les bibliothèques dont il dépend ne sont pas présentes sur votre
    système, APT les installera pour vous.
   </simpara>
   <simpara>
    Si vous voulez installer les modules MySQL, cURL et GD, la commande à
    lancer sera la suivante :
   </simpara>  
   <example xml:id="install.unix.debian.config.example2">
    <title>Installation des modules PHP de MySQL, cURL et GD</title>
    <programlisting role="shell">
<![CDATA[
# apt-get install php4-mysql php4-curl php4-gd
]]>
    </programlisting>
   </example>
   <simpara>
    APT ajoutera automatiquement les lignes adéquates dans vos différents
    &php.ini; (<filename>/etc/php4/apache/php.ini</filename>,
    <filename>/etc/php4/cgi/php.ini</filename>, etc).
   </simpara>
   <example xml:id="install.unix.debian.config.example3">
    <title>Ces lignes ajoutent le support MySQL, cURL et GD au sein de PHP</title>
    <programlisting role="shell">
<![CDATA[
extension=mysql.so
extension=curl.so
extension=gd.so
]]>
    </programlisting>
   </example>
   <simpara>
    Vous aurez juste à stopper/redémarrer Apache de la même façon que
    précédemment.
   </simpara>
 </sect2>
 <sect2 xml:id="install.unix.debian.faq">
  <title>Problèmes fréquents</title>
  <itemizedlist>
   <listitem>
    <simpara>
     Si vous voyez la source de vos scripts PHP plutôt que le résultat
     attendu du script, c'est qu'APT a dû ne pas inclure
     <filename>/etc/apache/conf.d/php4</filename> dans la configuration de
     votre Apache 1.3. Assurez-vous donc que la ligne suivante est présente
     dans votre fichier <filename>/etc/apache/httpd.conf</filename> puis
     stoppez/redémarrez Apache :
    </simpara>
   <example xml:id="install.unix.debian.faq.example">
    <title>Cette ligne active le support de PHP au sein d'Apache</title>
    <programlisting role="shell">
<![CDATA[
# Include /etc/apache/conf.d/
]]>
    </programlisting>
   </example>
   </listitem>
   <listitem>
    <simpara>
     Si vous avez installé un module PHP supplémentaire et que ses fonctions
     ne sont pas disponibles dans vos scripts, assurez-vous que la ligne
     adéquate est présente dans votre &php.ini;, comme vu précédemment. Il se
     peut qu'APT l'omette lors de l'installation du module, à cause d'une
     mauvaise configuration de debconf.
    </simpara>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
