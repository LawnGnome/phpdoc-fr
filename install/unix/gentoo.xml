<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.12 $ -->
<!-- EN-Revision: 1.4 Maintainer: yannick Status: ready -->
<sect1 id="install.unix.gentoo">
 <title>Installation sous Gentoo</title>
 <para>
  Cette section contient des notes et astuces spécifiques à l'installation
  de &php; sous <ulink url="&url.gentoo;">Gentoo Linux</ulink>.
 </para>
 <sect2 id="install.unix.gentoo.portage">
  <title>Utilisation de Portage (emerge)</title>
   <simpara>
    Au lieu de télécharger les sources de &php; et de les compiler vous-même,
    l'utilisation du système de paquets de Gentoo est la méthode la plus simple
    et la plus propre pour installer &php;. Si vous n'êtes pas familier avec la 
    compilation de logiciels sous Linux, c'est la voie à suivre.
   </simpara>
   <simpara>
    Si vous avez compilé votre système Gentoo jusqu'ici, vous avez déjà dû
    utiliser Portage. L'installation de Apache et de &php; n'est pas très différente
    de celle des autres utilitaires système.
   </simpara>
   <simpara>
    La première décision à prendre est de choisir entre Apache 1.3.x et Apache
    2.x. Bien que les deux puissent être utilisés avec &php;, les instructions
    qui suivent utiliseront Apache 1.3.x. Une autre chose à considérer est si
    votre arborescence locale de Portage est à jour ou non. Si vous ne l'avez pas
    mise à jour récemment, vous devez exécuter la commande 
    <command>emerge sync</command> avant de faire quoi que ce soit d'autre. De
    ce fait, vous serez en mesure d'utiliser la version la plus récente d'Apache
    et de &php;.
   </simpara>
   <simpara>
    Maintenant que tout est en place, vous pouvez utiliser l'exemple suivant
    pour installer Apache et &php; :
   </simpara>
   <example id="install.unix.gentoo.portage.example">
    <title>Exemple d'installation avec Apache 1.3 sous Gentoo</title>
    <programlisting role="shell">
<![CDATA[
# emerge \<apache-2
# USE="-*" emerge php mod_php
# ebuild /var/db/pkg/dev-php/mod_php-<votre version de PHP>/mod_php-<votre version de PHP>.ebuild config
# nano /etc/conf.d/apache
  Add "-D PHP4" to APACHE_OPTS
  
# rc-update add apache default
# /etc/init.d/apache start
]]>
    </programlisting>
   </example>
   <simpara>
    Vous pouvez trouver plus d'informations sur emerge dans l'excellent 
    <ulink url="&url.gentoo.portage;">manuel Portage</ulink>
    issus du site web de Gentoo.
   </simpara>
   <simpara>
    Si vous devez utiliser Apache 2, vous pouvez simplement exécuter la commande
    <command>emerge apache</command> dans l'exemple précédent.
   </simpara>
 </sect2>
 <sect2 id="install.unix.gentoo.config">
  <title>Meilleur contrôle de la configuration</title>
   <simpara>
    Dans la section précédente, &php; a été émergé sans aucun module d'activé.
    A l'heure de l'écriture de cette documentation, le seul module activé par 
    défaut avec Portage est XML, qui est nécessaire pour 
    <ulink url="&url.php.pear;">PEAR</ulink>.
    Cela n'est pas forcément ce que vous voulez et vous devriez découvrir
    rapidement que vous avez besoin de plus de modules, comme
    MySQL, gettext, GD, etc.
   </simpara>
   <simpara>
    Lorsque vous compilez &php; depuis les sources vous-même, vous devez activer
    les modules en utilisant la commande <command>configure</command>.
    Avec Gentoo, vous pouvez simplement définir des flags USE qui seront passés
    au script de configuration automatiquement.
    Pour voir les tags USE à utiliser avec emerge, vous pouvez essayer :
   </simpara>
   <example id="install.unix.gentoo.config.example">
    <title>Récupération de la liste des flags USE</title>
    <programlisting role="shell">
<![CDATA[
# USE="-*" emerge -pv php

[ebuild  N    ] dev-php/php-4.3.6-r1  -X -berkdb -crypt -curl -debug -doc 
-fdftk -firebird -flash -freetds -gd -gd-external -gdbm -gmp -hardenedphp 
-imap -informix -ipv6 -java -jpeg -kerberos -ldap -mcal -memlimit -mssql 
-mysql -ncurses -nls -oci8 -odbc -pam -pdflib -png -postgres -qt -readline 
-snmp -spell -ssl -tiff -truetype -xml2 -yaz  3,876 kB
]]>
    </programlisting>
   </example>
   <simpara>
    Comme vous pouvez le voir dans l'affichage précédent, &php; admet 
    beaucoup de flags USE. Regardez les et choisissez ce dont vous avez besoin.
    Si vous choisissez un flag et que vous n'avez pas la bonne bibliothèque, 
    Portage la compilera pour vous. C'est une bonne idée d'utiliser la commande 
    <command>emerge -pv</command> encore une fois pour voir ce que Portage
    va compiler en accord avec les flags que vous avez placés. Par exemple, si
    vous n'avez pas d'installation de X et que vous choisissez d'inclure X dans
    les flags USE, Portage compilera X en priorité par rapport à &php;, ce qui
    peut prendre un certain nombre d'heures.
   </simpara>
   <simpara>
    Si vous choisissez de compiler &php; avec le support MySQL, CURL et GD, la 
    commande devrait ressembler à ceci :
   </simpara>  
   <example id="install.unix.gentoo.config.example2">
    <title>Installation de &php; avec les flags USE</title>
    <programlisting role="shell">
<![CDATA[
# USE="-* curl mysql gd" emerge php mod_php
]]>
    </programlisting>
   </example>
   <simpara>
    Tout comme dans le dernier exemple, n'oubliez pas d'émerger &php; tout comme
    mod_php. "php" ici signifie la version de &php; en ligne de commande, alors
    que  "mod_php" correspond au module Apache.
   </simpara>
 </sect2>
 <sect2 id="install.unix.gentoo.faq">
  <title>Problèmes fréquents</title>
  <itemizedlist>
   <listitem>
    <simpara>
     Si vous voyez les sources de &php; au lieu de ce que devrait produire votre 
     script, vous avez certainement oublié d'éditer le fichier 
     <filename>/etc/conf.d/apache</filename>.
     Apache doit être démarré avec le flag -D PHP4. Pour vérifier si le flag est
     présent, vous devriez être en mesure de le voir lorsque vous utilisez la
     commande <command>ps ax | grep apache</command> pendant que Apache
     fonctionne.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     En raison de problèmes de localisation, vous pourriez avoir des soucis
     lorsque plusieurs versions de &php; sont installées sur votre système.
     Dans ce cas, vous devez supprimer les anciennes versions manuellement en
     utilisant la commande 
     <command>emerge unmerge mod_php-&lt;old version&gt;</command>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Si vous ne pouvez pas émerger &php; à cause de Java, essayez en exécutant 
     la  commande <command>-*</command> au début des flags USE comme dans
     l'exemple précédent.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Si vous avez des soucis de configuration Apache et &php;, vous pouvez toujours
     chercher sur les <ulink url="&url.gentoo.forums;">forums Gentoo</ulink>.
     Essayez d'y rechercher les mots clés "<literal>Apache PHP</literal>".
    </simpara>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
