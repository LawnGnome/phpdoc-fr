<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.1 $ -->
<!-- EN-Revision: 1.2 Maintainer: yannick Status: ready -->
<sect1 id="install.unix.gentoo">
 <title>Installation sous Gentoo</title>
 <para>
  Cette section contient des notes et astuces spécifiques à l'installation
  de &php; sous <ulink url="&url.gentoo;">Gentoo Linux</ulink>.
 </para>
 <sect2 id="install.unix.gentoo.portage">
  <title>Utilisation de Portage (emerge)</title>
   <simpara>
    Au lieu de télécharger les sources de &php; et de les compiler vous-même,
    l'utilisation du système de paquet de Gentoo est la méthode la plus simple
    et la plus propre pour installer &php;. Si vous n'êtes pas familié avec la 
    compilation de logiciel sous Linux, c'est la voix à suivre.
   </simpara>
   <simpara>
    Si vous avez compiler votre système Gentoo jusqu'ici, vous avez déjà du utiliser
    Portage. L'nstallation de Apache et de &php; n'est pas différente que n'importe quel
    utilitaire système.
   </simpara>
   <simpara>
    La première décision à prendre est de choisir entre Apache 1.3.x et Apache 2.x. Bien 
    que les deux peuvent être utilisés avec &php;, les instructions qui suivent utiliseront
    Apache 1.3.x. Une autre chose à considérer est si votre arborescence local de Portage
    est à jour ou non. Si vous ne l'avez pas mise à jour récemment, vous devez
    exécuter la commande <command>emerge sync</command> avant de faire 
    quoi que ce soit d'autre. De ce fait, vous serez en mesure d'utiliser la version la plus
    récente d'Apache et de &php;.
   </simpara>
   <simpara>
    Maintenant que tout est en place, vous pouvez utiliser l'exemple suivant pour installer
    Apache et &php; :
   </simpara>
   <example id="install.unix.gentoo.portage.example">
    <title>Exemple d'installation avec Apache 1.3 sous Gentoo</title>
    <programlisting role="shell">
<![CDATA[
# emerge \<apache-2
# USE="-*" emerge php mod_php
# ebuild /var/db/pkg/dev-php/mod_php-<your PHP version>/mod_php-<your PHP version>.ebuild config
# nano /etc/conf.d/apache
  Add "-D PHP4" to APACHE_OPTS
  
# rc-update add apache default
# /etc/init.d/apache start
]]>
    </programlisting>
   </example>
   <simpara>
    Vous pouvez trouver plus d'informations sur emerge dans l'excellent 
    <ulink url="&url.gentoo.portage;">manuel Portage</ulink>
    issus du site web de Gentoo.
   </simpara>
   <simpara>
    Si vous devez utiliser Apache 2, vous pouvez simplement exécuter la commande
    <command>emerge apache</command> dans l'exemple précédent.
   </simpara>
 </sect2>
 <sect2 id="install.unix.gentoo.config">
  <title>Meilleur contrôle de la configuration</title>
   <simpara>
    Dans la section précédente, &php; a été émergé sans aucun module d'activé.
    A l'heure de l'écriture de cette documentation, le seul module activé par défaut
    avec Portage est XML, qui est nécessaire pour 
    <ulink url="&url.php.pear;">PEAR</ulink>.
    Celà n'est pas forcemment ce que vous voulez et vous devriez découvrir
    rapidement que vous avez besoin de plus de modules, comme par exemple,
    MySQL, gettext, GD, etc.
   </simpara>
   <simpara>
    Lorsque vous compilez &php; depuis les sources vous-même, vous devez activer
    les modules en utilisant la commande <command>configure</command>.
    Avec Gentoo, vous pouvez simplement définir des flags USE qui seront passés
    au script de configuration automatiquement.
    Pour voir les tags USE à utiliser avec emerge, vous pouvez essayer :
   </simpara>
   <example id="install.unix.gentoo.config.example">
    <title>Récupération de la liste des flags USE</title>
    <programlisting role="shell">
<![CDATA[
# USE="-*" emerge -pv php

[ebuild  N    ] dev-php/php-4.3.6-r1  -X -berkdb -crypt -curl -debug -doc 
-fdftk -firebird -flash -freetds -gd -gd-external -gdbm -gmp -hardenedphp 
-imap -informix -ipv6 -java -jpeg -kerberos -ldap -mcal -memlimit -mssql 
-mysql -ncurses -nls -oci8 -odbc -pam -pdflib -png -postgres -qt -readline 
-snmp -spell -ssl -tiff -truetype -xml2 -yaz  3,876 kB
]]>
    </programlisting>
   </example>
   <simpara>
    As you can see from the last output, PHP considers a lot of USE flags.
    Look at them closely and choose what you need. If you choose a flag and 
    you do not have the proper librairies, Portage will compile them for you.
    It is a good idea to use <command>emerge -pv</command> again to see what
    Portage will compile in accordance to your USE flags. As an example,
    if you do not have X installed and you choose to include X in the USE
    flags, Portage will compile X prior to PHP, which can take a couple
    of hours.
   </simpara>
   <simpara>
    If you choose to compile PHP with MySQL, cURL and GD support, the command
    will look something like this:
   </simpara>  
   <example id="install.unix.gentoo.config.example2">
    <title>Install PHP with USE flags</title>
    <programlisting role="shell">
<![CDATA[
# USE="-* curl mysql gd" emerge php mod_php
]]>
    </programlisting>
   </example>
   <simpara>
    As in the last example, do not forget to emerge php as well as mod_php.
    php is responsible for the command line version of PHP as mod_php is
    for the Apache module version of PHP.
   </simpara>
 </sect2>
 <sect2 id="install.unix.gentoo.faq">
  <title>Common Problems</title>
  <itemizedlist>
   <listitem>
    <simpara>
     If you see the PHP source instead of the result the script should
     produce, you have probably forgot to edit <filename>/etc/conf.d/apache</filename>.
     Apache needs to be started with the -D PHP4 flag. To see if the flag is
     present, you should be able to see it when using 
     <command>ps ax | grep apache</command> while Apache is running.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     Due to slotting problems, you might end up with more than one version
     of PHP installed on your system. If this is the case, you need to unmerge
     the old versions manually by using
     <command>emerge unmerge mod_php-&lt;old version&gt;</command>.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     If you cannot emerge PHP because of Java, try putting <command>-*</command>
     in front of your USE flags like in the above examples.
    </simpara>
   </listitem>
   <listitem>
    <simpara>
     If you are having problems configuring Apache and PHP, you can always
     search the <ulink url="&url.gentoo.forums;">Gentoo Forums</ulink>.
     Try searching with the keywords "Apache PHP".
    </simpara>
   </listitem>
  </itemizedlist>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
