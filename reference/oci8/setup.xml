<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 283829 Maintainer: yannick Status: ready -->
<!-- Reviewed: yes -->

<chapter xml:id="oci8.setup" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.setup;

 <!-- {{{ Requirements -->
 <section xml:id="oci8.requirements">
  &reftitle.required;
  <para>
   Vous avez besoin des bibliothèques Oracles pour utiliser cette extension.
   Les utilisateur Windows doivent utiliser les bibliothèques de version 10 ou supérieure pour
   se servir de la bibliothèque <filename>php_oci8.dll</filename>.
  </para>
  <note>
   <para>
    Cette extension ne supporte plus les bibliothèques Oracle 8 client.
    Cependant, vous pouvez toujours vous connecter aux serveurs Oracle 8
    tant que la bibliothèque client (v.9+) le supporte.
   </para>
  </note>
  <para>
   La meilleure façon d'installer tous les fichiers nécessaires
   est d'utiliser l'Instant Client Oracle, qui est disponible à l'adresse :
   <link xlink:href="&url.oracle.instant.client;">&url.oracle.instant.client;</link>.
   Pour fonctionner avec OCI8, le module OCI8 "basic" de l'Instant Client Oracle est
   suffisant. L'Instant Client n'a pas besoin que les variables d'environnement
   ORACLE_SID ou ORACLE_HOME soient définies. Par contre, vous devez toujours
   définir les variables LD_LIBRARY_PATH et NLS_LANG.
  </para>
  <para>
   Avant d'utiliser cette extension, assurez-vous que vous avez bien
   paramétré vos variables d'environnement Oracle, ainsi que votre
   démon utilisateur. Ces variables doivent être définies <emphasis>avant</emphasis>
   de démarrer votre serveur web. Les variables dont vous pouvez avoir besoin sont :
   <itemizedlist>
    <listitem>
     <simpara>
      ORACLE_HOME
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      ORACLE_SID
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      LD_PRELOAD
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      LD_LIBRARY_PATH
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      NLS_LANG
     </simpara>
    </listitem>
   </itemizedlist>
   Pour les variables d'environnement Oracle moins fréquemment utilisées
   comme TNS_ADMIN, TWO_TASK, ORA_TZFILE ainsi que les
   diverses configurations globales Oracle comme les variables
   ORA_NLS33, ORA_NLS10 et NLS_*, référez-vous à la documentation Oracle.
  </para>
  <para>
   Après avoir configuré ces variables pour votre utilisateur "serveur
   web", assurez-vous aussi d'ajouter cet utilisateur (<literal>nobody</literal>,
   <literal>www</literal>) au groupe Oracle.
  </para>
  <note>
   <title>
    Si votre serveur web ne démarre pas ou plante au démarrage avec Oracle
    </title>
   <para>
    Vérifiez que Apache a bien été compilé avec la bibliothèque pthread :
   </para>
   <para>
    <informalexample>
     <screen>
<![CDATA[
# ldd /www/apache/bin/httpd
   libpthread.so.0 => /lib/libpthread.so.0 (0x4001c000)
   libm.so.6 => /lib/libm.so.6 (0x4002f000)
   libcrypt.so.1 => /lib/libcrypt.so.1 (0x4004c000)
   libdl.so.2 => /lib/libdl.so.2 (0x4007a000)
   libc.so.6 => /lib/libc.so.6 (0x4007e000)
   /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
]]>
     </screen>
    </informalexample>
   </para>
   <para>
    Si la libpthread n'est pas listée, vous devez réinstaller Apache :
   </para>
   <para>
    <informalexample>
     <screen>
<![CDATA[
# cd /usr/src/apache_1.3.xx
# make clean
# LIBS=-lpthread ./config.status
# make
# make install
]]>
     </screen>
    </informalexample>
   </para>
   <para>
    Notez bien que sur certains systèmes comme UnixWare il faut utiliser
    libthread au lieu de libpthread. PHP et Apache doivent alors être configurés
    avec EXTRA_LIBS=-lthread.
   </para>
  </note>
 </section>
 <!-- }}} -->

 <!-- {{{ Installation -->
 <section xml:id="oci8.installation">
  &reftitle.install;
  &no.install;
 </section>
 <!-- }}} -->

 <!-- {{{ Configuration -->
 &reference.oci8.ini;
 <!-- }}} -->

 <!-- {{{ Resources -->
 <section xml:id="oci8.resources">
  &reftitle.resources;
  &no.resource;
 </section>
 <!-- }}} -->

</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

