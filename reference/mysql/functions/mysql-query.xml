<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.9 $ -->
<!-- EN-Revision: 1.10 Maintainer: dams Status: ready -->
<!-- Reviewed: yes -->
  <refentry id="function.mysql-query">
   <refnamediv>
    <refname>mysql_query</refname>
    <refpurpose>Envoie une requête SQL à un serveur MySQL</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>resource</type><methodname>mysql_query</methodname>
      <methodparam><type>string</type><parameter>query</parameter></methodparam>
      <methodparam choice="opt"><type>resource</type><parameter>link_identifier</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>mysql_query</function> envoie la requête SQL <parameter>query</parameter> à
     la base de données actuellement active sur le serveur MysQL. Si
     <parameter>link_identifier</parameter> n'est pas précisé,
     la dernière connexion est utilisée. Si aucune connexion n'a
     été ouverte, la fonction tentera d'en ouvrir une, avec la fonction
     <function>mysql_connect</function> mais sans aucun paramètre
     (c'est-à-dire avec les valeurs par défaut).
    </para>
    <note>
     <para>
      La requête ne doit pas être terminée par un point-virgule.
     </para>
    </note>
    <para>
     Seules les requêtes SQL <literal>SELECT</literal>,
     <literal>SHOW</literal>, <literal>EXPLAIN</literal> et <literal>DESCRIBE</literal>,
     utilisées avec <function>mysql_query</function>
     retournent une ressource de résultat MySQL, ou bien &false; si
     la requête n'a pu être exécutée correctement. Pour les autres
     types de requêtes SQL, <function>mysql_query</function> retourne &true;
     en cas de succès et &false; en cas d'erreur. Un résultat différent de
     &false;, la valeur signifie que la requête soumise est valide
     et qu'elle a pu être exécutée correctement. Cela n'apporte aucune
     indication sur le nombre de lignes affectées. Il est parfaitement
     possible qu'une requête soit réussie, mais qu'elle ne modifie
     aucune ligne, ou qu'elle n'en retourne aucune.
    </para>
    <para>
     L'exemple suivant est syntaxiquement invalide, ce qui conduit
     <function>mysql_query</function> à l'échec et retourne
     &false;:
     <example>
      <title>Exemple avec <function>mysql_query</function></title>
      <programlisting role="php">
<![CDATA[
<php
$result = mysql_query("SELECT * WHERE 1=1")
    or die ("Requête invalide");
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
      L'exemple suivant est sémantiquement invalide si
      <literal>ma_colonne</literal> n'est pas une colonne de la table
      <literal>my_table</literal>, ce qui conduit
      <function>mysql_query</function> à l'échec et retourne
      &false; :
     <example>
      <title>Exemple avec <function>mysql_query</function> (2)</title>
      <programlisting role="php">
<![CDATA[
<?php
$result = mysql_query("SELECT ma_colonne FROM ma_table")
    or die ("Requête invalide");
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     <function>mysql_query</function> échouera aussi et retournera
     &false; si les droits d'accès ne sont pas suffisants.
    </para>
    <para>
     En supposant que la requête réussisse, vous pouvez appeler
     <function>mysql_affected_rows</function>  pour connaître le nombre de
     lignes affectées (pour les commandes DELETE, INSERT, REPLACE, ou
     UPDATE).
    </para>
    <para>

     Pour les commandes SELECT, <function>mysql_query</function> retourne un
     identifiant de résultat que vous pouvez passer à
     <function>mysql_fetch_array</function>, ou n'importe quelle autre
     fonction de lecture de résultat. Lorsque vous avez terminé
     avec le résultat, libérez la mémoire avec
     <function>mysql_free_result</function>.
    </para>
    <para>
     Voir aussi
     <function>mysql_num_rows</function>,
     <function>mysql_affected_rows</function>,
     <function>mysql_unbuffered_query</function>,
     <function>mysql_free_result</function>,
     <function>mysql_fetch_array</function>,
     <function>mysql_fetch_row</function>,
     <function>mysql_fetch_assoc</function>,
     <function>mysql_result</function>,
     <function>mysql_select_db</function> et 
     <function>mysql_connect</function>.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
