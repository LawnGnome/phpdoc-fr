<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.11 $ -->
<!-- EN-Revision: 1.6 Maintainer: yannick Status: ready -->
<!-- Reviewed: yes -->

 <refentry id="function.ifx-getsqlca">
  <refnamediv>
   <refname>ifx_getsqlca</refname>
   <refpurpose>
    Retourne le contenu de la variable sqlca.sqlerrd[0..5] après une requête
   </refpurpose>
  </refnamediv>
  <refsect1>
   &reftitle.description;
    <methodsynopsis>
     <type>array</type><methodname>ifx_getsqlca</methodname>
     <methodparam><type>resource</type><parameter>result_id</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>ifx_getsqlca</function> retourne une pseudo-ligne (tableau
    associatif) avec sqlca.sqlerrd[0] à sqlca.sqlerrd[5] après
    la requête associée <parameter>result_id</parameter>.
   </para>
   <para>
    <parameter>result_id</parameter> est un identifiant valide de résultat
    retourné par <function>ifx_query</function> ou
    <function>ifx_prepare</function>.
   </para>
   <para>
    Pour les requêtes INSERT, UPDATE et DELETE, les valeurs
    retournées sont celles fixées par le serveur après
    avoir exécuté la requête. Cela donne accès au
    nombre de lignes affectées, ainsi qu'au numéro de série
    d'insertion. Pour les requêtes de type SELECT, les valeurs
    retournées sont celles qui ont été
    préparées. Utiliser cette fonction économise
    l'exécution d'une requête "select dbinfo('sqlca.sqlerrdx')",
    étant donné qu'elle retourne les valeurs qui ont été
    sauvées par le pilote ifx au moment approprié.
   </para>
   <para>
    <example>
     <title>Lire les valeurs de sqlca.sqlerrd[x] </title>
     <programlisting role="php">
<![CDATA[
<?php
/* On suppose que la première colonne d'une table 
'quelconque' est un numéro de série */
$qid = ifx_query("insert into sometable values(0, '2nd column', 'another column' ", $connid);
if (!$qid) {
  //    ... erreur ...
}
$sqlca = ifx_getsqlca($qid);
$serial_value = $sqlca["sqlerrd1"];
echo "Le numéro de série de la valeur insérée 
        est : " . $serial_value . "<br />\n";
?>
]]>
     </programlisting>
    </example>
   </para>
  </refsect1>
 </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->