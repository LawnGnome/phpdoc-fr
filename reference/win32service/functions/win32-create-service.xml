<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 297028 Maintainer: jsgoupil Status: ready -->
<!-- Reviewed: no -->

<refentry xml:id="function.win32-create-service" xmlns="http://docbook.org/ns/docbook">
 <refnamediv>
  <refname>win32_create_service</refname>
  <refpurpose>Crée une nouvelle entrée pour service dans la base de données SCM</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>mixed</type><methodname>win32_create_service</methodname>
   <methodparam><type>array</type><parameter>details</parameter></methodparam>
   <methodparam choice="opt"><type>string</type><parameter>machine</parameter></methodparam>
  </methodsynopsis>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    <varlistentry>
     <term><parameter>details</parameter></term>
     <listitem>
      <para>
       Un tableau des détails des services :
       <variablelist>
        <varlistentry>
         <term><parameter>service</parameter></term>
         <listitem>
          <para>
           Le nom court du service. C'est le nom que vous utiliserez pour
           contrôler le service en utilisant la commande
           <literal>net</literal>. Le service doit être unique (deux services
           ne peuvent partager le même nom), et idéalement, devrait éviter
           d'avoir des espaces dans son nom.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>display</parameter></term>
         <listitem>
          <para>Le nom d'affichage du service. C'est le nom que vous verrez
          dans l'Applet Services.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>user</parameter></term>
         <listitem>
          <para>
           Le nom de l'utilisateur sous lequel vous voulez que le service
           s'exécute. Si oublié, le service fonctionnera en tant que
           LocalSystem. Si le nom de l'utilisateur est spécifié, vous devez
           aussi fournir un mot de passe.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>password</parameter></term>
         <listitem>
          <para>
           Le mot de passe qui correspond à <parameter>user</parameter>.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>path</parameter></term>
         <listitem>
          <para>
           Le chemin complet au module exécutable qui sera démarré lorsque le
           service est démarré. Si oublié, le chemin du processus courant de
           PHP sera utilisé.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>params</parameter></term>
         <listitem>
          <para>
           Paramètres de commande à passer au service lorsqu'il démarre.
           Si vous voulez exécuter un script PHP en tant que service, alors
           le premier paramètre devrait être le chemin complet au script PHP
           que vous prévoyez exécuter.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>load_order</parameter></term>
         <listitem>
          <para>
           Contrôle le load_order. Cela n'est pas encore complètement
           supporté.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>svc_type</parameter></term>
         <listitem>
          <para>
           Fixe le type de service. Si oublié, la valeur par défaut est
           <constant>WIN32_SERVICE_WIN32_OWN_PROCESS</constant>. Ne changez
           pas ceci à moins que vous savez vraiment ce que vous faites.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>start_type</parameter></term>
         <listitem>
          <para>
           Spécifie comment le service devrait être démarré. La valeur par
           défaut est <constant>WIN32_SERVIDE_AUTO_START</constant> qui
           signifie que le service sera démarré lorsque la machine démarrera.
          </para>
         </listitem>
        </varlistentry>
        <varlistentry>
         <term><parameter>error_control</parameter></term>
         <listitem>
          <para>
           Informe le SCM à propos de ce qu'il devrait faire lorsqu'il détecte
           un problème avec le service. La valeur par défaut est
           <constant>WIN32_SERVER_ERROR_IGNORE</constant>. Le changement de
           cette valeur n'est pas encore complètement supporté.
          </para>
         </listitem>
        </varlistentry>
       </variablelist>
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>machine</parameter></term>
     <listitem>
      <para>
       Le nom optionnel de la machine sur lequel vous voulez créer le service.
       Si oublié, cela utilisera la machine locale.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Retourne &true; en cas de succès, retourne un code d'erreur win32
   autrement.
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>Exemple avec <function>win32_create_service</function></title>
    <para>
     Crée un service dont le nom court est 'dummyphp'.
    <programlisting role="php">
<![CDATA[
<?php
$x = win32_create_service(array(
     'service' => 'dummyphp',
     'display' => 'exemple dummy PHP service',
     'params' => __FILE__ . ' run',
));
debug_zval_dump($x);
?>
]]>
     </programlisting>
    </para>
   </example>
  </para>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>win32_delete_service</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
