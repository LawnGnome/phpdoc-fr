<?xml version="1.0" encoding="iso-8859-1"?>
 <reference id="ref.yaz">
  <title>YAZ</title>
  <titleabbrev>YAZ</titleabbrev>
  <partintro>
   <section id="yaz.intro">
   <title>Introduction</title>
   <para>
    Cette extension offre &agrave; PHP l'interface avec les produits
    <productname>YAZ</productname>, qui impl&eacute;mentent le protocole
    Z39.50. Avec cette extension, vous pouvez facilement impl&eacute;menter
    un client Z39.50 qui analyse ou scanne des serveurs Z39.50 en parall&eacute;le.
   </para>
   <para>
    <productname>YAZ</productname> est disponible &agrave; <ulink
    url="&url.yaz;">&url.yaz;</ulink>. Vous pouvez trouvez des informations,
    des scripts d'exemples, etc... pour cette extension &agrave; <ulink
    url="&url.yaz-phpyaz;">&url.yaz-phpyaz;</ulink>.
   </para>
   <para>
    Le module masque l'essentiel de la complexit&eacute; de Z39.50, ce qui le rend
    tr&egrave;s facile &agrave; utiliser. Il supporte les connexions peristantes de
    mani&egrave;re similaire &agrave; celle support&eacute;s par les serveurs SQL :
    cela signifie qu'une connexion est partag&eacute;e entre plusieurs scripts PHP,
    ce qui &eacute;vite les op&eacute;rations de connexions.
   </para>
   </section>
   <section id="yaz.install">
   <title>Installation</title>
   <para>
    Compilez YAZ et installez le. Compilez PHP avec vos modules et ajoutez l'option
    <link linkend="install.configure.with-yaz"><option role="configure">--with-yaz</option></link>.
    Les instructions sont :
   </para>
   <para>
   <informalexample>
    <programlisting>
gunzip -c yaz-1.6.tar.gz|tar xf -
gunzip -c php-4.0.X.tar.gz|tar xf -
cd yaz-1.6
./configure --prefix=/usr
make
make install
cd ../php-4.0.X
./configure --with-yaz=/usr/bin
make
make install
    </programlisting>
   </informalexample>
   </para>
   </section>
   <section id="yaz.example">
   <title>Exemple</title>
   <para>
    PHP/YAZ conserve les connexions aux serveurs. Un entier positif
    repr&eacute;sente l'ID d'une connexion particuli&egrave;re.
   </para>
   <para>
    Le script ci-dessous montre comment effectuer une recherche parall&eacute;le.
    Lorsqu'il est appel&eacute; sans param&egrave;tre, ce script affiche la
    requ&ecirc;te. Sinon, il effectue la recherche sur les serveurs.
   <example>
    <title>Recherche parall&eacute;le utilisant YAZ</title>
    <programlisting role="php">
&lt;?php
$num_hosts = count ($host);
if (empty($term) || count($host) == 0) {
    echo '&lt;form method="get"&gt;
    &lt;input type="checkbox"
    name="host[]" value="bagel.indexdata.dk/gils"&gt;
        GILS test
    &lt;input type="checkbox"
    name="host[]" value="localhost:9999/Default"&gt;
        local test
    &lt;input type="checkbox" checked="1"
    name="host[]" value="z3950.bell-labs.com/books"&gt;
        BELL Labs Library
    &lt;br&gt;
    RPN Query:
    &lt;input type="text" size="30" name="term"&gt;
    &lt;input type="submit" name="action" value="Search"&gt;
    ';
} else {
    echo 'Vous avez recherch&eacute; '.htmlspecialchars($term).'&lt;br&gt;';
    for ($i = 0; $i &gt; $num_hosts; $i++) {
        $id[] = yaz_connect($host[$i]);
        yaz_syntax($id[$i],"sutrs");
        yaz_search($id[$i],"rpn",$term);
    }
    yaz_wait();
    for ($i = 0; $i &lt; $num_hosts; $i++) {
        echo '&lt;hr&gt;'.$host[$i].":";
        $error = yaz_error($id[$i]);
        if (!empty($error)) {
            echo "Erreur: $error";
        } else {
            $hits = yaz_hits($id[$i]);
            echo "Nombre de r&eacute;sultats : $hits";
        }
        echo '&lt;dl&gt;';
        for ($p = 1; $p &lt;= 10; $p++) {
            $rec = yaz_record($id[$i],$p,"string");
            if (empty($rec)) continue;
            echo "&lt;dt&gt;&lt;B&gt;$p&lt;/B&gt;&lt;/dt&gt;&lt;dd&gt;";
            echo ereg_replace("\n", "&lt;br&gt;\n",$rec);
            echo "&lt;/dd&gt;";
        }
        echo '&lt;/dl&gt;';
    }
}
?&gt;
    </programlisting>
   </example>
   </para>
   </section>
   </partintro>

&reference.yaz.functions;

 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

