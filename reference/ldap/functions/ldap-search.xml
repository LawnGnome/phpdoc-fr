<?xml version="1.0" encoding="iso-8859-1"?>
<!-- splitted from ./fr/functions/ldap.xml, last change in rev 1.10 -->
<!-- last change to 'ldap-search' in en/ tree in rev 1.17 -->
 <refentry id="function.ldap-search">
  <refnamediv>
   <refname>ldap_search</refname>
   <refpurpose>Recherche dans tout l'arbre LDAP.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>resource</type><methodname>ldap_search</methodname>
     <methodparam><type>resource</type><parameter>link_identifier</parameter></methodparam>
     <methodparam><type>string</type><parameter>base_dn</parameter></methodparam>
     <methodparam><type>string</type><parameter>filter</parameter></methodparam>
     <methodparam choice="opt"><type>array</type><parameter>attributes</parameter></methodparam>
     <methodparam choice="opt"><type>int</type><parameter>attrsonly</parameter></methodparam>
     <methodparam choice="opt"><type>int</type><parameter>sizelimit</parameter></methodparam>
     <methodparam choice="opt"><type>int</type><parameter>timelimit</parameter></methodparam>
     <methodparam choice="opt"><type>int</type><parameter>deref</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>ldap_search</function> retourne un identifiant de r&eacute;sultat
    en cas de succ&egrave;s, et &false; sinon.
   </para>
   <para>
    <function>ldap_search</function> effectue une recherche avec le filtre
    <parameter>filter</parameter> dans le dossier <parameter>base_dn</parameter>,
    et avec l'option de r&eacute;cursivit&eacute; LDAP_SCOPE_SUBTREE. Cela revient
    &agrave; rechercher dans toute la base sous le dossier
    <parameter>base_dn</parameter>.
   </para>
   <para>
    Le quatri&egrave;me param&egrave;tre est optionnel, et peut &ecirc;tre
    ajout&eacute; pour restreindre les attributs et les valeurs retourn&eacute;es.
    Il est beaucoup plus efficace que la m&eacute;thode qui consiste &agrave; lire
    tous les attributs et leur valeurs associ&eacute;es. L'utilisation
    de ce quatri&egrave;me param&egrave;tre est encourag&eacute;.
   </para>
   <para>
    Le quatri&egrave;me param&egrave;tre est un tableau de cha&icirc;nes, qui
    contient les attributs d&eacute;sir&eacute;s, array("mail","sn","cn"). Notez
    que le nd <parameter>base_dn</parameter> est toujours retourn&eacute;,
    quelques que soient les attributs demand&eacute;s.
   </para>
   <para>
    Notez que certains serveurs sont configur&eacute;s pour limiter le nombre
    de r&eacute;sultats. Si cela arrive, le serveur indiquera qu'il n'a
    transf&eacute;r&eacute; qu'une partie du r&eacute;sultat. Cela arrivera
    aussi si le sixi&egrave;me param&egrave;tre <parameter>sizelimit</parameter> a &eacute;t&eacute;
    utilis&eacute; pour limiter le nombre de lignes lues.
   </para>
   <para>
    Le cinqui&egrave;me param&egrave;tre <parameter>attrsonly</parameter>
    doit &ecirc;tre mis &agrave; 1 si seuls les types d'attributs sont
    demand&eacute;s. S'il est mis &agrave; 0, les types des attributs et leur
    valeur seront lue (comportement par d&eacute;faut).
   </para>
   <para>
    Le sixi&egrave;me param&egrave;tre <parameter>sizelimit</parameter> permet de
    limiter le nombre de lignes lues. 0 indique qu'il n'y a pas
    de limite. NOTE : ce param&egrave;tre ne peut PAS annuler la configuration
    du serveur. Il peut seulement la r&eacute;duire.
   </para>
   <para>
    Le septi&egrave;me param&egrave;tre <parameter>timelimit</parameter> fixe la dur&eacute;e
    de la recherche en seconde.  0 indique qu'il n'y a pas
    de limite. NOTE : ce param&egrave;tre ne peut PAS annuler la configuration
    du serveur. Il peut seulement la r&eacute;duire.
   </para>
   <para>
    Le huiti&egrave;me param&egrave;tre <parameter>deref</parameter> indique
    le comportement &agrave; suivre avec les alias durant une recherche.
    Sa valeur peut &ecirc;tre l'une de celles-ci :
    <itemizedlist>
     <listitem>
      <simpara>
       LDAP_DEREF_NEVER - (par d&eacute;faut) les alias ne sont pas d&eacute;r&eacute;f&eacute;renc&eacute;s.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       LDAP_DEREF_SEARCHING - aliases sont d&eacute;r&eacute;f&eacute;renc&eacute;s durant la recherche
       mais pas lors de leur localisation.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       LDAP_DEREF_FINDING - aliases sont d&eacute;r&eacute;f&eacute;renc&eacute;s durant leur localisation
       mais pas lors de la recherche.
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       LDAP_DEREF_ALWAYS - les alias sont toujours d&eacute;r&eacute;f&eacute;renc&eacute;s.
      </simpara>
     </listitem>
    </itemizedlist>
   </para>
   <para>
    Ces param&egrave;tres optionnels ont &eacute;t&eacute; ajout&eacute;s &agrave;
    partir de la version 4.0.2:
    <parameter>attrsonly</parameter>,
    <parameter>sizelimit</parameter>,
    <parameter>timelimit</parameter>,
    <parameter>deref</parameter>.
   </para>
   <para>
    La cha&icirc;ne de filtre peut &ecirc;tre simple ou complexe. Elle utilise
    les op&eacute;rateurs bool&eacute;ens au m&ecirc;me format que celui
    d&eacute;crit dans les documentations LDAP (Allez voir celle de
    <ulink url="&url.ldap.netscape;">Netscape Directory SDK</ulink>
    pour plus d'informations sur les filtres).
   </para>
   <para>
    L'exemple suivant r&eacute;cup&egrave;re toutes les unit&eacute;s
    organisationnelles, le nom, pr&eacute;nom et email, dans la
    soci&eacute;t&eacute; "Ma Soci&eacute;t&eacute;" o&ugrave;
    le nom et pr&eacute;nom contiennent la sous-cha&icirc;ne
    $person. Cet exemple utilise un filtre bool&eacute;en pour
    indiquer au serveur qu'il doit
    rechercher des informations dans plusieurs attributs.
    <example>
     <title>Recherche LDAP</title>
     <programlisting role="php">
&lt;?php
// $ds est un identifiant valide de connexion &agrave; un serveur LDAP
// $person est tout ou une partir d'un nom
  $dn = "o=Ma Soci&eacute;t&eacute;, c=Fr";
  $filter="(|(sn=$person*)(givenname=$person*))";
  $justthese = array( "ou", "sn", "givenname", "mail");
  $sr=ldap_search($ds, $dn, $filter, $justthese);
  $info = ldap_get_entries($ds, $sr);
  print $info["count"]." Entr&eacute;es retourn&eacute;es.&lt;p>";
?&gt;
     </programlisting>
    </example>
   </para>
  </refsect1>
 </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
