<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.4 $ -->
<!-- splitted from ./en/functions/sockets.xml, last change in rev 1.1 -->
  <refentry id="function.socket-last-error">
   <refnamediv>
    <refname>socket_last_error</refname>
    <refpurpose>Lit la dernière erreur générée par une socket</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>int</type><methodname>socket_last_error</methodname>
      <methodparam choice="opt"><type>resource</type><parameter>socket</parameter></methodparam>
     </methodsynopsis>
     &warn.experimental.func;
    <para>
     <function>socket_last_error</function> retourne un code d'erreur socket.
    </para>
    <para>
     Si un paramètre est passé à cette fonction, la dernière erreur 
     qui aura été générée par cette socket sera retournée. Si la ressource
     de socket est omise, le dernier code d'erreur généré est retourné.
     Ce comportement est particulièrement pratique pour des fonctions comme
     <function>socket_create</function> qui ne retourne pas de socket
     en cas d'echec, et <function>socket_select</function> qui peut 
     échouer sans raison directement liée à la socket. Le code d'erreur
     peut être transmis à <function>socket_strerror</function> qui retourne
     un message d'erreur lisible.
     <programlisting role="php">
<![CDATA[
<?php
  if (false == ($socket = @socket_create(AF_INET, SOCK_STREAM, SOL_TCP))) {
    die("Impossible de créer la socket, le code d'erreur est : " . socket_last_error() .
        ", le message d'erreur est : " . socket_strerror(socket_last_error()));
  }
?>
]]>
     </programlisting>
    </para>
    <note>
     <para>
      <function>socket_last_error</function> n'efface pas le code d'erreur. Utilisez
      plutôt la fonction <function>socket_clear_error</function> pour cela.
     </para>
    </note>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
