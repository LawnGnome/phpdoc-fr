<?xml version="1.0" encoding="iso-8859-1"?>
<!-- splitted from ./fr/functions/mail.xml, last change in rev 1.10 -->
<!-- last change to 'mail' in en/ tree in rev 1.2 -->
 <refentry id="function.mail">
  <refnamediv>
   <refname>mail</refname>
   <refpurpose>Envoie de mail</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>bool</type><methodname>mail</methodname>
     <methodparam><type>string</type><parameter>to</parameter></methodparam>
     <methodparam><type>string</type><parameter>subject</parameter></methodparam>
     <methodparam><type>string</type><parameter>message</parameter></methodparam>
     <methodparam choice="opt"><type>string</type><parameter>additional_headers</parameter></methodparam>
     <methodparam choice="opt"><type>string</type><parameter>additional_parameters</parameter></methodparam>
    </methodsynopsis>
   <simpara>
    <function>mail</function> poste automatiquement le message
    <parameter>message</parameter> à destination de
    <parameter>to</parameter>. Les destinataires multiples doivent être
    séparés par des virgules. Les emails avec pièces jointes
    ou contenus particuliers (comme les emails en HTML, par exemple), peuvent
    être réalisés avec cette fonction. Il faut respecter 
    l'encodage MIME. Pour plus de détails, voyez
    <ulink url="&url.email.mime.zend;">&url.zend.mail;</ulink> et
    <ulink url="&url.pear.package;Mail_Mime">les classes PEAR MIME</ulink>.
   </simpara>
   <simpara>
     Les RFC suivantes peuvent aussi se révéler utiles : 
     <ulink url="&url.rfc;1896">RFC 1896</ulink>,
     <ulink url="&url.rfc;2045">RFC 2045</ulink>,
     <ulink url="&url.rfc;2046">RFC 2046</ulink>,
     <ulink url="&url.rfc;2047">RFC 2047</ulink>,
     <ulink url="&url.rfc;2048">RFC 2048</ulink> et 
     <ulink url="&url.rfc;2049">RFC 2049</ulink>.
    </simpara>
   <para>
    <function>mail</function> retourne &true; si le mail
    est envoyé, et &false;sinon.
   </para>
   <para>
    <example>
     <title>Envoie de courrier électronique (mail)</title>
     <programlisting role="php">
<![CDATA[
<?php
  mail("maxou@exemple.com", "Mon Sujet", "Ligne 1\nLigne 2\nLigne 3");
?>
]]>
     </programlisting>
    </example>
   </para>
   <simpara>
    Le quatrième argument passé sera inséré à
    la fin de l'en-tête. Typiquement, cela permet d'insérer des
    en-têtes supplémentaires. Les en-têtes multiples doivent
    être séparées par des virgules.
   </simpara>
   <note>
    <para>
     Sous Windows 32bits, vous devez utiliser <literal>\r\n</literal> pour
     séparer les en-têtes. Notez aussi que les en-têtes cc: et bcc: sont
     sensibles à la casse et doivent être écrits <literal>Cc:</literal>
     et <literal>Bcc:</literal> sous Win32.
    </para>
   </note>
   <simpara>
    Si le cinquième argument <parameter>additional_parameters</parameter>
    est fourni, PHP l'utilisera dans son appel du programme d'envoie de
    courrier électronique. Ceci est pratique pour passer une valeur
    correcte à l'en-tête <literal>Return-Path</literal>, avec sendmail.
   </simpara>
   <note>
    <para>
     Le cinquième paramètre a été ajouté en PHP 4.0.5.
    </para>
   </note>
   <para>
    <example>
     <title>Envoi de eMail avec des en-têtes supplémentaires</title>
     <programlisting role="php">
<![CDATA[
<?php
mail("personne@exemple.com", "Le sujet", $message,
     "From: webmaster@{$_SERVER['SERVER_NAME']}\r\n"
    ."Reply-To: webmaster@{$_SERVER['SERVER_NAME']}\r\n"
    ."X-Mailer: PHP/" . phpversion());
?>
]]>
     </programlisting>
    </example>
    Avec le cinquième paramètre, vous pouvez ajouter d'autres paramètres
    de ligne de commande qui seront utilisés par le programme d'envoi de
    courrier. Dans l'exemple ci-dessous, l'en-tête <literal>Return-Path</literal>
    est correctement paramétré. Normalement, sendmail ajoute automatiquement
    l'en-tête <literal>X-Authentication-Warning</literal> (paramètre -f),
    car l'utilisateur "serveur web" n'est probablement pas un de ses
    utilisateurs de confiance ("trusted users"). Pour supprimer cette
    alerte, ajoutez l'utilisateur du serveur web dans la  configuration
    de sendmail.
    <example>
     <title>
      Envoi de eMail avec des en-têtes supplémentaires et
      un paramètre de ligne de commande supplémentaire
     </title>
     <programlisting>
<![CDATA[
<?php

mail("personne@exemple.com", "Le sujet", $message,
     "From: webmaster@{$_SERVER['SERVER_NAME']}", "-fwebmaster@{$_SERVER['SERVER_NAME']}");
?>
]]>
     </programlisting>
    </example>
    Vous pouvez aussi utiliser des techniques simples de
    concaténations de chaînes pour construire des
    messages complexes :
    <example>
     <title>Envoi de mail complexe avec <function>mail</function></title>
     <programlisting role="php">
<![CDATA[
<?php
/* destinataire */
$to  = "Mary <mary@example.com>" . ", " ; // note the comma
$to .= "Kelly <kelly@example.com>";

/* sujet */
$subject = "Anniversaires à souhaiter en Août";

/* message */
$message = "
<html>
<head>
 <title>Rappel des anniversaires d'Août</title>
</head>
<body>
<p>Voici la liste des anniversaires du mois d\'Août!</p>
<table>
 <tr>
  <th>Ami</th><th>Jour</th><th>Mois</th><th>Année</th>
 </tr>
 <tr>
  <td>Guillaume</td><td>3</td><td>Août</td><td>1970</td>
 </tr>
 <tr>
  <td>Sandra</td><td>17</td><td>Août</td><td>1973</td>
 </tr>
</table>
</body>
</html>";

/* Pour envoyer du mail au format HTML, vous pouvez configurer le type Content-type. */
$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";

/* D'autres en-têtes : errors, From cc's, bcc's, etc */
$headers .= "From: Birthday Reminder <birthday@example.com>\r\n";

$headers .= "Cc: birthdayarchive@example.com\r\n";
$headers .= "Bcc: birthdaycheck@example.com\r\n";

/* et hop, à la poste */
mail($to, $subject, $message, $headers);
?>
]]>
     </programlisting>
    </example>
   </para>
   <note>
    <para>
     Assurez-vous qu'il n'y ait aucune nouvelle ligne (ou d'autres
     espaces ou caractères blancs) dans les paramètres <parameter>to</parameter>
     ou <parameter>subject</parameter>, car cela peut avoir des effets
     secondaires irrationnels.
    </para>
   </note>
    <note>
     <para>
      Le paramètre <parameter>to</parameter> ne peut pas être une adresse
      de la forme &quot;Quelqu'un &lt;quidam@exemple.com&gt;&quot;. La commande
      mail ne comprendra pas ce format.
     </para>
    </note>
    <para>
     Voir aussi
     <function>imap_mail</function>.
    </para>
  </refsect1>
 </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
