<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 335843 Maintainer: yannick Status: ready -->
<!-- Reviewed: no -->

<sect1 xml:id="opcache.configuration" xmlns="http://docbook.org/ns/docbook">
 &reftitle.runtime;
 &extension.runtime;
 <para>
  <table>
   <title>Options de configuration d'OPcache</title>
   <tgroup cols="4">
    <thead>
     <row>
      <entry>&Name;</entry>
      <entry>&Default;</entry>
      <entry>&Changeable;</entry>
      <entry>&Changelog;</entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry><link linkend="ini.opcache.enable">opcache.enable</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.enable-cli">opcache.enable_cli</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link
      linkend="ini.opcache.memory-consumption">opcache.memory_consumption</link></entry>
      <entry>"64"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.interned-strings-buffer">opcache.interned_strings_buffer</link></entry>
      <entry>"4"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry>Disponible depuis PHP 5.3.0.</entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.max-accelerated-files">opcache.max_accelerated_files</link></entry>
      <entry>"2000"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.max-wasted-percentage">opcache.max_wasted_percentage</link></entry>
      <entry>"5"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.use-cwd">opcache.use_cwd</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.validate-timestamps">opcache.validate_timestamps</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.revalidate-freq">opcache.revalidate_freq</link></entry>
      <entry>"2"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.revalidate-path">opcache.revalidate_path</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.save-comments">opcache.save_comments</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.load-comments">opcache.load_comments</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.fast-shutdown">opcache.fast_shutdown</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.enable-file-override">opcache.enable_file_override</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.optimization-level">opcache.optimization_level</link></entry>
      <entry>"0xffffffff"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.inherited-hack">opcache.inherited_hack</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.dups-fix">opcache.dups_fix</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.blacklist-filename">opcache.blacklist_filename</link></entry>
      <entry>""</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.max-file-size">opcache.max_file_size</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.consistency-checks">opcache.consistency_checks</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_ALL</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.force-restart-timeout">opcache.force_restart_timeout</link></entry>
      <entry>"180"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.error-log">opcache.error_log</link></entry>
      <entry>""</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.log-verbosity-level">opcache.log_verbosity_level</link></entry>
      <entry>"1"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.preferred-memory-model">opcache.preferred_memory_model</link></entry>
      <entry>""</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.protect-memory">opcache.protect_memory</link></entry>
      <entry>"0"</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.mmap-base">opcache.mmap_base</link></entry>
      <entry>&null;</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
     <row>
      <entry><link linkend="ini.opcache.restrict-api">opcache.restrict_api</link></entry>
      <entry>""</entry>
      <entry>PHP_INI_SYSTEM</entry>
      <entry></entry>
     </row>
    </tbody>
   </tgroup>
  </table>
  &ini.php.constants;
 </para>
 
 &ini.descriptions.title;
 
 <para>
  <variablelist>
   <varlistentry xml:id="ini.opcache.enable">
    <term>
     <parameter>opcache.enable</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Active le cache d'opcode. Lorsqu'il est désactivé, le code n'est
      ni optimisé, ni mis en cache. Le paramétrage de <literal>opcache.enable</literal>
      ne peut être activé pendant l'exécution via la fonction
      <function>ini_set</function>, il ne peut être que désactivé. Tenter de l'activer
      dans un script va générer une alerte.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.enable-cli">
    <term>
     <parameter>opcache.enable_cli</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Active le cache d'opcode pour la version CLI de PHP. Cela est vraiment utile pour les tests et le debugging.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.memory-consumption">
    <term>
     <parameter>opcache.memory_consumption</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      La taille de la mémoire partagée utilisée par OPcache, en megabytes.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.interned-strings-buffer">
    <term>
     <parameter>opcache.interned_strings_buffer</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      La quantité de mémoire utilisée pour stocher des chaînes internes, en megabytes. Cette directive de configuration est ignorée dans PHP &lt; 5.3.0.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.max-accelerated-files">
    <term>
     <parameter>opcache.max_accelerated_files</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      Le nombre maximal de clés (et donc, de scripts) dans la table de hashage d'OPcache.
      La valeur actuellement utilisée sera le premier nombre du jeux des
      nombres premiers
      <literal>{ 223, 463, 983, 1979, 3907, 7963, 16229, 32531, 65407, 130987 }</literal>
      qui est plus grand que la valeur configurée. Seuls les nombres compris entre
      200 et 100000 sont autorisés.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.max-wasted-percentage">
    <term>
     <parameter>opcache.max_wasted_percentage</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      Le pourcentage maximum de mémoire gaspillée autorisée avant qu'un redémarrage
      ne soit programmé.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.use-cwd">
    <term>
     <parameter>opcache.use_cwd</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Si activé, OPcache ajoute le dossier de travail courant à la clé du script,
      éliminant ainsi les collisions possibles entre les fichiers dont le nom
      de base est identique. Le fait de désactiver cette fonctionalité améliore
      les performances, mais peut casser les applications existantes.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.validate-timestamps">
    <term>
     <parameter>opcache.validate_timestamps</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Si activé, OPcache va vérifier les mises à jour des scripts toutes les
      <link linkend="ini.opcache.revalidate-freq">opcache.revalidate_freq</link>
      secondes. Lorsque cette directive est désactivée, vous devez réinitialiser
      OPcache manuellement via la fonction <function>opcache_reset</function>,
      la fonction <function>opcache_invalidate</function> ou en redémarrant le serveur
      Web pour que les modifications du système de fichiers ne prennent effet.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.revalidate-freq">
    <term>
     <parameter>opcache.revalidate_freq</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      La fréquence de vérification du timestamps du script afin de détecter
      les possibles mises à jour, en secondes. La valeur <literal>0</literal>
      fera qu'OPcache vérifira les mises à jour à chaque requête.
     </para>
     <para>
      Cette directive de configuration est ignorée si
      <link linkend="ini.opcache.validate-timestamps">opcache.validate_timestamps</link>
      est désactivé.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.revalidate-path">
    <term>
     <parameter>opcache.revalidate_path</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Si désactivé, les fichiers en cache existant utilisant le même
      <link linkend="ini.include-path">include_path</link> seront réutilisés.
      Aussi, si un fichier avec le même nom est quelque part ailleurs dans le
      include_path, il ne sera pas trouvé.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.save-comments">
    <term>
     <parameter>opcache.save_comments</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Si désactivé, tous les commentaires de documentation seront supprimés
      du cache opcode afin de réduire la taille du code optimisé.
      La désactivation de cette directive peut casser des applications
      et des frameworks qui s'appuient sur l'analyse des commentaires
      pour les annotations, comme Doctrine, Zend Framework 2 et PHPUnit.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.load-comments">
    <term>
     <parameter>opcache.load_comments</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Si désactivé, les commentaires de documentation ne seront pas chargés
      depuis le cache opcode, y compris s'ils existent. Cette directive peut
      être utilisée avec
      <link linkend="ini.opcache.save-comments">opcache.save_comments</link>
      pour ne charger les commentaires que pour les applications qui les demandent.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.fast-shutdown">
    <term>
     <parameter>opcache.fast_shutdown</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Si activé, une séquence d'arrêt rapide sera utilisé, qui ne libère pas
      chaque bloc alloué, mais s'appuie sur le gestionnaire de mémoire
      Zend Engine pour désallouer le jeux entier des variables de requêtes, en masse.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.enable-file-override">
    <term>
     <parameter>opcache.enable_file_override</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Lorsqu'activé, le cache opcode sera vérifié pour savoir si un fichier
      a déjà été mise en cache lorsque les fonctions <function>file_exists</function>,
      <function>is_file</function> et <function>is_readable</function> sont appelées.
      Ceci peut accroître les performances des applications qui vérifient l'existence
      et la lisibilité des scripts PHP, mais risque de retourner des données
      périmées si
      <link linkend="ini.opcache.validate-timestamps">opcache.validate_timestamps</link>
      est désactivé.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.optimization-level">
    <term>
     <parameter>opcache.optimization_level</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      Un masque de bits qui contrôle l'optimisation passée à exécuter.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.inherited-hack">
    <term>
     <parameter>opcache.inherited_hack</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      En PHP &lt; 5.3, OPcache stocke les endroits où
      les opcodes <link linkend="internals2.opcodes.declare-class">DECLARE_CLASS</link>
      utilisent l'héritage ; lorsqu'un fichier est chargé, OPcache tente
      de lier les classes héritées en utilisant l'environnement courant. Le problème
      est que, malgré le fait que l'opcode DECLARE_CLASS peut ne pas être
      nécessaire pour le script courant, si le script requiert que l'opcode doit
      être défini, il peut ne pas s'exécuter.
     </para>
     <para>
      Cette directive de configuration est ignorée en PHP 5.3 et suivant.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.dups-fix">
    <term>
     <parameter>opcache.dups_fix</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Ce hack ne doit être activé que comme solution de contournement des erreurs
      "Cannot redeclare class".
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.blacklist-filename">
    <term>
     <parameter>opcache.blacklist_filename</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      L'endroit de stockage du fichier gérant la liste noire OPcache.
      Un fichier de liste noire est un fichier texte contenant des noms
      de fichiers qui ne doivent pas être accélérés ; un par ligne.
      Les jokers sont autorisés, et les préfixes peuvent également
      être fournis. Les lignes commençant par un point-virgule
      sont vues comme des commentaires et seront donc ignorées.
     </para>
     <para>
      Un fichier de liste noire simple ressemble à ceci :
     </para>
     <informalexample>
      <programlisting>
<![CDATA[
; Correspond à un fichier spécifique.
/var/www/broken.php
; Un préfixe qui correspond à tous les fichiers qui commencent par x.
/var/www/x
; Une correspondance avec un joker.
/var/www/*-broken.php
]]>
      </programlisting>
     </informalexample>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.max-file-size">
    <term>
     <parameter>opcache.max_file_size</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      La taille maximale du fichier pouvant être mis en cache, en octets.
      Si vaut <literal>0</literal>, tous les fichiers pourront être mise en cache.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.consistency-checks">
    <term>
     <parameter>opcache.consistency_checks</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      Si vaut différent de zéro, OPcache va vérifier la somme de contrôle
      du cache toutes les N requêtes, où N est la valeur de cette directive
      de configuration. Ceci ne doit être activé que lors du débogage, sachant
      qu'il impacte fortement les performances.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.force-restart-timeout">
    <term>
     <parameter>opcache.force_restart_timeout</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      La durée à attendre pour le début d'un redémarrage programmé, si le
      cache n'est pas activé, en seconde. Si ce délait d'attente est atteint,
      alors OPcache imagine que quelque chose se passe mal, et va tuer les
      processus gérant les verrous sur le cache pour permettre un
      redémarrage.
     </para>
     <para>
      Si
      <link linkend="ini.opcache.log-verbosity-level">opcache.log_verbosity_level</link>
      vaut 3 ou plus, une erreur sera enregistrée dans le log des erreurs lorsque
      ce comportement survient.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.error-log">
    <term>
     <parameter>opcache.error_log</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Le log d'erreurs pour les erreurs OPcache. Une chaîne vide sera vu comme
      <literal>stderr</literal>, et les erreurs seront envoyées vers la sortie
      d'erreurs standart (qui sera le log des erreurs du serveur Web dans la
      plupart des cas).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.log-verbosity-level">
    <term>
     <parameter>opcache.log_verbosity_level</parameter>
     <type>integer</type>
    </term>
    <listitem>
     <para>
      Le niveau de verbosité des logs. Par défaut, seules les erreurs fatales
      niveau 0) et les erreurs (niveau 1) seront enregistrées. Les autres
      niveaux disponibles sont les alertes (niveau 2), les messages
      d'information (niveau 3), et les messages de débogage (niveau 4).
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.preferred-memory-model">
    <term>
     <parameter>opcache.preferred_memory_model</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Le modèle de mémoire préféré pour OPcache, à utiliser. Si laissé vide,
      OPcache va choisir le modèle le plus approprié, ce qui est la meilleure
      façon de faire dans la plupart des cas.
     </para>
     <para>
      Les valeurs possibles sont <literal>mmap</literal>, <literal>shm</literal>,
      <literal>posix</literal> et <literal>win32</literal>.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.protect-memory">
    <term>
     <parameter>opcache.protect_memory</parameter>
     <type>boolean</type>
    </term>
    <listitem>
     <para>
      Protège la mémoire partagée des écritures non-approuvées pendant l'exécution
      des scripts. Ceci est utile uniquement pour du débogage interne.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.mmap-base">
    <term>
     <parameter>opcache.mmap_base</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      La base utilisée pour les segments de mémoire partagée sous Windows.
      Tous les processus PHP doivent lier la mémoire partagée dans le même espace
      d'adresse. L'utilisation de cette directive permet de corriger les erreurs
      "Unable to reattach to base address".
     </para>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="ini.opcache.restrict-api">
    <term>
     <parameter>opcache.restrict_api</parameter>
     <type>string</type>
    </term>
    <listitem>
     <para>
      Autorise l'appel aux fonctions de l'API d'OPcache uniquement depuis
      des scripts PHP dont le chemin commence par une chaîne spécifique.
      La valeur par défaut, "", signifie "aucune restriction".
     </para>
    </listitem>
   </varlistentry>
  </variablelist>
 </para>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
