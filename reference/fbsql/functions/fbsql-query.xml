<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.13 $ -->
<!-- EN-Revision: 1.5 Maintainer: yannick Status: ready -->
<!-- Reviewed: no -->
 <refentry id="function.fbsql-query">
  <refnamediv>
   <refname>fbsql_query</refname>
   <refpurpose>Exécute une requête sur un serveur FrontBase</refpurpose>
  </refnamediv>
  <refsect1>
   &reftitle.description;
    <methodsynopsis>
      <type>resource</type><methodname>fbsql_query</methodname>
      <methodparam><type>string</type><parameter>query</parameter></methodparam>
      <methodparam choice="opt"><type>resource</type><parameter>link_identifier</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>batch_size</parameter></methodparam>
     </methodsynopsis>
   <para>
    <function>fbsql_query</function> envoie la requête
    <parameter>query</parameter> à la base de données courante,
    sur le serveur représenté par sa connexion <parameter>link_identifier</parameter>.
    Si <parameter>link_identifier</parameter> est omis, la dernière
    connexion ouverte est utilisée. Si aucune connexion n'a été ouverte,
    <function>fbsql_query</function> essaie d'établir une connexion en
    appelant la fonction <function>fbsql_connect</function> sans
    aucun argument.
   </para>
   <note>
    <para>
     La requête doit être terminée par un point-virgule !
    </para>
   </note>
   <para>
    <function>fbsql_query</function> retourne une ressource
    en cas de succès, ou &false;, en cas
    d'échec. Si &true; est retourné, cela signifie que la requête est correct et qu'elle
    peut être exécutée par le serveur. Cela n'indique rien sur le nombre de lignes
    concernées ou retournées. Il est tout à fait possible qu'une requête réussisse mais
    qu'aucune ligne ne soit affectée ni retournée.
   </para>
   <para>
    La requête suivante est invalide, et <function>fbsql_query</function>
    échouera puis retournera &false;:
    <example>
     <title>Exemple avec <function>fbsql_query</function>(1)</title>
     <programlisting role="php">
<![CDATA[
<?php
$result = fbsql_query("SELECT * WHERE 1=1;")
    or die("Requête invalide");
?>
]]>
     </programlisting>
    </example>
   </para>
   <para>
    La requête suivante est invalide si <literal>my_col</literal> n'est pas
    une colonne dans la table <literal>my_tbl</literal> : <function>fbsql_query</function>
    échouera puis retournera &false; :
    <example>
     <title>Exemple avec <function>fbsql_query</function>(2)</title>
     <programlisting role="php">
<![CDATA[
<?php
$result = fbsql_query("SELECT my_col FROM my_tbl")
    or die ("Requête invalide");
?>
]]>
     </programlisting>
    </example>
   </para>
   <para>
    <function>fbsql_query</function> échouera si vous n'avez pas
    les droits d'accès sur l'une des bases de données utilisées dans
    la requête.
   </para>
   <para>
    Lorsque la requête réussit, vous pouvez utilisez
    <function>fbsql_num_rows</function> pour savoir combien de
    lignes ont été retournées par une requête SELECT, ou 
    <function>fbsql_affected_rows</function> pour les autres
    requêtes (DELETE, INSERT, REPLACE et UPDATE).
   </para>
   <para>
    Pour les requêtes SELECT, <function>fbsql_query</function> retourne
    une ressource de résultat, que vous pouvez passer à <function>fbsql_result</function>.
    Lorsque vous avez fini de lire le résultat, vous pouvez libérer les
    ressources utilisées en appelant
    <function>fbsql_free_result</function>. Cependant, la mémoire sera automatiquement
    libérée à la fin du script.
   </para>
   <para>
    Voir aussi
    <function>fbsql_affected_rows</function>,
    <function>fbsql_db_query</function>,
    <function>fbsql_free_result</function>,
    <function>fbsql_result</function>,
    <function>fbsql_select_db</function> et
    <function>fbsql_connect</function>.
   </para>
  </refsect1>
 </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
