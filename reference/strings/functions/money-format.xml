<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.4 $ -->
  <refentry id="function.money-format">
   <refnamediv>
    <refname>money_format</refname>
    <refpurpose>Met un nombre au format mon&eacute;taire</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>string</type><methodname>money_format</methodname>
      <methodparam><type>string</type><parameter>format</parameter></methodparam>
      <methodparam><type>float</type><parameter>number</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>money_format</function> retourne le nombre <parameter>number</parameter>
     avec le format financier. Cette fonction fait l'interface avec
     la fonction strmon() de la librairie C, &agrave; la diff&eacute;rence pr&egrave;s que
     cette impl&eacute;mentation ne convertit qu'un nombre &agrave; la fois.
    </para>
    <para>
     Le param&egrave;tre de format est constitu&eacute; de la s&eacute;quence suivante : 
     <itemizedlist>
      <listitem><para>un caract&egrave;re <literal>%</literal></para></listitem>
      <listitem><para>une configuration optionnelle</para></listitem>
      <listitem><para>une taille de champ optionnelle</para></listitem>
      <listitem><para>une pr&eacute;cision &agrave; gauche optionnelle</para></listitem>
      <listitem><para>une pr&eacute;cision &agrave; droite optionnelle</para></listitem>
      <listitem><para>un caract&egrave;re de conversion obligatoire</para></listitem>
     </itemizedlist>
    </para>
    <formalpara>
     <title>Configuration</title>
     <para>
     Une ou plusieurs des configurations suivantes sont utilisables : 
      <variablelist>
       <varlistentry>
        <term><literal>=</literal><replaceable>f</replaceable></term>
        <listitem>
         <para>
          Le caract&egrave;re <literal>=</literal> suivi par un octet unique
          <replaceable>f</replaceable> qui sera utilis&eacute; comme caract&egrave;re
          de remplissage. Le caract&egrave;re de remplissage par d&eacute;faut est
          espace.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><literal>^</literal></term>
        <listitem>
         <para>
          D&eacute;sactive le groupage de caract&egrave;res (tel que d&eacute;finit dans la
          configuration locale).
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><literal>+</literal> ou <literal>(</literal></term>
        <listitem>
         <para>
          Specifie le style de formatage pour lesnombres positifs et
          n&eacute;gatifs. Si <literal>+</literal> est utilis&eacute;, les &eacute;quivalents
          dans la configuration locale de <literal>+</literal> et 
          <literal>-</literal> seront utilis&eacute;s. Si 
          <literal>(</literal> est utilis&eacute;, les sommes n&eacute;gatives seront
          plac&eacute;es entre parenth&egrave;ses. Si aucune sp&eacute;cification n'est fournie,
          la valeur par d&eacute;faut est <literal>+</literal>.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><literal>!</literal></term>
        <listitem>
         <para>
          Supprime le simple mon&eacute;taire dans la cha&icirc;ne finale.
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><literal>-</literal></term>
        <listitem>
         <para>
          Si fourni, cette configuration fait que les champs seront justifi&eacute;s
          &agrave; gauche (compl&eacute;t&eacute;s &agrave; droite), au contraire de la configuration par
          d&eacute;faut qui est justifi&eacute;e &agrave; droite, et compl&eacute;t&eacute;e &agrave; gauche.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </para>
    </formalpara>
    <formalpara>
     <title>Taille de champs</title>
     <para>
      <variablelist>
       <varlistentry>
        <term><replaceable>w</replaceable></term>
        <listitem>
         <para>
          Un nombre d&eacute;cimal qui sp&eacute;cifie la taille minimale du champ.
          Le champ sera compl&eacute;t&eacute; &agrave; gauche, &agrave; moins que la configuration
          <literal>-</literal> ne soit utilis&eacute;e. Par d&eacute;faut, cette
          valeur est de 0.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </para>
    </formalpara>
    <formalpara>
     <title>Pr&eacute;cision &agrave; gauche</title>
     <para>
      <variablelist>
       <varlistentry>
        <term><literal>#</literal><replaceable>n</replaceable></term>
        <listitem>
         <para>
          Le nombre maximal de chiffres (<replaceable>n</replaceable>) attendus
          &agrave; gauche du s&eacute;parateur d&eacute;cimal (e.g. la virgule). Cette option est
          g&eacute;n&eacute;ralement utilis&eacute;e pour conserver l'alignement de colonnes de
          nombres, en utilisant un caract&egrave;re pour compl&eacute;ter le nombre si ce
          dernier a moins de <replaceable>n</replaceable> chiffres. Si le nombre
          r&eacute;el de chiffres est plus grand que <replaceable>n</replaceable>, 
          cette specification est ignor&eacute;e.
         </para>
         <para>
          Si le groupage n'a pas &eacute;t&eacute; supprim&eacute; via la configuration 
          <literal>^</literal>, les s&eacute;parateurs de groupage seront ins&eacute;r&eacute;s
          avant le caract&egrave;re de remplissage (le cas &eacute;ch&eacute;ant). Les s&eacute;parateurs
          ne seront pas appliqu&eacute;s aux caract&egrave;res de remplissage, m&ecirc;me si
          ce caract&egrave;re est un nombre.
         </para>
         <para>
          Pour s'assurer de l'alignement, tous les caract&egrave;res apparaissant
          avant et apr&egrave;s le nombre format&eacute;, tels que les symboles mon&eacute;taires
          ou les signes n&eacute;gatif et positif, seront plac&eacute;s au m&ecirc;me endroit gr&acirc;ce
          &agrave; des espaces suppl&eacute;mentaires, afin que toutes les tailles des nombres
          soient les m&ecirc;mes.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </para>
    </formalpara>
    <formalpara>
     <title>Pr&eacute;cision &agrave; droite</title>
     <para>
      <variablelist>
       <varlistentry>
        <term><literal>.</literal><replaceable>p</replaceable></term>
        <listitem>
         <para>
          Un point suivi par un nombre de d&eacute;cimales (<replaceable>p</replaceable>).
          Si la valeur de <replaceable>p</replaceable> est 0 (z&eacute;ro), le 
          s&eacute;parateur d&eacute;cimal et les d&eacute;cimales seront supprim&eacute;es. Si aucune
          pr&eacute;cision &agrave; droite n'est pr&eacute;cis&eacute;e, la valeur par d&eacute;faut sera
          lue dans la configuration locale. Le nombre format&eacute; sera alors
          arrondi pour satisfaire les contraintes d'affichage.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </para>
    </formalpara>
    <formalpara>
     <title>Caract&egrave;res de conversion</title>
     <para>
      <variablelist>
       <varlistentry>
        <term><literal>i</literal></term>
        <listitem>
         <para>
          Le nombre est format&eacute; suivant le format mon&eacute;taire international
          de la configuration locale (e.g. pour la France : 1 234,56 F).
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><literal>n</literal></term>
        <listitem>
         <para>
          Le nomre est format&eacute; en fonction du format mon&eacute;taire national
          (e.g. pour la configuation de_DE : DM1.234,56).
         </para>
        </listitem>
       </varlistentry>
       <varlistentry>
        <term><literal>%</literal></term>
        <listitem>
         <para>
          Retourne le caract&egrave;re <literal>%</literal>.
         </para>
        </listitem>
       </varlistentry>
      </variablelist>
     </para>
    </formalpara>
    <note>
     <para>
      La cat&eacute;gorie <constant>LC_MONETARY</constant> de la configuration locale
      affecte le comportement de cette fonction. Utilisez 
      <function>setlocale</function> pour configurer correctement &php; avant
      d'utiliser cette fonction.
     </para>
     <para>
      Les caract&egrave;res plac&eacute;s avant et apr&egrave;s la cha&icirc;ne de formattage seront laiss&eacute;s
      intacts.
     </para>
    </note>
    <para>
    <example>
     <title>Exemple avec <function>money_format</function></title>
     <para>
      Voici plusieurs exemples d'utilisation de la fonction <function>money_format</function>
      avec diff&eacute;rentes cha&icirc;nes de formatage, et configurations locales.
     </para>
      <programlisting role="php">
<![CDATA[
<?php

    $number = 1234.56;

    // Affichons ce nombre au format international pour en_US
    setlocale(LC_MONETARY, 'en_US');
    echo money_format('%i', $number)."\n";
    // USD 1,234.56

    // Et au format italien national avec 2 decimales
    setlocale(LC_MONETARY, 'it_IT');
    echo money_format('%.2n', $number)."\n";
    // L. 1.234,56

    // Utilisation d'un nombre n&eacute;gatif
    $number = -1234.5672;

    // Format US national, avec les parenth&egrave;eses pour les nombres n&eacute;gatifs
    // et 10 chiffres de pr&eacute;cision &agrave; gauche
    setlocale(LC_MONETARY, 'en_US');
    echo money_format('%(#10n', $number)."\n";
    // ($        1,234.57)

    // Format similaire au pr&eacute;c&eacute;dent, en ajoutant 2 d&eacute;cimales
    // pour la pr&eacute;cision &agrave; droite, et en utilisant le caract&egrave;re de remplissage '*'
    echo money_format('%=*(#10.2n', $number)."\n";
    // ($********1,234.57)
    
    // Utilisons maintenant la justification &agrave; gauche, avec un champ de 14 caract&egrave;res
    // de longs, sans groupage de chiffres, et en utilisant le format international
    // pour de_DE
    setlocale(LC_MONETARY, 'de_DE');
    echo money_format('%=*^-14#8.2i', 1234.56)."\n";
    // DEM 1234,56****

    // Ajoutons encore &agrave; l'exemple pr&eacute;c&eacute;dent 
    setlocale(LC_MONETARY, 'en_GB');
    $fmt = 'La valeur finale est %i (apr&egrave;s 10% de remise)';
    echo money_format($fmt, 1234.56)."\n";
    // La valeur finale est GBP 1,234.56 (apr&egrave;s 10% de remise)

?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
		 Voir aussi
		 <function>setlocale</function>,
		 <function>number_format</function>,
		 <function>sprintf</function>,
		 <function>printf</function> et 
		 <function>sscanf</function>.
		</para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
