<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 298399 Maintainer: pierrick Status: ready -->
<!-- Reviewed: no -->

<chapter xml:id="wincache.setup" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.setup;
 
 <section xml:id="wincache.requirements">
  &reftitle.required;
  <para>
   L'extension est actuellement uniquement supportée sur les configurations suivantes :
  </para>
  <simpara>Windows OS:</simpara>
  <itemizedlist spacing="compact">
   <listitem>
    <simpara>Windows XP SP3 avec IIS 5.1 et l'<link xlink:href="&url.iis.fastcgi.downloads;">Extension FastCGI</link></simpara>
   </listitem>
   <listitem>
    <simpara>Windows Server 2003 avec IIS 6.0 et l'<link xlink:href="&url.iis.fastcgi.downloads;">Extension FastCGI</link></simpara>
   </listitem>
   <listitem>
    <simpara>Windows Vista SP1 avec IIS 7.0 et le module FastCGI</simpara>
   </listitem>
   <listitem>
    <simpara>Windows Server 2008 avec IIS 7.0 et le module FastCGI</simpara>
   </listitem>
   <listitem>
    <simpara>Windows 7 avec IIS 7.5 et le module FastCGI</simpara>
   </listitem>
   <listitem>
    <simpara>Windows Server 2008 R2 avec IIS 7.5 et le module FastCGI</simpara>
   </listitem>
  </itemizedlist>
  <simpara>PHP:</simpara>
  <itemizedlist spacing="compact">
   <listitem>
    <simpara>PHP 5.2.X, Non-thread-safe build</simpara>
   </listitem>
   <listitem>
    <simpara>PHP 5.3 X86, Non-thread-safe VC9 build</simpara>
   </listitem>
  </itemizedlist>
  <note>
   <simpara>
    L'extension WinCache peut uniquement être utilisée lorsque IIS est configuré pour exécuter PHP via FastCGI.
   </simpara>
  </note>
 </section>
 <section xml:id="wincache.installation">
  &reftitle.install;
  <para>
   &pecl.moved;
  </para>
  <para>
   &pecl.info;
   <link xlink:href="&url.pecl.package;wincache">&url.pecl.package;wincache</link>.
  </para>
  <para>
   Il y a deux packages pour cette extension: un package est pour les versions PHP 5.2.X, 
   et l'autre package est pour PHP 5.3.X. Choisissez le package approprié à la version PHP 
   utilisée.
  </para>
  <para>
   Pour installer et activer l'extension, suivez ces étapes :
  </para>
  <procedure>
   <step>
    <simpara>
     Décompressez le package dans un endroit temporaire.
    </simpara>
   </step>
   <step>
    <simpara>
     Copiez le fichier <filename>php_wincache.dll</filename> dans le dossier d'extensions PHP. 
     En général, ce dossier se nomme "ext" et est situé dans le même dossier avec tout les
     fichiers binaires PHP. Par exemple : <filename>C:\Program Files\PHP\ext</filename>.
     
    </simpara>
   </step>
   <step>
    <simpara>
     Avec un éditeur de texte, ouvrez le fichier php.ini, qui se trouve généralement dans le même
     dossier que tout les fichiers binaires PHP. Par exemple :  
     <filename>C:\Program Files\PHP\php.ini</filename>.
    </simpara>
   </step>
   <step>
    <simpara>
     Ajoutez la ligne suivante à la fin du fichier php.ini : 
     <literal>extension = php_wincache.dll</literal>.
    </simpara>
   </step>
   <step>
    <simpara>
     Enregistrez et fermez le fichier <filename>php.ini</filename>.
    </simpara>
   </step>
   <step>
    <simpara>
     Redémarrez le pool d'application IIS pour que PHP récupère les changements de 
     configuration. Pour vérifier que l'extension a été activée, créez un fichier nommé
     <filename>phpinfo.php</filename> contenant un appel à la fonction 
     <link linkend="function.phpinfo">phpinfo</link>. 
    </simpara>
   </step>
   <step>
    <simpara>
     Sauvez le fichier <filename>phpinfo.php</filename> dans le répertoire racine d'un 
     site Web IIS qui utilise PHP, puis ouvrez un navigateur et faites une requête sur 
     http://localhost/phpinfo.php. Cherchez une section appelée <literal>wincache</literal>
     dans la page retournée. Si l'extension est activée, alors la sortie de 
     <link linkend="function.phpinfo">phpinfo</link> listera les paramètres de configuration
     fournis par WinCache.
    </simpara>
   </step>
  </procedure>
  <note>
   <simpara>
    Ne pas oublier de supprimer le fichier <filename>phpinfo.php</filename> du répertoire 
    racine après avoir vérifié que l'extension a été activée.
   </simpara>
  </note>
 </section>
 &reference.wincache.ini;
 
 <section xml:id="wincache.stats">
  <title>Script de statistiques WinCache</title>
  <para>
   Le package d'installation pour WinCache inclut un script PHP,
   <filename>wincache.php</filename>, qui peut être utilisé pour obtenir des informations et des 
   statistiques sur le cache.
  </para>
  <para>
   Si l'extension WinCache a été installée via l'installeur de Microsoft Web Platform, 
   alors ce script se trouve dans 
   <filename>%SystemDrive%\Program Files\IIS\Windows Cache for PHP\</filename>. 
   Sur une version 64 bits du système d'exploitation Windows Server, le script se trouve dans
   <filename>%SystemDrive%\Program Files (x86)\IIS\Windows Cache for PHP</filename>. 
   Si l'extension a été installée manuellement, alors le fichier <filename>wincache.php</filename> 
   sera situé dans le même dossier à partir duquel le contenu du package d'installation a été extrait. 
  </para>
  <para>
   Pour utiliser <filename>wincache.php</filename>, copiez-le dans le dossier racine d'un site Web ou 
   dans n'importe quel sous-dossier. Pour protéger le script, ouvrez-le dans n'importe quel éditeur et 
   remplacez les valeurs des constantes <emphasis>USERNAME</emphasis> et <emphasis>PASSWORD</emphasis>.
   Si n'importe quel autre authentification IIS est activée sur le serveur, alors suivez les instructions
   dans les commentaires :
   <example>
    <title>Configuration de l'authentification pour <filename>wincache.php</filename></title>
    <programlisting role="php">
<![CDATA[
/**
 * ======================== CONFIGURATION SETTINGS ==============================
 * If you do not want to use authentication for this page, set USE_AUTHENTICATION to 0.
 * If you use authentication then replace the default password.
 */
define('USE_AUTHENTICATION', 1);
define('USERNAME', 'wincache');
define('PASSWORD', 'wincache');

/**
 * The Basic PHP authentication will work only when IIS is configured to support 
 * Anonymous Authentication' and nothing else. If IIS is configured to support/use
 * any other kind of authentication like Basic/Negotiate/Digest etc, this will not work.
 * In that case use the array below to define the names of users in your 
 * domain/network/workgroup which you want to grant access to.
 */
$user_allowed = array('DOMAIN\user1', 'DOMAIN\user2', 'DOMAIN\user3');

/**
 * If the array contains string 'all', then all the users authenticated by IIS
 * will have access to the page. Uncomment the below line and comment above line
 * to grant access to all users who gets authenticated by IIS.
 */
/* $user_allowed = array('all'); */

/** ===================== END OF CONFIGURATION SETTINGS ========================== */
]]>
    </programlisting>
   </example>
   <note>
    <simpara>
     Protégez toujours le script <filename>wincache.php</filename> en utilisant soit 
     le mécanisme d'authentification intégré ou le mécanisme d'authentification du serveur. 
     Laissez ce script non protégé peut compromettre la sécurité de votre application web 
     et du serveur.
    </simpara>
   </note>
  </para>
 </section>
 <section xml:id="wincache.sessionhandler">
  <title>WinCache Session Handler</title>
  <para>
   Le gestionnaire de session WinCache (disponible depuis WinCache 1.1.0) peut être utilisé 
   pour configurer PHP pour stocker les données de session dans la mémoire partagée du cache de session. 
   L'utilisation de la mémoire partagée au lieu de la session par défaut aide à améliorer les performances 
   des applications PHP qui stockent de grandes quantités de données dans des objets de session.
   Le cache de session Wincache utilise des fichiers basés sur la mémoire partagée, ce qui
   assure que les données de session ne seront pas perdues lors du recyclage de la file
   d'attente des applications IIS.
  </para>
  <para>
   Pour configurer PHP pour utiliser le gestionnaire de session WinCache mettez le paramètre
   <link linkend="ini.session.save-handler">session.save_handler</link> du fichier 
   <filename>php.ini</filename> à <emphasis>wincache</emphasis>.
   Par défaut, l'endroit où sont stockés les fichiers temporaires sous Windows est utilisé
   pour stocker les données de session. Pour changer cet endroit, utilisez la directive
   <link linkend="ini.session.save-path">session.save_path</link>.
   <example>
    <title>Activer le gestionnaire de session WinCache</title>
    <programlisting role="php">
<![CDATA[
session.save_handler = wincache
session.save_path = C:\inetpub\temp\session\
]]>
    </programlisting>
   </example>
  </para>
 </section>
 <section xml:id="wincache.resources">
  &reftitle.resources;
  &no.resource;
 </section>
</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

