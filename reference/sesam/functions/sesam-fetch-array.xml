<?xml version="1.0" encoding="iso-8859-1"?>
<!-- splitted from ./fr/functions/sesam.xml, last change in rev 1.1 -->
<!-- last change to 'sesam-fetch-array' in en/ tree in rev 1.1 -->
  <refentry id="function.sesam-fetch-array">
   <refnamediv>
    <refname>sesam_fetch_array</refname>
    <refpurpose>Lit une ligne dans un tableau associatif</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>array</type><methodname>sesam_fetch_array</methodname>
      <methodparam><type>string</type><parameter>result_id</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>whence</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>offset</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>sesam_fetch_array</function> retourne un tableau qui
     correspond à la ligne lue dans le résultat <parameter>result_id</parameter>,
     ou &false; si il n'y a pas d'autres lignes.
    </para>
    <para>
     <function>sesam_fetch_array</function> est une version alternative de
     <function>sesam_fetch_row</function>.  Au lieu de stocker les
     données dans un tableau à indice numérique, il enregistre les
     données dans un tableau associatif, en utilisant les noms
     des champs comme clés.
    </para>
    <para>
     <parameter>result_id</parameter> est un identifiant de résultat valide
     retourné par <function>sesam_query</function> (avec une requête de
     selection seulement!).
    </para>
    <para>
     Pour connaître les valeurs valides des options
     <parameter>whence</parameter> et
     <parameter>offset</parameter>,
     reportez vous à <function>sesam_fetch_row</function>.
    </para>
    <para>
     <function>sesam_fetch_array</function> lit une ligne de données dans
     le résultat <parameter>result_id</parameter>. La ligne est
     retournée sous forme d'un tableau associatif. Chaque colonne est
     enregistrée avec leur nom comme index. Les noms des colonnes
     sont convertis en minuscules.
    </para>
    <para>
     Les colonnes sans nom (par exemple, les résultats d'opérations
     arithmétiques) et les champs vides ne sont pas stockés dans
     ce tableau. De plus, si deux colonnes ont le même noms, la dernière
     colonne écrasera la précédente. Dans cette situation, utilisez
     de préférence <function>sesam_fetch_row</function> ou bien, faîtes un
     alias de la colonne.
     <example>
     <title>Alias de colonnes avec SESAM</title>
      <programlisting role="sesam">
<![CDATA[
SELECT TBL1.COL AS FOO, TBL2.COL AS BAR FROM TBL1, TBL2</programlisting>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Une gestion spéciale permet de lire les champs multiples, qui
     sinon, auraient toutes le même nom. Pour chaque colonne d'un
     champ multiple, le nom d'index est créé en ajoutant le
     numéro de sous-index à la suite du nom de la colonne. Ces sous
     indices sont numérotés à partir de 1.
    <example>
     <title>Lire les champs multiples de SESAM</title>
      <programlisting role="sesam">
<![CDATA[
CREATE TABLE ... ( ... MULTI(3) INT )
]]>
      </programlisting>
     </example>
     Les index associatifs utilisé pour les valeurs individuelles
     du champ multiple sont : <literal>"multi(1)"</literal>,
     <literal>"multi(2)"</literal>, et <literal>"multi(3)"</literal>,
     respectivement.
    </para>
    <para>
     Les prochains appels à <function>sesam_fetch_array</function> liront la
     prochaine ligne (ou la précédente, ou la n-ième, suivant les
     attributs de défilement), jusqu'à ce qu'il n'y ait plus de lignes.
    </para>
    <example>
     <title>Exemple avec <function>sesam_fetch_array</function></title>
     <programlisting role="php">
<![CDATA[
<?php
$result = sesam_query ("SELECT * FROM phone\n".
                       "  WHERE LASTNAME='".strtoupper($name)."'\n".
                       "  ORDER BY FIRSTNAME", 1);
if (! $result) {
    ... error ...
}
// Affiche la table
print "<TABLE BORDER>\n";
while (($row = sesam_fetch_array ($result)) && count($row) > 0) {
    print " <TR>\n";
    print "  <TD>".htmlspecialchars($row["firstname"])."</TD>\n";
    print "  <TD>".htmlspecialchars($row["lastname"])."</TD>\n";
    print "  <TD>".htmlspecialchars($row["phoneno"])."</TD>\n";
    print " </TR>\n";
}
print "</TABLE>\n";
sesam_free_result ($result);
?>
]]>
     </programlisting>
    </example>
    <para>
     Voir aussi
     <function>sesam_fetch_row</function> qui retourne
     un tableau numérique.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
