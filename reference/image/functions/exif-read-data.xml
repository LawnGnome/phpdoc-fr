<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.1 $ -->
<!-- splitted from ./en/functions/image.xml, last change in rev 1.78 -->
  <refentry id="function.exif-read-data">
   <refnamediv>
    <refname>exif_read_data</refname>
    <refpurpose>Lit les ent&ecirc;tes EXIF des images JPEG et TIFF</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <methodsynopsis>
     <type>array</type><methodname>exif_read_data</methodname>
     <methodparam><type>string</type><parameter>filename</parameter></methodparam>
     <methodparam choice="opt"><type>string</type><parameter>sections</parameter></methodparam>
     <methodparam choice="opt"><type>bool</type><parameter>arrays</parameter></methodparam>
     <methodparam choice="opt"><type>bool</type><parameter>thumbnail</parameter></methodparam>
    </methodsynopsis>
    <para>
     <function>exif_read_data</function> lit les ent&ecirc;tes EXIF des images JPEG et TIFF.
     Elle retuorne un tableau associatif avec comme index les noms des
     ent&ecirc;tes, et en valeur, les valeurs des ent&ecirc;tes. Si aucune donn&eacute;e n'a pu
     &ecirc;tre lue, elle retourne &false;.
    </para>
    <para>
     <parameter>filename</parameter> est le nom du fichier &agrave; lire. Il ne peut pas
     &ecirc;tre une URL.
    </para>
    <para>
     <parameter>sections</parameter> est une liste de valeur s&eacute;par&eacute;e par des virgules
     des sections qui devront &ecirc;tre pr&eacute;sent&eacute;es dans le tableau de r&eacute;sultat.
     <informaltable>
     <tgroup cols="2">
      <tbody>
       <row>
        <entry>FILE</entry>
        <entry>FileName (nom du ficher), FileSize(taille du fichier), 
        FileDateTime (date de modification du ficheir), SectionsFound (sections trouv&eacute;es)</entry>
       </row>
       <row>
        <entry>COMPUTED</entry>
        <entry>html (attributs HTML), Width (largeur), Height (Hauteur), IsColor (couleur ou noir et blanc)
        et quelques autres si ils sont disponibles.
        </entry>
       </row>
       <row>
        <entry>ANY_TAG</entry>
        <entry>Toutes les informations concernant cette balise, comme par exemple
        IFD0, EXIF, ...</entry>
       </row>
       <row>
        <entry>IFD0</entry>
        <entry>Toutes les balises IFD0. Dans les images normales, ils contiennent les
        dimensions de l'images, etc...</entry>
       </row>
       <row>
        <entry>THUMBNAIL</entry>
        <entry>Un fichier qui contient une minitaure, si il y a un second IFD.
        Toutes les informations mises en balises &agrave; propos de cette miniature
        seront stock&eacute;es dans cette section.</entry>
       </row>
       <row>
        <entry>COMMENT</entry>
        <entry>Ent&ecirc;te de commentaire des images JPEG.</entry>
       </row>
       <row>
        <entry>EXIF</entry>
        <entry>La section EXIF est une sous section de la section IFD0. Elle
        contient des informations plus d&eacute;taill&eacute;es sur les images. La plus part
        de ces index sont reli&eacute;s aux appareils num&eacute;riques.</entry>
       </row>
      </tbody>
     </tgroup>
     </informaltable>
    </para>
    <para>
     <parameter>arrays</parameter> sp&eacute;cifie si chaque section doit &ecirc;tre
     un tableau ou non. Les sections <emphasis>FILE</emphasis>,
     <emphasis>COMPUTED</emphasis> et <emphasis>THUMBNAIL</emphasis> seront
     toujours transform&eacute;es en tableau, car elle contiennent des noms qui
     risquent d'&ecirc;tre en conflit.
    </para>
    <para>
     <parameter>thumbnail</parameter> indique si il faut lire la miniature
     elle-m&ecirc;me, et pas seulement les donn&eacute;es en balises.
    </para>
    <note>
     <para>
      Les ent&ecirc;tes Exif sont souvent pr&eacute;sents dans les ent&ecirc;tes d'images JPEG/TIFF,
      g&eacute;n&eacute;r&eacute;es par les appareils num&eacute;riques, mais malheureusement, chaque
      fabriquant d'appareils ont tous une id&eacute;e diff&eacute;rente pour
      &eacute;tiquetter leurs images, et vous ne pourrez pas compter sur des
      ent&ecirc;tes communs.
     </para>
    </note>
    <para>
     <example>
      <title>Exemple avec <function>exif_read_data</function></title>
      <programlisting role="php">
<![CDATA[
<?php
echo "test1.jpg : <br />\n";
$exif = exif_read_data ('tests/test1.jpg','IFD0');
echo $exif===false ? "No header data found.<br />\n" : "Image contains headers<br />";
$exif = exif_read_data ('tests/test2.jpg',0,true);
echo "test2.jpg : <br />\n";
foreach($exif as $key=>$section) {
    foreach($section as $name=>$val) {
        echo "$key.$name: $val<br />\n";
    }
}?>
]]>
      </programlisting>
      <para>
      La premi&egrave;re commande &eacute;choue, car l'image n'a pas d'ent&ecirc;tes d'informations.
       <screen role="php">
<![CDATA[
test1.jpg:
No header data found.
test2.jpg:
FILE.FileName: test2.jpg
FILE.FileDateTime: 1017666176
FILE.FileSize: 1240
FILE.FileType: 2
FILE.SectionsFound: ANY_TAG, IFD0, THUMBNAIL, COMMENT
COMPUTED.html: width="1" height="1"
COMPUTED.Height: 1
COMPUTED.Width: 1
COMPUTED.IsColor: 1
COMPUTED.ByteOrderMotorola: 1
COMPUTED.UserComment: Exif test image.
COMPUTED.UserCommentEncoding: ASCII
COMPUTED.Copyright: Photo (c) M.Boerger, Edited by M.Boerger.
COMPUTED.Copyright.Photographer: Photo (c) M.Boerger
COMPUTED.Copyright.Editor: Edited by M.Boerger.
IFD0.Copyright: Photo (c) M.Boerger
IFD0.UserComment: ASCII
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.JPEGInterchangeFormatLength: 523
COMMENT.0: Comment #1.
COMMENT.1: Comment #2.
COMMENT.2: Comment #3end
]]>
THUMBNAIL.JPEGInterchangeFormat: 134
THUMBNAIL.Thumbnail.Height: 1
THUMBNAIL.Thumbnail.Height: 1
       </screen>
      </para>
     </example>
    </para>
    <note>
     <para>
      Si l'image contient des donn&eacute;es IFD0, alors la section COMPUTED contient
      l'entr&eacute;e ByteOrderMotorola qui vaut 0 pour little-endian (intel) et 1 pour
      big-endian (motorola). Ceci a &eacute;t&eacute; ajou&eacute; en PHP 4.3.
     </para>
     <para>
      Lorsqu'un ent&ecirc;te Exif contient une note de Copyright, cet ent&ecirc;te 
      peut alors contenir lui m&ecirc;me deux valeurs. Comme cette solution est
      incoh&eacute;rente avec les standards Exif 2.10, la section COMPUTED retournera
      les deux ent&ecirc;tes, <emphasis>Copyright.Photographer</emphasis>
      et <emphasis>Copyright.Editor</emphasis>, tandis que les sections IFD0 contiennent
      le tableau d'octets avec des caract&egrave;res NULL pour s&eacute;parer les deux entr&eacute;es.
      Ou bien, juste la premi&egrave;re ent&eacute;re si le type de donn&eacute;es &eacute;tait erron&eacute;
      (comportement par d&eacute;faut de Exif). La section COMPUTED va aussi contenir une
      entr&eacute;e <emphasis>Copyright</emphasis>, qui sera soit la cha&icirc;ne originale
      de copyright, soit une liste de valeur s&eacute;par&eacute;e par des virgules de
      photos et de copyright de l'auteur.
     </para>
    </note>
    <note>
     <para>
      La balise UserComment pr&eacute;sente le m&ecirc;me probl&egrave;me que la balise Copyright. Elle
      peut stocker deux valeurs : en premier, le jeu de caract&egrave;res utilis&eacute;, puis
      la valeur elle-m&ecirc;me. Si c'est le cas, la section IFD contiendra uniquement
      le jeu de caract&egrave;res, ou bien un tableau d'octets. La section COMPUTED 
      va stocker les deux entr&eacute;es <emphasis>UserCommentEncoding</emphasis> et 
      <emphasis>UserComment</emphasis>. L'index <emphasis>UserComment</emphasis> 
      est disponbile dans les deux cas, et il est pr&eacute;f&eacute;rable de l'utiliser, plut&ocirc;t 
      que la valeur de la section IFD0.
     </para>
     <para>
      Si les commentaires utilisateurs utilisent l'Unicode ou bien le JIS et que le module
      mbstring est accessible, ces jeux de caract&egrave;res seront automatiquement chang&eacute;s
      en fonction la configuration de EXIF dans le fichier &php.ini;. Cette
      possibilit&eacute; a &eacute;t&eacute; ajout&eacute;e en PHP 4.3.
     </para>
    </note>
    <note>
     <para>
     La hauteur (Height) et la largeur (Width) sont calcul&eacute;s de la m&ecirc;me fa&ccedil;on que
     la fonction <function>getimagesize</function> le fait, et leurs valeurs ne
     devraient jamais diff&eacute;rer. De m&ecirc;me, l'index html est la repr&eacute;sentation textuelle
     utilis&eacute;e dans une balise image HTML classique.
     </para>
    </note>
    <note>
     <para>
     Depuis PHP 4.3, cette fonction peut aussi lire les sections <acronym>IFD</acronym>
     incluent dans les tableaux, et retourn&eacute;e sous cette forme. De plus, la taille
     d'une miniature int&eacute;gr&eacute;e est retourn&eacute;e dans le sous tableau 
     <emphasis>THUMBNAIL</emphasis> et la fonction <function>exif_read_data</function> 
     peut retourner les miniatures au format <acronym>TIFF</acronym>. Enfin, il n'y a
     plus de longueur maximale pour les valeurs retourn&eacute;es (hormis la place en m&eacute;moire).
     </para>
    </note>
    <note>
      <simpara>
       Cette fonction est uniquement disponible en PHP 4, si il a &eacute;t&eacute; compil&eacute;
       avec l'option <option role="configure">--enable-exif</option>.
       Ses fonctionnalit&eacute;s et comportement ont chang&eacute;s en PHP 4.2. Les premi&egrave;res
       versions &eacute;taient tr&egrave;s instables.
      </simpara>
      <simpara>
       Depuis PHP 4.3, les commentaires utilisateurs peuvent &ecirc;tre automatiquement
       convertis d'un jeu de caract&egrave;res &agrave; l'autre avec l'extension
       <option role="configure">--enable-mbstring</option>.
      </simpara>
      <simpara>
       Cette fonction ne requiert pas la librairie GD.
      </simpara>
      <simpara>
       Voir aussi
       <function>exif_thumbnail</function> et
       <function>getimagesize</function>.
      </simpara>
    </note>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
