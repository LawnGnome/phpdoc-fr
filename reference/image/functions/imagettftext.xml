<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.18 $ -->
<!-- EN-Revision: 1.13 Maintainer: yannick Status: ready -->
<!-- Reviewed: yes -->
 <refentry id="function.imagettftext">
  <refnamediv>
   <refname>imagettftext</refname>
   <refpurpose>Dessine un texte avec une police TrueType</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>array</type><methodname>imagettftext</methodname>
     <methodparam><type>resource</type><parameter>image</parameter></methodparam>
     <methodparam><type>float</type><parameter>size</parameter></methodparam>
     <methodparam><type>float</type><parameter>angle</parameter></methodparam>
     <methodparam><type>int</type><parameter>x</parameter></methodparam>
     <methodparam><type>int</type><parameter>y</parameter></methodparam>
     <methodparam><type>int</type><parameter>color</parameter></methodparam>
     <methodparam><type>string</type><parameter>fontfile</parameter></methodparam>
     <methodparam><type>string</type><parameter>text</parameter></methodparam>
    </methodsynopsis>
   <para>
     <variablelist>
      <varlistentry>
       <term><parameter>image</parameter></term>
       <listitem>
        <simpara>
         La ressource de l'image. Voir la fonction <function>imagecreate</function>.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>size</parameter></term>
       <listitem>
        <simpara>
         La taille de la police. Dépendant de la version de votre librairie GD, elle
         doit être spécifiée en pixel (GD1) ou en point (GD2).
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>angle</parameter></term>
       <listitem>
        <simpara>
         L'angle en degrés ; 0 degrés correspond à la lecture du texte de gauche à droite.
         Les grandes valeurs représentent une rotation dans le sens contraire des aiguilles 
         d'une montre. Par exemple, une valeur de 90 correspondra à une lecture du texte
         de bas en haut.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>x</parameter></term>
       <listitem>
        <simpara>
         Les coordonnées données par <parameter>x</parameter> et
         <parameter>y</parameter> définiront la position du premier caractère
         (le coin bas-gauche du caractère). Celà est différent de la fonction 
         <function>imagestring</function>, où
         <parameter>x</parameter> et <parameter>y</parameter> définissent
         le coin haut-gauche du premier caractère. Par exemple, "haut gauche"
         correspond à 0, 0.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>y</parameter></term>
       <listitem>
        <simpara>
         L'ordonnée Y. Celà définie la position de la ligne de base de la police,
         et non pas le bas des caractères.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>color</parameter></term>
       <listitem>
        <simpara>
         L'index de la couleur. Utiliser un index de couleur négatif désactivera 
         l'antialiasing. Voir la fonction <function>imagecolorallocate</function>.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>fontfile</parameter></term>
       <listitem>
        <simpara>
         Le chemin vers la police TrueType que vous souhaitez utiliser.
        </simpara>
        <simpara>
         Dépendant de la version de la bibliothèque GD utilisée par &php;, lorsque
         <parameter>fontfile</parameter> ne commence pas par un caractère
         <literal>/</literal> alors <literal>.ttf</literal> sera ajouté au nom du fichier
         et la bibliothèque recherchera ce nom de fichier dans les dossiers de police
         définis par la bilibothèque.
        </simpara>
        <simpara>
         Lorsque vous utilisez une version de la bibliothèque GD inférieure à 2.0.18, 
         un caractère "espace", plutôt qu'un point-virgule, est utilisé pour définir
         des chemins alternatifs pour les fichiers de police.
         Si vous utilisez involontairement cette fonctionnalité, vous aurez ce message d'erreur :
         <literal>Warning: Could not find/open font</literal>.
        </simpara>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>text</parameter></term>
       <listitem>
        <simpara>
         La chaîne de texte.
        </simpara>
        <simpara>
         Peut inclure n'importe quelle séquence de caractères UTF-8 (sous la forme : &amp;#123;) 
         pour accéder aux caractères d'une police au delà du premier 255.
        </simpara>
        <simpara>
         Si un caractère est utilisé dans une chaîne qui n'est pas supportée par
         la police, un rectangle creux remplacera le caractère.
        </simpara>
       </listitem>
      </varlistentry>
     </variablelist>
    </para>
    <para>
     <function>imagettftext</function> retourne un tableau de 8 éléments représentant
     quatre points marquants les limites du texte.
     L'ordre des points est : inférieur gauche, inférieur droit,
     supérieur droit, supérieur gauche. Les points sont relatifs au texte
     par rapport à l'angle, donc, "supérieur gauche" signifie dans le coin
     en haut à gauche lorsque vous regardez le texte horizontallement.
    </para>
    <para>
     <example>
      <title>Exemple avec <function>imagettftext</function></title>
      <para>
       Cet exemple produira une image PNG blanche de 400x30 pixels, 
       avec la texte "Test..." en noir (avec une ombre grise), utilisant la police Arial.
      </para>
      <programlisting role="php">
<![CDATA[
<?php
// Définition du content-type
header("Content-type: image/png");

// Création de l'image
$im = imagecreate(400, 30);

// Création de quelques couleurs
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);

// Le texte à dessiner
$text = 'Test...';
// Remplacez le chemin par votre propre chemin de police
$font = 'arial.ttf';

// Ajout d'ombres au texte
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Ajout du texte
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Utiliser imagepng() donnera un texte plus claire, 
// comparé à l'utilisation de la fonction imagejpeg()
imagepng($im);
imagedestroy($im);
?>
]]>
      </programlisting>
     </example>
    </para>
    <para>
     Cette fonction requière la bibliothèque GD ainsi que la librairie
     <ulink url="&url.freetype;">FreeType</ulink>.
    </para>
    <para>
     Voir aussi
     <function>imagettfbbox</function>.
    </para>
   </refsect1>
  </refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
