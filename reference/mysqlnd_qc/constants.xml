<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 324278 Maintainer: yannick Status: ready -->
<!-- Reviewed: no -->

<appendix xml:id="mysqlnd-qc.constants" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.constants;
 &extension.constants;
 <para>
  <emphasis role="bold">Astuces SQL</emphasis>
 </para>
 <para>
  <example>
   <para>
    La mise en cache de requêtes est contrôlée par les astuces SQL. Les astuces SQL
    sont utilisées pour activer et désactiver la mise en cache des requêtes.
    Elles peuvent être utilisées pour définir le <literal>TTL</literal> (la durée
    de vie dans le cache) d'une requête.
   </para>
   <para>
    Les astuces SQL reconnues par la mise en cache de requêtes peuvent être
    manuellement modifiées au moment de la compilation. Ceci permet d'utiliser
    <literal>mysqlnd_qc</literal> dans les environnements pour lesquels les
    astuces SQL par défaut sont déjà utilisées et interprétées par d'autres
    systèmes. Toutefois, il est recommandé d'utiliser les constantes relatives
    aux astuces SQL au lieu d'ajouter manuellement les astuces SQL dans la chaîne
    de la requête.
   </para>
   <programlisting role="php">
<![CDATA[
<?php
/* Utilisation des constantes pour une portabilité maximale */
$query = "/*" . MYSQLND_QC_ENABLE_SWITCH . "*/SELECT id FROM test";

/* Valide mais moins portable : TTL par défaut */
$query = "/*qc=on*/SELECT id FROM test";

/* Valide mais moins portable : TTL par requête */
$query = "/*qc=on*//*qc_ttl=5*/SELECT id FROM test";

printf("MYSQLND_QC_ENABLE_SWITCH: %s\n", MYSQLND_QC_ENABLE_SWITCH);
printf("MYSQLND_QC_DISABLE_SWITCH: %s\n", MYSQLND_QC_DISABLE_SWITCH);
printf("MYSQLND_QC_TTL_SWITCH: %s\n", MYSQLND_QC_TTL_SWITCH);
?>
]]>
   </programlisting>
   &examples.outputs;
   <screen>
<![CDATA[
MYSQLND_QC_ENABLE_SWITCH: qc=on
MYSQLND_QC_DISABLE_SWITCH: qc=off
MYSQLND_QC_TTL_SWITCH: qc_ttl=

]]>
   </screen>
   
  </example>
 </para>
 
 <para>
  <variablelist>
   <varlistentry xml:id="constant.mysqlnd-qc-enable-switch">
    <term>
     <constant>MYSQLND_QC_ENABLE_SWITCH</constant>
     (<type>string</type>)
    </term>
    <listitem>
     <simpara>
      Astuce SQL utilisée pour activer la mise en cache d'une requête.
     </simpara>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="constant.mysqlnd-qc-disable-switch">
    <term>
     <constant>MYSQLND_QC_DISABLE_SWITCH</constant>
     (<type>string</type>)
    </term>
    <listitem>
     <simpara>
      Astuce SQL utilisée pour désactiver la mise en cache d'une
      requête si <literal>mysqlnd_qc.cache_by_default = 1</literal>.
     </simpara>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="constant.mysqlnd-qc-ttl-switch">
    <term>
     <constant>MYSQLND_QC_TTL_SWITCH</constant>
     (<type>string</type>)
    </term>
    <listitem>
     <simpara>
      Astuce SQL utilisée pour définir le TTL (la durée de
      vie dans le cache) d'un jeu de résultats.
     </simpara>
    </listitem>
   </varlistentry>
   <varlistentry xml:id="constant.mysqlnd-qc-server-id">
    <term>
     <constant>MYSQLND_QC_SERVER_ID_SWITCH</constant>
     (<type>string</type>)
    </term>
    <listitem>
     <simpara>
      Cette astuce SQL ne doit en généralement pas être utilisée.
     </simpara>
     <simpara>
      Elle est nécessaire à <link linkend="book.mysqlnd-ms">PECL/mysqlnd_ms</link>
      pour grouper les entrées du cache pour une seule requête et
      provient de différentes connexions physiques. Si l'astuce
      est utilisée, la configuration de la connexion comme l'utilisateur,
      le nom d'hôte et le jeu de caractères ne sera pas prise en
      considération pour générer la clé du cache de la requête.
      A la place de cela, la valeur fournie et la chaîne de requête
      seront utilisées comme entrée dans la fonction de hachage qui génère
      la clé.
     </simpara>
     <simpara>
      PECL/mysqlnd_ms peut, si demandé, mettre en cache les résultats
      depuis des serveurs esclaves de réplication MySQL. En raison du fait
      que le cache peut contenir plusieurs connexions à l'esclave, la clé
      du cache ne doit pas être formée en utilisant le nom de l'utilisateur,
      le nom d'hôte ou tout autre configuration qui peuvent varier
      entre les connexions aux esclaves. Au lieu de ça, PECL/mysqlnd_ms
      fournit un identifiant qui se réfère au groupe de connexions esclaves
      qui doivent être activées pour partager les entrées du cache, peu
      importe la connexion esclave physique utilisée pour générer l'entrée
      du cache.
     </simpara>
     <simpara>
      L'utilisation de cette fonctionalité en dehors de PECL/mysqlnd_ms
      n'est pas recommandée.
     </simpara>
    </listitem>
   </varlistentry>
  </variablelist>
 </para>
 
</appendix>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
