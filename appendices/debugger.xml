<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.25 $ -->
<!-- EN-Revision: 1.27 Maintainer: dams Status: ready -->
<appendix id="debugger">
 <title>Débogueur &php;</title>

 <sect1 id="debugger-about">
  <title>À propos du débogueur</title>
  <simpara>
   &php; 3 inclut le support d'un serveur de débogage.
  </simpara>
  <simpara>
   &php; 4 n'inclut aucun support de débogage.
   Vous pouvez toutefois utiliser un des débogueur externe.
   Le <ulink url="&url.zend.ide;">Studio Zend</ulink> inclut
   un débogueur et il y a aussi des débogueurs gratuits comme
   <ulink url="&url.dbg;">&url.dbg;</ulink>, le
   <ulink url="&url.apd;">Advanced &php; Debugger</ulink> (APD) ou
   <ulink url="&url.xdebug;">Xdebug</ulink> qui a toujours une interface
   de débogage compatible avec les fonctionnalités de débogage de &php; 3
   comme décrit dans cette section.
  </simpara>
 </sect1>

 <sect1 id="debugger-using">
  <title>Utiliser le débogueur &php;</title>

  <para>
   Le débogueur &php; sert à repérer les bogues
   récalcitrants. Le débogueur fonctionne en se
   connectant à un port <acronym>TCP</acronym> à chaque
   démarrage de &php;. Tous les messages d'erreur seront
   envoyés sur cette connexion. Cette page est faite pour un
   "serveur de débogage", qui peut fonctionner avec un
   <acronym>IDE</acronym> ou un éditeur programmable (tel que Emacs).
  </para>
  <para>
   Comment paramétrer le débogueur :
   <orderedlist>
    <listitem>
     <simpara>
      Réservez un port <acronym>TCP</acronym> pour le débogueur
      dans le fichier
      <link linkend="configuration.file">de configuration</link>
      (<link linkend="ini.debugger.port">debugger.port</link>) et activez-le
      (<link linkend="ini.debugger.enabled">debugger.enabled</link>).
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Configurer un client TCP sur ce port (par exemple
      <command>socket -l -s 1400</command> sous UNIX).
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Dans votre code, placez la ligne "debugger_on(<replaceable>host</replaceable>)",
      où <replaceable>host</replaceable> est l'IP ou le nom de l'hôte qui
      supporte le client <acronym>TCP</acronym>.
     </simpara>
    </listitem>
   </orderedlist>
   Désormais, toutes les alertes, notes, etc. seront envoyées
   sur la socket client, <emphasis>même si vous avez désactivé
   le rapport d'erreur avec <function>error_reporting</function></emphasis>.
  </para>
 </sect1>

 <sect1 id="debugger-protocol">
  <title>Protocole du débogueur</title>
  <para>
   Le protocole de débogage &php; 3 fonctionne ligne par ligne.
   Chaque ligne a un type <emphasis>type</emphasis> et
   plusieurs lignes composent un message
   Chaque message commence avec une ligne du type <literal>start</literal> et se
   termine avec une ligne de type <literal>end</literal>.  &php; peut envoyer des
   lignes de plusieurs messages simultanément.
  </para>
  <para>
   Voici un exemple de ligne à ce format :
   <example>
    <title>exemple de ligne au format de débogage</title>
    <programlisting>
<![CDATA[
date time host(pid) type: message-data
]]>
    </programlisting>
   </example>
  </para>
  <para>
   <variablelist>

    <varlistentry>
     <term><replaceable>date</replaceable></term>
     <listitem>
      <simpara>
       Les dates sont au format ISO 8601
       (<replaceable>yyyy</replaceable>-<replaceable>mm</replaceable>-<replaceable>dd</replaceable>)
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>time</replaceable></term>
     <listitem>
      <simpara>
       Les heures, y compris les micro-secondes :
       <replaceable>hh</replaceable>:<replaceable>mm</replaceable>:<replaceable>uuuuuu</replaceable>
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>host</replaceable></term>
     <listitem>
      <simpara>
       Le nom DNS ou adresse IP de l'hôte qui a généré
       l'erreur.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>pid</replaceable></term>
     <listitem>
      <simpara>
       PID (process id) sur l'hôte <replaceable>host</replaceable>, qui a
       généré l'erreur.
      </simpara>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>type</replaceable></term>
     <listitem>
      <para>
       Type de la ligne.  Indique au programme client comment traiter les
       données suivantes :
       <table>
        <title>Types des lignes du Débogueur</title>
        <tgroup cols="2">
         <thead>
          <row>
           <entry>Nom</entry>
           <entry>Signification</entry>
          </row>
         </thead>
         <tbody>
          <row>
           <entry><literal>start</literal></entry>
           <entry>
            Indique au programme client que le message du débogueur
            commence ici. Le contenu de <replaceable>data</replaceable> sera un type
            d'erreur, comme listé ci-dessous.
           </entry>
          </row>
          <row>
           <entry><literal>message</literal></entry>
           <entry>Le message d'erreur &php; 3.</entry>
          </row>
          <row>
           <entry><literal>location</literal></entry>
           <entry>
            Nom du fichier et numéro de ligne où l'erreur est
            survenue. La première occurrence de <literal>location</literal>
            contiendra toujours la localisation générale.
            <replaceable>data</replaceable> contiendra :
            <literal><replaceable>file</replaceable>:<replaceable>line</replaceable></literal>.
            Il y a toujours une indication de <literal>location</literal>
            après un <literal>message</literal> et après chaque
            <literal>function</literal>.
           </entry>
          </row>
          <row>
           <entry><literal>frames</literal></entry>
           <entry>
            Nombre de frames dans le dump de la pile. S'il y a 4 frames,
            attendez-vous à des informations sur 4 niveaux de fonctions. Si la ligne
            "frame" n'existe pas, la profondeur doit être 0 (une erreur
            est survenue au niveau général).
           </entry>
          </row>
          <row>
           <entry><literal>function</literal></entry>
           <entry>
            Nom de la fonction qui a généré l'erreur. Elle sera
            répétée à chaque niveau de la pile d'appel.
           </entry>
          </row>
          <row>
           <entry><literal>end</literal></entry>
           <entry>
            Indique au client que le message du débogueur se termine ici.
           </entry>
          </row>
         </tbody>
        </tgroup>
       </table>
      </para>
     </listitem>
    </varlistentry>

    <varlistentry>
     <term><replaceable>data</replaceable></term>
     <listitem>
      <simpara>Ligne de données.</simpara>
     </listitem>
    </varlistentry>

   </variablelist>

   <table>
    <title>Types d'erreur du débogueur</title>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>Débogueur</entry>
       <entry>Interne &php; 3</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry><errortype>alerte (warning)</errortype></entry>
       <entry><errortype>E_WARNING</errortype></entry>
      </row>
      <row>
       <entry><errortype>erreur</errortype></entry>
       <entry><errortype>E_ERROR</errortype></entry>
      </row>
      <row>
       <entry><errortype>analyse (parse)</errortype></entry>
       <entry><errortype>E_PARSE</errortype></entry>
      </row>
      <row>
       <entry><errortype>note (notice)</errortype></entry>
       <entry><errortype>E_NOTICE</errortype></entry>
      </row>
      <row>
       <entry><errortype>core-error</errortype></entry>
       <entry><errortype>E_CORE_ERROR</errortype></entry>
      </row>
      <row>
       <entry><errortype>core-warning</errortype></entry>
       <entry><errortype>E_CORE_WARNING</errortype></entry>
      </row>
      <row>
       <entry><errortype>inconnue</errortype></entry>
       <entry>(toutes les autres)</entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <example>
    <title>Exemple de message du débogueur</title>
    <programlisting>
<![CDATA[
1998-04-05 23:27:400966 lucifer.guardian.no(20481) start: notice
1998-04-05 23:27:400966 lucifer.guardian.no(20481) message: Uninitialized variable
1998-04-05 23:27:400966 lucifer.guardian.no(20481) location: (null):7
1998-04-05 23:27:400966 lucifer.guardian.no(20481) frames: 1
1998-04-05 23:27:400966 lucifer.guardian.no(20481) function: display
1998-04-05 23:27:400966 lucifer.guardian.no(20481) location: /home/ssb/public_html/test.php3:10
1998-04-05 23:27:400966 lucifer.guardian.no(20481) end: notice
]]>
    </programlisting>
   </example>
  </para>
 </sect1>
</appendix>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
