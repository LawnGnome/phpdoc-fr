<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.12 $ -->
<appendix id="debugger">
<title>D&eacute;buggeur PHP</title>
<sect1 id="debugger-about">
<title>A propos du d&eacute;buggeur</title>
<simpara>
 PHP 3 inclut le support d'un serveur de d&eacute;buggage.
</simpara>
<simpara>
 PHP 4 n'inclut aucun support de d&eacute;buggage.
</simpara>
</sect1>
<sect1 id="debugger-using">
<title>Utiliser le d&eacute;buggeur PHP</title>
<para>
 Le d&eacute;buggeur PHP sert &agrave; rep&eacute;rer les bugs
 r&eacute;calcitrants. Le d&eacute;buggeur fonctionne en se
 connectant &agrave; un port <acronym>TCP</acronym> &agrave; chaque
 d&eacute;marrage de PHP. Tous les messages d'erreur seront
 envoy&eacute;s sur cette connexion. Cette page est faite pour un
 "serveur de d&eacute;buggage", qui peut fonctionner avec un
 <acronym>IDE</acronym> ou un &eacute;diteur programmable (tel que Emacs).
</para>
<para>
 Comment param&eacute;trer le d&eacute;buggeur :
 <orderedlist>
  <listitem>
   <simpara>
    R&eacute;servez un port <acronym>TCP</acronym> pour le d&eacute;buggeur
    dans le fichier
    <link linkend="configuration.file">de configuration</link>
    (<link linkend="ini.debugger.port">debugger.port</link>) et activez-le
    (<link linkend="ini.debugger.enabled">debugger.enabled</link>).
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    Configurer un client TCP sur ce port (par exemple
    <command>socket -l -s 1400</command> sous UNIX).
   </simpara>
  </listitem>
  <listitem>
   <simpara>
    Dans votre code, placez la ligne "debugger_on(<replaceable>host</replaceable>)",
    o&ugrave; <replaceable>host</replaceable> est l'IP ou le nom de l'h&ocirc;te qui
    supporte le client <acronym>TCP</acronym>.
   </simpara>
  </listitem>
 </orderedlist>
 D&eacute;sormais, toutes les alertes, notes, ... seront envoy&eacute;es
 sur la socket client, <emphasis>m&ecirc;me si vous avez inactiv&eacute;
 le rapport d'erreur avec <function>error_reporting</function></emphasis>.
</para>
</sect1>
<sect1 id="debugger-protocol">
<title>Protocole du d&eacute;buggeur</title>
<para>
 Le protocole de d&eacute;bugage PHP 3 fonctionne ligne par ligne.
 Chaque ligne a un type <emphasis>type</emphasis> et
 plusieurs lignes composent un message
 Chaque message commence avec une ligne du type <literal>start</literal> et se
 termine avec une ligne de type <literal>end</literal>.  PHP peut envoyer des
 lignes de plusieurs messages simultan&eacute;ment.
</para>
<para>
 Voici un exemple de ligne &agrave; ce format :
 <informalexample>
  <literallayout>
<replaceable>date</replaceable> <replaceable>time</replaceable>
<replaceable>host</replaceable>(<replaceable>pid</replaceable>)
<replaceable>type</replaceable>:
<replaceable>message-data</replaceable>
  </literallayout>
 </informalexample>
 <variablelist>
 <varlistentry>
 <term><replaceable>date</replaceable></term>
 <listitem>
  <simpara>
   Les dates sont au format ISO 8601
   (<replaceable>yyyy</replaceable>-<replaceable>mm</replaceable>-<replaceable>dd</replaceable>)
  </simpara>
 </listitem>
 </varlistentry>
 <varlistentry>
 <term><replaceable>time</replaceable></term>
 <listitem>
  <simpara>Les heures, y compris les micro-secondes:
   <replaceable>hh</replaceable>:<replaceable>mm</replaceable>:<replaceable>uuuuuu</replaceable>
  </simpara>
 </listitem>
 </varlistentry>
 <varlistentry>
 <term><replaceable>host</replaceable></term>
 <listitem>
  <simpara>
   Le nom DNS ou adresse IP de l'h&ocirc;te qui a g&eacute;n&eacute;r&eacute;
   l'erreur.
  </simpara>
 </listitem>
 </varlistentry>
 <varlistentry>
 <term><replaceable>pid</replaceable></term>
 <listitem>
  <simpara>
   PID (process id) sur l'h&ocirc;te <replaceable>host</replaceable>, qui a
   g&eacute;n&eacute;r&eacute; l'erreur.
  </simpara>
 </listitem>
 </varlistentry>
 <varlistentry>
 <term><replaceable>type</replaceable></term>
 <listitem>
  <para>
   Type de la ligne.  Indique au programme client comment traiter les
   donn&eacute;es suivantes :
   <table>
    <title>Types des lignes du D&eacute;buggeur</title>
    <tgroup cols="2">
     <thead>
     <row>
      <entry>Nom</entry>
      <entry>Signification</entry>
     </row>
     </thead>
     <tbody>
      <row>
       <entry><literal>start</literal></entry>
       <entry>
        Indique au programme client que le message du d&eacute;buggeur
        commence ici. Le contenu de <replaceable>data</replaceable> sera un type
        d'erreur, comme list&eacute; ci-dessous.
       </entry>
      </row>
      <row>
       <entry><literal>message</literal></entry>
       <entry>Le message d'erreur PHP 3.</entry>
      </row>
      <row>
       <entry><literal>location</literal></entry>
       <entry>
        Nom du fichier et num&eacute;ro de ligne, o&ugrave; l'erreur est
        survenue. La premi&egrave;re occurrence de <literal>location</literal>
        contiendra toujours la localisation g&eacute;n&eacute;rale.
        <replaceable>data</replaceable> contiendra :
        <literal><replaceable>file</replaceable>:<replaceable>line</replaceable></literal>.
        Il y a toujours une indication de <literal>location</literal>
        apr&egrave;s un <literal>message</literal> et apr&egrave;s chaque
        <literal>function</literal>.
       </entry>
      </row>
      <row>
       <entry>
       <literal>frames</literal></entry>
       <entry>
        Nombre de frames dans le dump de la pile. S'il y a 4 frames, attendez
        vous &agrave; des informations sur 4 niveaux de fonctions. Si la ligne
        "frame" n'existe pas, la profondeur doit &ecirc;tre 0 (une erreur
        est survenue au niveau g&eacute;n&eacute;ral).
       </entry>
      </row>
      <row>
       <entry>
       <literal>function</literal></entry>
       <entry>
        Nom de la fonction qui a g&eacute;n&eacute;r&eacute; l'erreur. Elle sera
        r&eacute;p&eacute;t&eacute;e &agrave; chaque niveau de la pile d'appel.
       </entry>
      </row>
      <row>
       <entry><literal>end</literal></entry>
       <entry>
        Indique au client que le message du d&eacute;buggeur se termine ici.
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </para>
 </listitem>
 </varlistentry>
 <varlistentry>
 <term><replaceable>data</replaceable></term>
 <listitem>
  <simpara>Ligne de donn&eacute;es.</simpara>
 </listitem>
 </varlistentry>
 </variablelist>
 <table>
  <title>Types d'erreur du d&eacute;buggeur</title>
  <tgroup cols="2">
   <thead>
   <row>
    <entry>D&eacute;buggeur</entry>
    <entry>Interne PHP 3</entry>
   </row>
   </thead>
   <tbody>
    <row>
     <entry><errortype>alerte (warning)</errortype></entry>
     <entry><errortype>E_WARNING</errortype></entry>
    </row>
    <row>
     <entry><errortype>erreur</errortype></entry>
     <entry><errortype>E_ERROR</errortype></entry>
    </row>
    <row>
     <entry><errortype>analyse (parse)</errortype></entry>
     <entry><errortype>E_PARSE</errortype></entry>
    </row>
    <row>
     <entry><errortype>note (notice)</errortype></entry>
     <entry><errortype>E_NOTICE</errortype></entry>
    </row>
    <row>
     <entry><errortype>core-error</errortype></entry>
     <entry><errortype>E_CORE_ERROR</errortype></entry>
    </row>
    <row>
     <entry><errortype>core-warning</errortype></entry>
     <entry><errortype>E_CORE_WARNING</errortype></entry>
    </row>
    <row>
     <entry><errortype>inconnue</errortype></entry>
     <entry>(toutes les autres)</entry>
    </row>
   </tbody>
  </tgroup>
 </table>
 <example>
  <title>Exemple de message du d&eacute;buggeur</title>
  <literallayout>
1998-04-05 23:27:400966 lucifer.guardian.no(20481) start: notice
1998-04-05 23:27:400966 lucifer.guardian.no(20481) message: Uninitialized variable
1998-04-05 23:27:400966 lucifer.guardian.no(20481) location: (&null;):7
1998-04-05 23:27:400966 lucifer.guardian.no(20481) frames: 1
1998-04-05 23:27:400966 lucifer.guardian.no(20481) function: display
1998-04-05 23:27:400966 lucifer.guardian.no(20481) location: /home/ssb/public_html/test.php3:10
1998-04-05 23:27:400966 lucifer.guardian.no(20481) end: notice
  </literallayout>
 </example>
</para>
</sect1>
</appendix>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

