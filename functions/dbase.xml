<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.8 $ -->
<reference id="ref.dbase">
 <title>dBase</title>
 <titleabbrev>dBase</titleabbrev>
 <partintro>
  <simpara>
   Ces fonctions vous permettront d'acc&eacute;der aux enregistrements
   d'une base au format dBase (.dbf).
  </simpara>
  <simpara>
   dBase ne permet pas l'utilisation d'index, de "memo fields", ni le blocage
   de la base. Deux processus de serveurs web diff&eacute;rents modifiant
   le m&ecirc;me fichier dBase risque de rendre votre base de
   donn&eacute;es incoh&eacute;rente.
  </simpara>
  <simpara>
   Les fichiers dBase sont de simples fichiers s&eacute;quentiels
   d'enregistrements de longueur fixe. Les enregistrements sont
   ajout&eacute;s &agrave; la fin du fichier et les enregistrements
   supprim&eacute;s sont conserv&eacute;s jusqu'&agrave;
   l'appel de <function>dbase_pack</function>.
  </simpara>
  <simpara>
   Nous vous recommandons de ne pas utiliser les fichiers dBase comme base
   de donn&eacute;es de production. Choisissez n'importe quel serveur SQL
   &agrave; la place. MySQL et PostgresSQL sont des choix classiques avec
   PHP. Le support de dBase ne se justifie ici que pour vous permettre
   d'importer et d'exporter des donn&eacute;es depuis et vers votre base des
   donn&eacute;es issues du web, car ce format de fichier est
   commun&eacute;ment accept&eacute; par les feuilles et
   organiseurs Windows. L'import et l'export de donn&eacute;es est l'unique
   chose pour laquelle l'utilisation de dBase est recommand&eacute;e.
  </simpara>
 </partintro>
 <refentry id="function.dbase-create">
  <refnamediv>
   <refname>dbase_create</refname>
   <refpurpose>Cr&eacute;e une base de donn&eacute;es dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>int <function>dbase_create</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
     <paramdef>array <parameter>fields</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <parameter>fields</parameter> est un tableau de tableaux. Chaque tableau
    d&eacute;crit le format d'un fichier de la base. Chaque champs est
    constitu&eacute; d'un nom, d'un caract&egrave;re de type de champs,
    d'une longueur et d'une pr&eacute;cision.
   </para>
   <para>
    Les types de champs disponibles sont :
    <variablelist>
    <varlistentry>
    <term>L</term>
    <listitem>
     <simpara>
      Boolean (bool&eacute;en). Pas de longueur ou de pr&eacute;cision pour ces valeurs.
     </simpara>
    </listitem>
    </varlistentry>
    <varlistentry>
    <term>M</term>
    <listitem>
     <simpara>
      Memo. (Note importante : les Memos ne sont pas support&eacute;s par PHP.)
      Elles n'ont pas de longueur ou de pr&eacute;cision.
     </simpara>
    </listitem>
    </varlistentry>
    <varlistentry>
    <term>D</term>
    <listitem>
     <simpara>
      Date (enregistr&eacute;e au format 'YYYYMMDD').  Elles n'ont pas de longueur ou
      de pr&eacute;cision.
     </simpara>
    </listitem>
    </varlistentry>
    <varlistentry>
    <term>N</term>
    <listitem>
     <simpara>
      Number (nombre). Poss&egrave;de une longueur et un pr&eacute;cision (le nombre de
      chiffres apr&egrave;s la virgule).
     </simpara>
    </listitem>
    </varlistentry>
    <varlistentry>
    <term>C</term>
    <listitem>
     <simpara>
      String (cha&icirc;ne).
     </simpara>
    </listitem>
    </varlistentry>
    </variablelist>
   </para>
   <para>
    Si la base de donn&eacute;es a &eacute;t&eacute; cr&eacute;&eacute;e,
    un identifiant de base dbase_identifier est retourn&eacute;, sinon,
    <literal>FALSE</literal> est retourn&eacute;.
    <example>
     <title>Cr&eacute;ation d'une base dBase</title>
     <programlisting role="php">
&lt;?php
// "database" name
  $dbname = "/tmp/test.dbf";
// database "definition"
  $def =
    array(
        array("date",     "D"),
        array("name",     "C",  50),
        array("age",      "N",   3, 0),
        array("email",    "C", 128),
        array("ismember", "L")
    );
// cr&eacute;ation
  if (!dbase_create($dbname, $def))
    print "&lt;strong&gt;Erreur!&lt;/strong&gt;";
?&gt;
     </programlisting>
    </example>
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-open">
  <refnamediv>
   <refname>dbase_open</refname>
   <refpurpose>Ouverture d'une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>int <function>dbase_open</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
     <paramdef>int <parameter>flags</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <parameter>flags</parameter> est un flag, comme pour la fonction open().
    (Typiquement; 0 signifie lecture seule, 1 signifie &eacute;criture seule, et
    2 &eacute;criture/lecture).
   </para>
   <para>
    <function>dbase_open</function> retourne un identifiant de base de
    donn&eacute;es, ou <literal>FALSE</literal> si la base n'a pas pu &ecirc;tre
    s&eacute;lectionn&eacute;e.
   </para>
   &note.sm.uidcheck;
  </refsect1>
 </refentry>
 <refentry id="function.dbase-close">
  <refnamediv>
   <refname>dbase_close</refname>
   <refpurpose>Ferme une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>boolean <function>dbase_close</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_close</function> ferme la base associ&eacute;e &agrave;
    <parameter>dbase_identifier</parameter>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-pack">
  <refnamediv>
   <refname>dbase_pack</refname>
   <refpurpose>Compacte une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>boolean <function>dbase_pack</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_pack</function> compacte la base de donn&eacute;es
    <parameter>dbase_identifier</parameter> (effacement d&eacute;finitif
    de tous les enregistrements marqu&eacute;s pour l'effacement,
    avec la fonction <function>dbase_delete_record</function>).
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-add-record">
  <refnamediv>
   <refname>dbase_add_record</refname>
   <refpurpose>Ajoute un enregistrement dans une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>boolean <function>dbase_add_record</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
     <paramdef>array <parameter>record</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_add_record</function> ajoute les donn&eacute;es de
    <parameter>record</parameter> dans la base sp&eacute;cifi&eacute;e par
    <parameter>dbase_identifier</parameter>. Si le nombre de colonnes fourni
    n'est pas celui du nombre de champs dans la base, l'op&eacute;ration
    &eacute;chouera, et <literal>FALSE</literal> sera retourn&eacute;.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-replace-record">
  <refnamediv>
   <refname>dbase_replace_record</refname>
   <refpurpose>Remplace un enregistrement dans une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>boolean <function>dbase_replace_record</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
     <paramdef>array <parameter>record</parameter></paramdef>
     <paramdef>int <parameter>dbase_record_number</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <simpara>
    <function>dbase_replace_record</function> remplace les donn&eacute;es
    associ&eacute;es &agrave; l'enregistrement <parameter>record_number</parameter>
    par les donn&eacute;es enregistr&eacute;es dans <parameter>record</parameter>.
    Si le nombre de colonnes fourni n'est pas celui du nombre de champs dans la base,
    l'op&eacute;ration &eacute;chouera, et <literal>FALSE</literal> sera retourn&eacute;.
   </simpara>
   <simpara>
    <parameter>dbase_record_number</parameter> est un entier qui peut aller de 1
    jusqu'au nombre maximal d'enregistrement de la base (retourn&eacute; par
    <function>dbase_numrecords</function>).
   </simpara>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-delete-record">
  <refnamediv>
   <refname>dbase_delete_record</refname>
   <refpurpose>Efface un enregistrement dans une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>boolean <function>dbase_delete_record</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
     <paramdef>int <parameter>record</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_delete_record</function> marque l'enregistrement
    <parameter>record</parameter> pour l'effacement, dans la base
    <parameter>dbase_identifier</parameter>. Pour effacer r&eacute;ellement
    l'enregistrement, il faut utiliser aussi <function>dbase_pack</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-get-record">
  <refnamediv>
   <refname>dbase_get_record</refname>
   <refpurpose>Lit un enregistrement dans une base dBase.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>array <function>dbase_get_record</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
     <paramdef>int <parameter>record</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_get_record</function> retourne les donn&eacute;es de
    l'enregistrement <parameter>record</parameter> dans un tableau. Le tableau est
    index&eacute; &agrave; partir de 0, et inclus un membre nomm&eacute; 'deleted'
    (effac&eacute;), qui sera mis &agrave; 1 si l'enregistrement a &eacute;t&eacute;
    marqu&eacute; pour l'effacement (voir <function>dbase_delete_record</function>).
   </para>
   <para>
    Chaque champs est converti au format appropri&eacute; PHP. (Les dates sont
    laiss&eacute;es au format cha&icirc;ne).
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-get-record-with-names">
  <refnamediv>
   <refname>dbase_get_record_with_names</refname>
   <refpurpose>
    Lit un enregistrement dans une base, sous la forme d'un tableau associatif.
   </refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>array
      <function>dbase_get_record_with_names</function>
     </funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
     <paramdef>int <parameter>record</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <parameter>dbase_identifier</parameter> retourne les donn&eacute;es
    de l'enregistrement <parameter>record</parameter>
    dans un tableau associatif. Le tableau inclus un membre nomm&eacute; 'deleted'
    (effac&eacute;), qui sera mis &agrave; 1 si l'enregistrement a
    &eacute;t&eacute; marqu&eacute; pour l'effacement (voir
    <function>dbase_delete_record</function>).
   </para>
   <para>
    Chaque champs est converti au format appropri&eacute; PHP. (Les dates sont
    laiss&eacute;es au format cha&icirc;ne).
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-numfields">
  <refnamediv>
   <refname>dbase_numfields</refname>
   <refpurpose>
    Compte le nombre de champs d'une base dBase.
   </refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>int <function>dbase_numfields</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_numfields</function> retourne le nombre de champs (colonnes)
    de la base de donn&eacute;es <parameter>dbase_identifier</parameter>.
    Les num&eacute;ros de champs sont num&eacute;rot&eacute;s de 0 &agrave;
    dbase_numfields($db)-1, tandis que les num&eacute;ros d'enregistrements
    sont num&eacute;rot&eacute;s de 1 &agrave; dbase_numrecords($db).
    <example>
     <title>Utiliser <function>dbase_numfields</function></title>
     <programlisting role="php">
&lt;?php
  $rec = dbase_get_record($db, $recno);
  $nf  = dbase_numfields($db);
  for ($i=0; $i &lt; $nf; $i++) {
    print $rec[$i]."&lt;br&gt;\n";
  }
?&gt;
     </programlisting>
    </example>
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.dbase-numrecords">
  <refnamediv>
   <refname>dbase_numrecords</refname>
   <refpurpose>
    Compter le nombre d'enregistrements dans une base dBase.
   </refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
   <funcsynopsis>
    <funcprototype>
     <funcdef>int <function>dbase_numrecords</function></funcdef>
     <paramdef>resource <parameter>dbase_identifier</parameter></paramdef>
    </funcprototype>
   </funcsynopsis>
   <para>
    <function>dbase_numrecords</function> retourne le nombre d'enregistrements
    (lignes) dans la base <parameter>dbase_identifier</parameter>.
    Les num&eacute;ros de champs sont num&eacute;rot&eacute;s de 0 &agrave;
    <literal>dbase_numfields($db)-1</literal>, tandis que les num&eacute;ros
    d'enregistrements sont num&eacute;rot&eacute;s de 1 &agrave;
    <literal>dbase_numrecords($db)</literal>.
   </para>
  </refsect1>
 </refentry>
</reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

