<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.9 $ -->
 <reference id="ref.pfpro">
  <title>Paiement par Verisign</title>
  <titleabbrev>Paiement par Verisign</titleabbrev>
  <partintro>
   <simpara>
    Cette extension vous permet d'effectuer des transactions avec des cartes
    de cr&eacute;dits en utilisant les services Verisign Payment Services,
    anciennement connu sous le nom de Signio
    (<ulink url="&url.pfpro;">&url.pfpro;</ulink>).
   </simpara>
   <simpara>
    Ces fonctions sont utilisables d&egrave;s que PHP a &eacute;t&eacute;
    compil&eacute; avec l'option
    <link linkend="install.configure.with-pfpro"><option role="configure">--with-pfpro[=DIR]</option></link>.
    Vous devez aussi utiliser le SDK appropri&eacute; sur votre plate-forme : il
    est disponible <ulink url="&url.pfpro.download;">l'interface du manager</ulink>,
    une fois que vous vous &ecirc;tes inscrit. Si vous avez l'intention d'utiliser
    cette extension sur un serveur web SSL ou avec d'autres composants SSL (tels que
    l'extension CURL et SSL) vous DEVEZ utiliser le SDK beta.
   </simpara>
   <simpara>
    Une fois que vous avez t&eacute;l&eacute;charg&eacute; le SDK vous devez copier les
    fichiers depuis le dossier <filename class="directory">lib</filename>
    de la distribution. Copier le fichier d'en-t&ecirc;tes <filename>pfpro.h</filename>
    dans <filename class="directory">/usr/local/include</filename>
    et la librairie <filename>libpfpro.so</filename> dans
    <filename class="directory">/usr/local/lib</filename>.
   </simpara>
   <simpara>
    Lorsque vous utilisez ces fonctions, vous pouvez omettre d'appeler les
    fonctions <function>pfpro_init</function> et <function>pfpro_cleanup</function> :
    l'extension se chargera de le faire automatiquement. Cependant,
    elles sont toujours disponibles au cas o&ugrave; vous auriez un grand nombre
    de transaction &agrave; traiter, ou que vous souhaiteriez un contr&ocirc;le plus
    fin de la librairie. Vous pouvez effectuer autant de transaction que vous
    le souhaitez avec <function>pfpro_process</function> lors d'une connexion.
   </simpara>
   <simpara>
    Ces fonctions ont &eacute;t&eacute; ajout&eacute;e en PHP 4.0.2.
   </simpara>
   <note>
    <para>
     Ces fonctions ne font que fournir un acc&egrave;s aux services Verisign Payment Services.
     Assurez-vous bien de lire le "Payflow Pro Developers Guide" pour plus
     de d&eacute;tails sur les param&egrave;tres.
    </para>
   </note>
  </partintro>
  <refentry id="function.pfpro-init">
   <refnamediv>
    <refname>pfpro_init</refname>
    <refpurpose>Initialise la librairie Payflow Pro</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>void</type><methodname>pfpro_init</methodname>
      <void/>
     </methodsynopsis>
    <para>
     <function>pfpro_init</function> initialise la librairie
     Payflow Pro library. Vous pouvez omettre cet appel : dans ce cas,
     elle sera appel&eacute;e automatiquement <function>pfpro_init</function>
     avant la premi&egrave;re transaction.
    </para>
    <para>
     Voir aussi <function>pfpro_cleanup</function>.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.pfpro-cleanup">
   <refnamediv>
    <refname>pfpro_cleanup</refname>
    <refpurpose>Eteint la librairie Payflow Pro</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>void</type><methodname>pfpro_cleanup</methodname>
      <void/>
     </methodsynopsis>
    <para>
     <function>pfpro_cleanup</function> sert &agrave; terminer proprement
     une session avec la librairie Payflow Pro library. Elle doit &ecirc;tre
     appel&eacute; apr&egrave;s toutes les transactions, et avant la fin du script.
     Cependant, vous pouvez omettre cet appel : dans ce cas, cette fonction
     sera automatiquement appel&eacute;e &agrave; la fin du script.
    </para>
    <para>
     Voir aussi <function>pfpro_init</function>.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.pfpro-process">
   <refnamediv>
    <refname>pfpro_process</refname>
    <refpurpose>Effectue une transaction avec Payflow Pro</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>array</type><methodname>pfpro_process</methodname>
      <methodparam><type>array</type><parameter>parameters</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>address</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>port</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>proxy_logon</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>proxy_port</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>proxy_logon</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>proxy_password</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>pfpro_process</function> retourne un tableau associatif,
     contenant la r&eacute;ponse &agrave; la transaction.
    </para>
    <para>
     <function>pfpro_process</function> effectue une transaction
     avec Payflow Pro. Le premier param&egrave;tre est un tableau associatif
     contenant des paires cl&eacute;s/valeurs, qui seront encod&eacute;es, puis pass&eacute;es
     au serveur.
    </para>
    <para>
     Le second param&egrave;tre <parameter>address</parameter>
     indique quel h&ocirc;te contacter. Il est optionnel. Par d&eacute;faut,
     il vaut "test.signio.com" : vous devrez probablement le remplacer
     par "connect.signio.com" pour effectuer de vraies transactions.
    </para>
    <para>
     Le troisi&egrave;me param&egrave;tre <parameter>port</parameter>
     sp&eacute;cifie le port de connexion. Par d&eacute;faut, c'est 443, le port SSL standard.
    </para>
    <para>
     Le quatri&egrave;me param&egrave;tre <parameter>timeout</parameter>
     indique le temps de timeout &agrave; utiliser. Par d&eacute;faut, c'est 30 secondes.
     Notez que ce timeout ne prend effet que lorsqu'une connexion a &eacute;t&eacute;
     &eacute;tablie avec un serveur : votre script peut potentiellement attendre
     ind&eacute;finiment un &eacute;v&eacute;nement DNS ou un probl&egrave;me de r&eacute;seau.
    </para>
    <para>
     Le cinqui&egrave;me param&egrave;tre <parameter>proxy_address</parameter>
     indique le nom du proxy SSL. Le sixi&egrave;me param&egrave;tre
     <parameter>proxy port</parameter> indique le port
     &agrave; utiliser sur ce proxy.
    </para>
    <para>
     Les septi&egrave;me et huiti&egrave;me param&egrave;tres,
     <parameter>proxy_logon</parameter> et
     <parameter>proxy_password</parameter> indique
     le nom de compte et le mot de passe &agrave; utiliser sur le proxy.
    </para>
    <para>
     <function>pfpro_process</function> retourne un tableau associatif.
    </para>
    <note>
     <para>
      Lisez attentivement le "Payflow Pro Developers Guide" pour conna&icirc;tre les
      d&eacute;tails des autres param&egrave;tres.
     </para>
    </note>
    <example>
     <title>Exemple Payflow Pro</title>
     <programlisting role="php">
&lt;?php
pfpro_init();
$transaction = array(USER	=&gt; 'monlogin',
		     PWD	=&gt; 'mmotdepasse',
		     TRXTYPE	=&gt; 'S',
		     TENDER	=&gt; 'C',
		     AMT	=&gt; 1.50,
		     ACCT	=&gt; '4111111111111111',
		     EXPDATE	=&gt; '0904'
		     );
$response = pfpro_process($transaction);
if (!$response) {
  die("Impossible d'&eacute;tablir un lien avec Verisign.\n");
}
echo "La r&eacute;ponse de Verisign &eacute;tait ".$response[RESULT];
echo ", c'est-&agrave;-dire : ".$response[RESPMSG]."\n";
echo "\nLa requ&ecirc;te de transaction: ";
print_r($transaction);
echo "\nLa r&eacute;ponse: ";
print_r($response);
pfpro_cleanup();
?&gt;
     </programlisting>
    </example>
   </refsect1>
  </refentry>
  <refentry id="function.pfpro-process-raw">
   <refnamediv>
    <refname>pfpro_process_raw</refname>
    <refpurpose>Envoie une transaction brute &agrave; Payflow Pro</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>string</type><methodname>pfpro_process_raw</methodname>
      <methodparam><type>string</type><parameter>parameters</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>address</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>port</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>timeout</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>proxy_address</parameter></methodparam>
      <methodparam choice="opt"><type>int</type><parameter>proxy_port</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>proxy_logon</parameter></methodparam>
      <methodparam choice="opt"><type>string</type><parameter>proxy_password</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>pfpro_process_raw</function> retourne une cha&icirc;ne avec
     une r&eacute;ponse.
    </para>
    <para>
     <function>pfpro_process_raw</function> envoie une transaction
     brute au serveur Payflow Pro. Il est vivement recommand&eacute; d'utiliser
     <function>pfpro_process</function> &agrave; la place, car les r&egrave;gles de
     codage sont non standard.
    </para>
    <para>
     Le premier argumentest une cha&icirc;ne contenant la transaction
     brute. Tous les autres param&egrave;tres sont les m&ecirc;mes que ceux de
     <function>pfpro_process</function>. La valeur de retour est une
     cha&icirc;ne contenant la r&eacute;ponse brute.
    </para>
    <note>
     <para>
      Lisez attentivement le "Payflow Pro Developers Guide" pour conna&icirc;tre tous
      les d&eacute;tails des param&egrave;tres et leur r&egrave;gle d'encodage.
      Il est recommand&eacute; d'utiliser plut&ocirc;t <function>pfpro_process</function>.
     </para>
    </note>
    <example>
     <title>Exemple <function>pfpro_process_raw</function></title>
     <programlisting role="php">
&lt;?php
pfpro_init();
$response = pfpro_process("USER=mylogin&amp;PWD[5]=m&amp;ndy&amp;TRXTYPE=S&amp;TENDER=C&amp;AMT=1.50&amp;ACCT=4111111111111111&amp;EXPDATE=0904");
if (!$response) {
  die("Impossible de contacter Verisign.\n");
}
echo "La r&eacute;ponse brute de Verisign est ".$response;
pfpro_cleanup();
?&gt;
     </programlisting>
    </example>
   </refsect1>
  </refentry>
  <refentry id="function.pfpro-version">
   <refnamediv>
    <refname>pfpro_version</refname>
    <refpurpose>Lit le num&eacute;ro de version de Payflow Pro</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>string</type><methodname>pfpro_version</methodname>
      <void/>
     </methodsynopsis>
    <para>
     <function>pfpro_version</function> lit la version de la librairie
     Payflow Pro. Au moment de r&eacute;daction de la doc, c'&eacute;tait L211.
    </para>
   </refsect1>
  </refentry>
 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

