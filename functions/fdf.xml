<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.12 $ -->
<reference id="ref.fdf">
 <title>Forms Data Format</title>
 <titleabbrev>FDF</titleabbrev>
 <partintro>
  <simpara>
   Forms Data Format (FDF) est un format de fomulaire pour les documents
   PDF. Vous pouvez lire la documentation (en anglais) &agrave;
   <ulink url="&spec.pdf.fdf;">&spec.pdf.fdf;</ulink>
   pour plus de d&eacute;tails sur les tenants et les aboutissants.
  </simpara>
  <note>
   <simpara>
    Si vous rencontrez des probl&egrave;mes de configuration de PHP avec le support
    fdftk, v&eacute;rifiez bien que le fichier d'en-t&ecirc;tes <filename>FdfTk.h</filename>
    et la librairie <filename>libFdfTk.so</filename> sont bien situ&eacute;s.
    Elle devrait &ecirc;tre dans les dossiers
    <filename>fdftk-dir/include</filename> et <filename>fdftk-dir/lib</filename>.
    Cela ne sera pas le cas si vous avez simplement d&eacute;compress&eacute;
    la distribution FdfTk.
   </simpara>
  </note>
  <simpara>
   L'esprit de FDF est similaire &agrave; celui des formulaires HTML. Les
   diff&eacute;rences r&eacute;sident dans les moyens de transmission des
   donn&eacute;es au serveur, lorsque le bouton "submit" (soumettre) est
   press&eacute; (ce qui est du ressort de Form Data Format) et le format de
   formulaire lui-m&ecirc;me (qui est plut&ocirc;t du ressort de Portable Document
   Format, PDF). G&eacute;rer des donn&eacute;es FDF est un des objectifs des
   fonctions FDF. Mais il y en a d'autres. Vous pouvez aussi prendre un
   formulaire PDF, et pr&eacute;-remplir les champs, sans modifier le
   formulaire lui-m&ecirc;me. Dans ce cas, on va cr&eacute;er un document FDF
   (<function>fdf_create</function>), remplir les champs
   (<function>fdf_set_value</function>) et l'associer &agrave; un fichier PDF
   (<function>fdf_set_file</function>). Finalement, le tout sera envoy&eacute;
   au client, avec le type MIME "application/vnd.fdf". Le module "Acrobat reader"
   de votre navigateur va reconna&icirc;tre ce type MIME, et lire le fichier
   PDF, puis le remplis avec FDF.
  </simpara>
  <simpara>
   Si vous &eacute;ditez un fichier FDF avec un &eacute;diteur de texte, vous trouverez
   un catalogue d'objet avec le nom de <literal>FDF</literal>. Cet objet
   peut contenir des entr&eacute;es telles que <literal>Fields</literal>,
   <literal>F</literal>, <literal>Status</literal> etc..
   Les entr&eacute;es les plus couramment utilis&eacute;es sont
   <literal>Fields</literal>, qui indique une liste de champs de contr&ocirc;le,
   et <literal>F</literal> qui contient le nom du fichier PDF a qui
   appartiennent ces donn&eacute;es. Ces entr&eacute;es sont d&eacute;sign&eacute;es dans la documentation
   PDF sous le nom de /F-Key ou /Status-Key.
   La modification de ces entr&eacute;es est possible avec les fonctions
   <function>fdf_set_file</function> et <function>fdf_set_status</function>.
   Les champs sont modifiables avec les fonctions
   <function>fdf_set_value</function>, <function>fdf_set_opt</function> etc..
  </simpara>
  <simpara>
   Les exemples suivants montre comme &eacute;valuer les donn&eacute;es
   du formulaire.
  </simpara>
  <simpara></simpara>
  <example>
   <title>Evaluer un document FDF</title>
   <programlisting role="php">
&lt;?php
// Sauver le fichier FDF dans un fichier temporaire.
$fdffp = fopen("test.fdf", "w");
fwrite($fdffp, $HTTP_FDF_DATA, strlen($HTTP_FDF_DATA));
fclose($fdffp);
// Ouvrir le fichier temporaire, et utiliser les donn&eacute;es.
// Le formulaire pdf contenait diff&eacute;rents fichiers texte, avec pour nom :
// volume, date, comment, publisher, preparer, ainsi que deux bo&icirc;tes
// &agrave; cocher show_publisher et show_preparer.
$fdf = fdf_open("test.fdf");
$volume = fdf_get_value($fdf, "volume");
echo "La valeur du champs volume &eacute;tait : '&lt;B>$volume&lt;/B>'&lt;br&gt;";
$date = fdf_get_value($fdf, "date");
echo "La valeur du champs date &eacute;tait '&lt;B>$date&lt;/B>'&lt;br&gt;";
$comment = fdf_get_value($fdf, "comment");
echo "La valeur du champs comment &eacute;tait '&lt;B>$comment&lt;/B>'&lt;br&gt;";
if(fdf_get_value($fdf, "show_publisher") == "On") {
  $publisher = fdf_get_value($fdf, "publisher");
  echo "La valeur du champs publisher &eacute;tait : '&lt;B>$publisher&lt;/B>'&lt;br&gt;";
} else
  echo "La valeur du champs ne doit pas &ecirc;tre affich&eacute;e.&lt;br&gt;";
if(fdf_get_value($fdf, "show_preparer") == "On") {
  $preparer = fdf_get_value($fdf, "preparer");
  echo "La valeur du champs preparer &eacute;tait  '&lt;B>$preparer&lt;/B>'&lt;br&gt;";
} else
  echo "La valeur du champs Preparer ne doit pas &ecirc;tre affich&eacute;.&lt;br&gt;";
fdf_close($fdf);
?&gt;
   </programlisting>
  </example>
 </partintro>
 <refentry id="function.fdf-open">
  <refnamediv>
   <refname>fdf_open</refname>
   <refpurpose>Ouvre un document FDF.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>resource</type><methodname>fdf_open</methodname>
     <methodparam><type>string</type><parameter>filename</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_open</function> ouvre un fichier avec
    formulaire. Le fichier doit contenir les donn&eacute;es
    retourn&eacute;es par le formulaire PDF. Actuellement, le
    fichier doit &ecirc;tre cr&eacute;&eacute;e 'manuellement',
    en utilisant la fonction <function>fopen</function> et en y
    &eacute;crivant le contenu du tableau HTTP_FDF_DATA avec la
    fonction <function>fwrite</function>. Un m&eacute;canisme
    comparable aux formulaires HTML qui cr&eacute;ent une variable
    pour chaque champs entrant, n'existe pas.
   </para>
   <para>
    <example>
     <title>Acc&eacute;der aux donn&eacute;es du formulaire</title>
     <programlisting role="php">
&lt;?php
// Sauver le fichier FDF dans un fichier temporaire.
$fdffp = fopen("test.fdf", "w");
fwrite($fdffp, $HTTP_FDF_DATA, strlen($HTTP_FDF_DATA));
fclose($fdffp);
// Ouvrir le fichier temporaire, et utiliser les donn&eacute;es.
$fdf = fdf_open("test.fdf");
...
fdf_close($fdf);
?&gt;
     </programlisting>
    </example>
   </para>
   <para>
    Voir aussi
    <function>fdf_close</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-close">
  <refnamediv>
   <refname>fdf_close</refname>
   <refpurpose>Ferme un document FDF.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_close</methodname>
     <methodparam><type>resource</type><parameter>fdf_document</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_close</function> ferme le document FDF.
   </para>
   <para>
    Voir aussi
    <function>fdf_open</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-create">
  <refnamediv>
   <refname>fdf_create</refname>
   <refpurpose>Cr&eacute;e un nouveau document FDF.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>int</type><methodname>fdf_create</methodname>
     <methodparam><type>void</type><parameter/></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_create</function> cr&eacute;e un nouveau document FDF.
    Cette fonction est n&eacute;cessaire pour ceux qui veulent pr&eacute;
    remplir les champs d'un formulaire dans un fichier PDF.
   </para>
   <para>
    <example>
     <title>Pr&eacute; remplir un formulaire PDF</title>
     <programlisting role="php">
&lt;?php
$outfdf = fdf_create();
fdf_set_value($outfdf, "volume", $volume, 0);
fdf_set_file($outfdf, "http:/testfdf/resultlabel.pdf");
fdf_save($outfdf, "outtest.fdf");
fdf_close($outfdf);
Header("Content-type: application/vnd.fdf");
$fp = fopen("outtest.fdf", "r");
fpassthru($fp);
unlink("outtest.fdf");
?&gt;
     </programlisting>
    </example>
   </para>
   <para>
    Voir aussi
    <function>fdf_close</function>,
    <function>fdf_save</function> et
    <function>fdf_open</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-save">
  <refnamediv>
   <refname>fdf_save</refname>
   <refpurpose>Sauver un document FDF.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>int</type><methodname>fdf_save</methodname>
     <methodparam><type>string</type><parameter>filename</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_save</function> sauve un document FDF.
    Le FDF Toolkit fournit un moyen d'envoyer le contenu d'un document
    FDF &agrave; au fichier de sortie stdout si le param&egrave;tre
    <parameter>filename</parameter> vaut '.'. Ceci ne fonctionne pas
    si PHP est sous la forme d'un module Apache. Dans ce cas, il
    faudra &eacute;crire le r&eacute;sultat dans un fichier, et utiliser
    <function>fpassthru</function> pour l'afficher au client.
   </para>
   <para>
    Voir aussi
    <function>fdf_close</function> et pour avoir un exemple
    <function>fdf_create</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-get-value">
  <refnamediv>
   <refname>fdf_get_value</refname>
   <refpurpose>Mot la valeur d'un champs.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>string</type><methodname>fdf_get_value</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_get_value</function> retourne la valeur d'un champs.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_value</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-value">
  <refnamediv>
   <refname>fdf_set_value</refname>
   <refpurpose>Fixe la valeur d'un champs.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_value</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
     <methodparam><type>string</type><parameter>value</parameter></methodparam>
     <methodparam><type>int</type><parameter>isName</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_value</function> fixe la valeur d'un champs.
    Le dernier param&egrave;tre d&eacute;termine si la valeur doit &ecirc;tre
    convertie en nom PDF (<parameter>isName</parameter> = 1) ou affecter
    une cha&icirc;ne PDF &agrave; un contr&ocirc;le
    (<parameter>isName</parameter> = 0).
   </para>
   <para>
    Voir aussi
    <function>fdf_get_value</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-next-field-name">
  <refnamediv>
   <refname>fdf_next_field_name</refname>
   <refpurpose>Lit le nom du champs suivant.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>string</type><methodname>fdf_next_field_name</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_next_field_name</function> retourne le nom du
    champs apr&egrave;s le champs <parameter>fieldname</parameter>
    ou le nom du premier champs, si le second param&egrave;tre est NULL.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_value</function> et
    <function>fdf_get_value</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-ap">
  <refnamediv>
   <refname>fdf_set_ap</refname>
   <refpurpose>Fixe l'apparence d'un champs.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_ap</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>field_name</parameter></methodparam>
     <methodparam><type>int</type><parameter>face</parameter></methodparam>
     <methodparam><type>string</type><parameter>filename</parameter></methodparam>
     <methodparam><type>int</type><parameter>page_number</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_ap</function> fixe l'apparence d'un champs
    (i.e. la valeur de la cl&eacute; /AP).
    Les valeurs possibles de <parameter>face</parameter> sont
    sont 1=FDFNormalAP, 2=FDFRolloverAP, 3=FDFDownAP.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-status">
  <refnamediv>
   <refname>fdf_set_status</refname>
   <refpurpose>Fixe la valeur de la cl&eacute; /STATUS.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_status</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>status</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_status</function> fixe la valeur de la
    cl&eacute; /STATUS.
   </para>
   <para>
    Voir aussi
    <function>fdf_get_status</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-get-status">
  <refnamediv>
   <refname>fdf_get_status</refname>
   <refpurpose>Lit la valeur de la cl&eacute; /STATUS.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>string</type><methodname>fdf_get_status</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_get_status</function> retourne la
    valeur de la cl&eacute; /STATUS.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_status</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-file">
  <refnamediv>
   <refname>fdf_set_file</refname>
   <refpurpose>Fixe la valeur de la cl&eacute; /F.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_file</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>filename</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_file</function> Fixe la valeur de la
    cl&eacute; /F. la cl&eacute; /F est simplement une
    r&eacute;f&eacute;rence sur un formulaire PDF qui doit
    &ecirc;tre pr&eacute;-remplis. Dans un environnement web,
    c'est une URL (e.g. http:/testfdf/resultlabel.pdf).
   </para>
   <para>
    Voir aussi
    <function>fdf_get_file</function> et pour un exemple,
    <function>fdf_create</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-get-file">
  <refnamediv>
   <refname>fdf_get_file</refname>
   <refpurpose>Lit la valeur de la cl&eacute; /F.</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>string</type><methodname>fdf_get_file</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_file</function> lit la valeur de la cl&eacute; /F.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_file</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-flags">
  <refnamediv>
   <refname>fdf_set_flags</refname>
   <refpurpose>Modifie une option d'un champs</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_flags</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
     <methodparam><type>int</type><parameter>whichFlags</parameter></methodparam>
     <methodparam><type>int</type><parameter>newFlags</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_flags</function> modifie certaines options
    du champs <parameter>fieldname</parameter>.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_opt</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-opt">
  <refnamediv>
   <refname>fdf_set_opt</refname>
   <refpurpose>Modifie une option d'un champs</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_opt</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
     <methodparam><type>int</type><parameter>element</parameter></methodparam>
     <methodparam><type>string</type><parameter>str1</parameter></methodparam>
     <methodparam><type>string</type><parameter>str2</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_opt</function> modifie les options
    du champs <parameter>fieldname</parameter>.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_flags</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-submit-form-action">
  <refnamediv>
   <refname>fdf_set_submit_form_action</refname>
   <refpurpose>Modifie l'action d'un formulaire</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_submit_form_action</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
     <methodparam><type>int</type><parameter>trigger</parameter></methodparam>
     <methodparam><type>string</type><parameter>script</parameter></methodparam>
     <methodparam><type>int</type><parameter>flags</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_submit_form_action</function> affecte un
    javascript au champs <parameter>fieldname</parameter>, ex&eacute;cut&eacute;
    lors de la validation d'un formulaire.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_javascript_action</function>.
   </para>
  </refsect1>
 </refentry>
 <refentry id="function.fdf-set-javascript-action">
  <refnamediv>
   <refname>fdf_set_javascript_action</refname>
   <refpurpose>Modifie l'action javascript d'un champs</refpurpose>
  </refnamediv>
  <refsect1>
   <title>Description</title>
    <methodsynopsis>
     <type>boolean</type><methodname>fdf_set_javascript_action</methodname>
     <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
     <methodparam><type>string</type><parameter>fieldname</parameter></methodparam>
     <methodparam><type>int</type><parameter>trigger</parameter></methodparam>
     <methodparam><type>string</type><parameter>script</parameter></methodparam>
    </methodsynopsis>
   <para>
    <function>fdf_set_javascript_action</function> affecte un
    javascript au champs <parameter>fieldname</parameter>, ex&eacute;cut&eacute;
    lors de la validation d'un formulaire.
   </para>
   <para>
    Voir aussi
    <function>fdf_set_submit_form_action</function>.
   </para>
  </refsect1>
 </refentry>
  <refentry id="function.fdf-set-encoding">
   <refnamediv>
    <refname>fdf_set_encoding</refname>
    <refpurpose>Modifie l'encodage des caract&egrave;res</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
     <methodsynopsis>
      <type>bool</type><methodname>fdf_set_encoding</methodname>
      <methodparam><type>int</type><parameter>fdf_document</parameter></methodparam>
      <methodparam><type>string</type><parameter>encoding</parameter></methodparam>
     </methodsynopsis>
    <para>
     <function>fdf_set_encoding</function> modifie l'encodage des
     caract&egrave;res du document FDF <parameter>fdf_document</parameter>.
     Le param&egrave;tre <parameter>encoding</parameter> doit &ecirc;tre un
     nom d'encodage valide. Pour Acrobat 5.0, un nom valide peut notamment
     &ecirc;tre "<literal>Shift-JIS</literal>", "<literal>UHC</literal>",
     "<literal>GBK</literal>" ou "<literal>BigFive</literal>".
    </para>
    <para>
     <function>fdf_set_encoding</function> a &eacute;t&eacute; ajout&eacute;e
     en PHP 4.1.0.
    </para>
   </refsect1>
  </refentry>
</reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

