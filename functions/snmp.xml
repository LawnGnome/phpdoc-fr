<?xml version="1.0" encoding="iso-8859-1"?>
 <reference id="ref.snmp">
  <title>SNMP</title>
  <titleabbrev>SNMP</titleabbrev>
  <partintro>
   <simpara>
      Afin de pouvoir utiliser les fonctions <acronym>SNMP</acronym> sous Unix, vous aurez
      besoin d'installer le package <ulink url="&url.ucd-snmp;">UCD SNMP</ulink>.
      Sous Windows ces fonctions ne sont disponibles que sous NT, et
      pas sous Win95/98.
   </simpara>
   <simpara>
      Important : Afin d'utiliser le package UCD <acronym>SNMP</acronym>, vous devez
      mettre la variable NO_ZEROLENGTH_COMMUNITY &agrave; 1 avant de
      compiler. Apr&egrave;s avoir configur&eacute; UCD <acronym>SNMP</acronym>, &eacute;ditez
      le fichier config.h et recherchez la valeur NO_ZEROLENGTH_COMMUNITY.
      D&eacute;commentez la ligne avec le #define. Cela doit ressembler
      &agrave; ceci :
   </simpara>
   <para>
    <programlisting>
#define NO_ZEROLENGTH_COMMUNITY 1
    </programlisting>
   </para>
   <simpara>
      Si vous avez des erreurs "segmentation faults", lors de l'utilisation
      des commandes <acronym>SNMP</acronym>, c'est que vous n'avez pas suivi les
      recommendations pr&eacute;c&eacute;dentes. Si vous ne voulez
      pas recompiler UCD <acronym>SNMP</acronym>, vous pouvez aussi recompiler PHP
      avec l'option --enable-ucd-snmp-hack qui &eacute;vitera
      cette erreur.
   </simpara>
  </partintro>
  <refentry id="function.snmpget">
   <refnamediv>
    <refname>snmpget</refname>
    <refpurpose>Re&ccedil;oit un objet <acronym>SNMP</acronym>.</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>snmpget</function></funcdef>
      <paramdef>string <parameter>hostname</parameter></paramdef>
      <paramdef>string <parameter>community</parameter></paramdef>
      <paramdef>string <parameter>object_id</parameter></paramdef>
      <paramdef>int <parameter><optional>timeout</optional></parameter></paramdef>
      <paramdef>int <parameter><optional>retries</optional></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>snmpget</function> retourne un objet <acronym>SNMP</acronym> en cas de
     succ&egrave;s, et &false; en cas d'erreur.
    </para>
    <para>
      <function>snmpget</function> sert &agrave; lire une valeur
      d'un objet <acronym>SNMP</acronym> repr&eacute;sent&eacute; par
      <parameter>object_id</parameter>. L'agent <acronym>SNMP</acronym> est d&eacute;fini par
      <parameter>hostname</parameter> et la communaut&eacute; de lecture
      est sp&eacute;cifi&eacute;e par le param&egrave;tre
      <parameter>community</parameter>.
    </para>
    <para>
     <informalexample>
      <literallayout>
$syscontact = snmpget("127.0.0.1", "public", "system.SysContact.0")
      </literallayout>
     </informalexample>
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.snmpset">
   <refnamediv>
    <refname>snmpset</refname>
    <refpurpose>Envoie un objet SNMP.</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>bool <function>snmpset</function></funcdef>
      <paramdef>string <parameter>hostname</parameter></paramdef>
      <paramdef>string <parameter>community</parameter></paramdef>
      <paramdef>string <parameter>object_id</parameter></paramdef>
      <paramdef>string <parameter>type</parameter></paramdef>
      <paramdef>mixed <parameter>value</parameter></paramdef>
      <paramdef>int <parameter><optional>timeout</optional></parameter></paramdef>
      <paramdef>int <parameter><optional>retries</optional></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      <function>snmpset</function> modifie la valeur de l'objet <acronym>SNMP</acronym>
      sp&eacute;cifi&eacute;, en retournant &true; en cas de succ&egrave;s
      et &false; en cas d'erreur.
    </para>
    <para>
      <function>snmpget</function> sert &agrave; affecter une valeur
      donn&eacute;e &agrave; un objet <acronym>SNMP</acronym>, r&eacute;f&eacute;renc&eacute;
      par <parameter>object_id</parameter>. L'agent <acronym>SNMP</acronym> est d&eacute;fini
      par <parameter>hostname</parameter> et la communaut&eacute; de lecture
      est sp&eacute;cifi&eacute;e par le param&egrave;tre
      <parameter>community</parameter>.
     </para>
   </refsect1>
  </refentry>
  <refentry id="function.snmpwalk">
   <refnamediv>
    <refname>snmpwalk</refname>
    <refpurpose>Re&ccedil;oit tous les objets <acronym>SNMP</acronym> d'un agent.</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>snmpwalk</function></funcdef>
      <paramdef>string <parameter>hostname</parameter></paramdef>
      <paramdef>string <parameter>community</parameter></paramdef>
      <paramdef>string <parameter>object_id</parameter></paramdef>
      <paramdef>int <parameter><optional>timeout</optional></parameter>
      </paramdef>
      <paramdef>int <parameter><optional>retries</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      <function>snmpwalk</function> retourne un tableau d'objets <acronym>SNMP</acronym>,
      en commencant &agrave; partir de <parameter>object_id</parameter>
      comme racine, ou &false; en cas d'erreur.
    </para>
    <para>
      <function>snmpwalk</function> sert &agrave; lire toutes les valeurs d'un
      agent <acronym>SNMP</acronym>, d&eacute;fini par <parameter>hostname</parameter>.
      <parameter>community</parameter> d&eacute;finit la communaut&eacute;
      de lecture de l'agent. Un objet (<parameter>object_id</parameter> = &null;)
      sert de racine &agrave; l'arbre d'objet <acronym>SNMP</acronym> et
      tous les objets sous cette racine sont retourn&eacute;s dans un tableau. Si
      <parameter>object_id</parameter> est sp&eacute;cifi&eacute;, tous
      les objets <acronym>SNMP</acronym> sous cet objet sont retourn&eacute;s.
     <informalexample>
      <programlisting role="php">
&lt;?php
$a = snmpwalk("127.0.0.1", "public", "");
?&gt;
      </programlisting>
     </informalexample>
    </para>
    <para>
      La fonction ci-dessus va retourner tous les objets <acronym>SNMP</acronym> d'un agent
      <acronym>SNMP</acronym> qui fonctionnerait sur l'h&ocirc;te local (localhost). Il suffit
      alors de faire une boucle pour travailler avec chacun des objets.
     <informalexample>
      <programlisting role="php">
&lt;?php
for ($i=0; $i&lt;count($a); $i++) {
    echo $a[$i];
}
?&gt;
      </programlisting>
     </informalexample>
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.snmpwalkoid">
   <refnamediv>
    <refname>snmpwalkoid</refname>
    <refpurpose>
      Demande d'informations d'arbre sur une entit&eacute; du r&eacute;seau.
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>array <function>snmpwalkoid</function></funcdef>
      <paramdef>string <parameter>hostname</parameter></paramdef>
      <paramdef>string <parameter>community</parameter></paramdef>
      <paramdef>string <parameter>object_id</parameter></paramdef>
      <paramdef>int <parameter><optional>timeout</optional></parameter>
      </paramdef>
      <paramdef>int <parameter><optional>retries</optional></parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      <function>snmpwalkoid</function> retourne un tableau associatif,
      avec les identifiants d'objet et les objets associ&eacute;s, pour
      tous les objets situ&eacute;s sous la racine
      <parameter>object_id</parameter>, ou &false; en cas d'erreur.
    </para>
    <para>
      <function>snmpwalkoid</function> sert &agrave; lire tous les
      identifiants d'objet, et leur valeurs respectives, depuis un
      serveur <acronym>SNMP</acronym>. <parameter>community</parameter> indique la
      communaut&eacute; de lecture pour cet agent. Un
      <parameter>object_id</parameter> &null; signifie qu'il faut utiliser
      la racine de l'arbre <acronym>SNMP</acronym> et tous les objets sous cet arbre
      seront retourn&eacute;s. Si <parameter>object_id</parameter>
      est sp&eacute;cifi&eacute;, tous les objets <acronym>SNMP</acronym> situ&eacute;s sous
      cet objet seront retourn&eacute;s.
    </para>
    <para>
      La fonction ci-dessous va lire tous les objets de l'agent <acronym>SNMP</acronym>
      qui fonctionne sur l'h&ocirc;te local. Il est alors possible de
      les passer en revue avec une boucle :  l'existence de
      <function>snmpwalkoid</function> et <function>snmpwalk</function>
      est une question d'&eacute;volution. Ces deux fonctions sont
      fournies pour des raisons de compatbilit&eacute; ascendante.
     <informalexample>
      <programlisting role="php">
&lt;?php
$a = snmpwalkoid("127.0.0.1", "public", "");
?&gt;
      </programlisting>
     </informalexample>
    </para>
    <para>
      La fonction ci-dessous va lire tous les objets de l'agent <acronym>SNMP</acronym>
      qui fonctionne sur l'h&ocirc;te local. Il est alors possible de
      les passer en revue avec une boucle :
     <informalexample>
      <programlisting role="php">
for (reset($a); $i = key($a); next($a)) {
    echo "$i: $a[$i]&lt;br>\n";
}
      </programlisting>
     </informalexample>
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.snmp-get-quick-print">
   <refnamediv>
    <refname>snmp_get_quick_print</refname>
    <refpurpose>Lit la valeur courante de l'option quick_print de la librairie UCD.
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>boolean <function>snmp_get_quick_print</function></funcdef>
      <paramdef>void <parameter></parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      <function>snmp_get_quick_print</function> retourne la valeur courante,
      stock&eacute;e dans la librairie UCD, de l'option quick_print.
      Par d&eacute;faut, quick_print est inactiv&eacute;e.
     <informalexample>
      <programlisting role="php">
&lt;?php
$quickprint = snmp_get_quick_print();
?&gt;
      </programlisting>
     </informalexample>
    </para>
    <para>
      L'exemple ci-dessus devrait retourner &false;, si
      quick_print est inactiv&eacute;e et, &true; si quick_print est activ&eacute;e.
    </para>
    <para>
     <function>snmp_get_quick_print</function> est seulement disponible avec la
      librairie UCD <acronym>SNMP</acronym>. Cette fonction n'est pas disponible avec la librairie
      Windows <acronym>SNMP</acronym>.
    </para>
    <para>
      Voir : <function>snmp_set_quick_print</function> pour une description
      compl&egrave;te de l'affichage de quick_print.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.snmp-set-quick-print">
   <refnamediv>
    <refname>snmp_set_quick_print</refname>
    <refpurpose>Ecrit la valeur courante de l'option quick_print de la librairie UCD.
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>void <function>snmp_set_quick_print</function></funcdef>
      <paramdef>boolean <parameter>quick_print</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
      <function>snmp_set_quick_print</function> fixe la valeur de
      l'option quick_print de la librairie UCD <acronym>SNMP</acronym>. Lorsqu'elle a
      la valeur de (1), la librairie <acronym>SNMP</acronym> retournera des valeurs
      'rapides'. Cela signifie que seule, la valeur sera
      retourn&eacute;e. Lorsqu'elle a la valeur de (0), la librairie
      va afficher d'autres informations (telles que l'adresse IP
      (IpAddress) ou OID). De plus, si quick_print n'est pas
      activ&eacute;e, la librairie affichera aussi des valeurs
      hexad&eacute;cimales suppl&eacute;mentaires pour toutes
      les cha&icirc;nes de trois caract&egrave;res, ou moins.
    </para>
    <para>
      Modifier quick_print est plus fr&eacute;quent lorsqu'on utilise
      les valeurs retourn&eacute;es que lorsqu'on les affiche.
     <informalexample>
      <programlisting role="php">
snmp_set_quick_print(0);
$a = snmpget("127.0.0.1", "public", ".1.3.6.1.2.1.2.2.1.9.1");
echo "$a&lt;BR>\n";
snmp_set_quick_print(1);
$a = snmpget("127.0.0.1", "public", ".1.3.6.1.2.1.2.2.1.9.1");
echo "$a&lt;BR>\n";
      </programlisting>
     </informalexample>
    </para>
    <para>
      La premi&egrave;re valeur affich&eacute;e sera :
      'Timeticks: (0) 0:00:00.00', tandis qu'avec quick_print
      activ&eacute;e, seul '0:00:00.00' sera affich&eacute;.
    </para>
    <para>
      Par d&eacute;faut, UCD <acronym>SNMP</acronym> retourne des valeurs
      d&eacute;taill&eacute;es, et quick_print sert &agrave; ne
      retourner que la valeur.
    </para>
    <para>
      Actuellement, les cha&icirc;nes sont toujours retourn&eacute;es
      avec des guillemets suppl&eacute;mentaires. Ceci sera corrig&eacute;
      ult&eacute;rieurement.
    </para>
    <para>
     <function>snmp_set_quick_print</function> ne fonctionne
     qu'avec la librairie UCD <acronym>SNMP</acronym>.
     <function>snmp_set_quick_print</function> n'est pas
     disponible avec la librairie Windows <acronym>SNMP</acronym>.
    </para>
   </refsect1>
  </refentry>
 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
