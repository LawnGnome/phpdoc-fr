 <reference id="ref.mnogo">
  <title>mnoGoSearch</title>
  <titleabbrev>mnoGoSearch</titleabbrev>
  <partintro>
   <simpara>
    Ces fonctions donnent l'acc&egrave;s &agrave; mnoGoSearch (anciennement
    UdmSearch), moteur de recherche du monde libre. Pour pouvoir les
    utiliser, vous devez inclure le support en ajoutant l'option
    <option role="configure">--with-mnogosearch</option>. 
    Si vous utilisez cette option sans indiquer le chemin jusqu'&agrave;
    mnogosearch, PHP essaiera de le trouver dans le dossier
    <filename>/usr/local/mnogosearch</filename>. Si vous avez install&eacute;
    mnogosearch dans un autre endroit, vous devez l'indiquer comme
    ceci : <option role="configure">--with-mnogosearch=DIR</option>.
   </simpara>
   <note>
    <para>
     PHP supporte naturellement MySQL. Il faut savoir que mnoGoSearch
     n'est pas compatible avec la librairie interne de PHP, et ne
     peut fonctionner qu'avec les librairies g&eacute;n&eacute;riques 
     MySQL. Par cons&eacute;quent, si vous utilisez mnoGoSearch avec 
     MySQL, indiquez le dossier d'installation de MySQL durant
     la configuration avec l'option : 
     <option role="configure">--with-mnogosearch --with-mysql=/usr</option>.
    </para>
   </note>
   <simpara>
    Pour utiliser ces fonctions, vous devez installer les verions
    3.1.9 ou plus r&eacute;cente de mnoGoSearch.
   </simpara>
   <simpara>
    Plus de d&eacute;tails sur le site officiel de mnoGoSearch : 
    <ulink url="&url.mnogo">&url.mnogo;</ulink>.
   </simpara>
  </partintro>
  <refentry id="function.Udm_Alloc_Agent">
   <refnamediv>
    <refname>Udm_Alloc_Agent</refname>
    <refpurpose>Alloue une session mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_alloc_agent</function></funcdef>
      <paramdef>string <parameter>dbaddr</parameter></paramdef>
      <paramdef>string
       <parameter>
        <optional>dbmode</optional>
       </parameter>
      </paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_alloc_agent</function> retourne un identifiant d'agent
     mnogosearch en cas de succ&egrave;s, et <literal>FALSE</literal> sinon.
     Cette fonction cr&eacute;e une session avec les param&egrave;tres
     de base de donn&eacute;es.
    </para>
    <note>
     <para>
      En r&eacute;alit&eacute;, <function>udm_alloc_agent</function> n'ouvre
      pas de connexion, et donc, ne v&eacute;rifie ni le nom d'utilisateur,
      ni le mot de passe.
     </para>
    </note>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Set_Agent_Param">
   <refnamediv>
    <refname>Udm_Set_Agent_Param</refname>
    <refpurpose>D&eacute;finit les param&egrave;tres de session mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef><function>udm_set_agent_param</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
      <paramdef>int <parameter>var</parameter></paramdef>
      <paramdef>string <parameter>val</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_alloc_agent</function> retourne <literal>TRUE</literal> 
     en cas de succ&egrave;s, et <literal>FALSE</literal> en cas d'erreur. 
     <function>udm_alloc_agent</function> d&eacute;finit les param&egrave;tres
     de session mnoGoSearch.
    </para>
    <para>
     Les param&egrave;tres suivants et leur valeur sont support&eacute;s : 
    </para>
    <para> 
     <parameter>UDM_PARAM_PAGE_NUM</parameter> sert &agrave; sp&eacute;cifier
     le num&eacute;ro de page de r&eacute;sultat (les r&eacute;sultats sont retourn&eacute;s
     par pages, en commencant &agrave; la page 0, avec 
     <parameter>UDM_PARAM_PAGE_SIZE</parameter> r&eacute;sultats par
     page).
    </para>
    <para>
     <parameter>UDM_PARAM_PAGE_SIZE</parameter> - nombre de
     r&eacute;sultats par page.
    </para>
    <para>
     <parameter>UDM_PARAM_SEARCH_MODE</parameter> - mode de recherche.
     Les constantes suivante sont d&eacute;finies : <parameter>UDM_MODE_ALL</parameter> -
     recherche tous les mots; <parameter>UDM_MODE_ANY</parameter> - 
     recherche l'un des mots; <parameter>UDM_MODE_BOOL</parameter> - 
     requ&ecirc;te bool&eacute;enne.
    </para>
    <para>
     <parameter>UDM_PARAM_CACHE_MODE</parameter> - active ou d&eacute;sactive
     le cache de recherche. Valeurs accept&eacute;es : 
     <parameter>UDM_CACHE_ENABLED</parameter>,
     <parameter>UDM_CACHE_DISABLED</parameter>
    </para>
    <para>
     <parameter>UDM_PARAM_TRACK_MODE</parameter> - active ou d&eacute;sactive
     le mode "trackquery". Valeurs accept&eacute;es : 
     <parameter>UDM_TRACK_ENABLED</parameter>,
     <parameter>UDM_TRACK_DISABLED</parameter>
    </para>
    <para>
     <parameter>UDM_PARAM_CHARSET</parameter> - d&eacute;finit le jeu de 
     caract&egrave;re local. Les valeurs possibles sont celles
     support&eacute;es par mnoGoSearch :  <literal>koi8-r</literal>,
     <literal>cp1251</literal>, ...
    </para>
    <para>
     <parameter>UDM_PARAM_STOPFILE</parameter> - d&eacute;finit le nom et le
     chemin jusqu'aux fichier de mots interdits ("stopwords") : il y a une
     l&eacute;g&egrave;re diff&eacute;rence avec mnoGoSearch. Si mnoGoSearch est configur&eacute; avec
     un chemin relatif, ou sans chemin, alors il cherchera ce fichier 
     en fonction de <parameter>UDM_CONF_DIR</parameter>. Alors que le module
     recherche le fichier dans le chemin courant, c'est &agrave; dire le chemin
     du script ex&eacute;cut&eacute;.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Add_Search_Limit">
   <refnamediv>
    <refname>Udm_Add_Search_Limit</refname>
    <refpurpose>D&eacute;finit diverses limites de recherche</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef><function>udm_add_search_limit</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
      <paramdef>int <parameter>var</parameter></paramdef>
      <paramdef>string <parameter>val</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_add_search_limit</function> retourne 
     <literal>TRUE</literal> en cas de succ&egrave;s, et <literal>FALSE</literal>
     en cas d'erreur.
    </para>
    <note>
     <para>
      Cette fonction n'est pas impl&eacute;ment&eacute;e, mais il est pr&eacute;vue qu'elle le
      soit. Elle d&eacute;finira alors diverses restrictions de recherche
      telles que par cat&eacute;gorie, par &eacute;tiquette, par date.., de mani&egrave;re
      analogue <parameter>Udm_Set_Agent_Param</parameter>.
     </para>
    </note>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Find">
   <refnamediv>
    <refname>Udm_Find</refname>
    <refpurpose>Effectue une recherche</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_find</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
      <paramdef>string <parameter>query</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_add_search_limit</function> retourne 
     <literal>TRUE</literal> en cas de succ&egrave;s, et 
     <literal>FALSE</literal> en cas d'erreur.
    </para>
    <para>
     La recherche en elle-m&ecirc;me. Le premier argument <parameter>agent</parameter>
     est la session, le second est la <parameter>query</parameter>.
     Pour rechercher, entrez les mots avec lesquels que vous voulez
     faire une recherche, puis cliquez sur le bouton d'envoi. 
     Par exemple, "<literal>mysql odbc</literal>". Vous ne devez
     pas utiliser de guillemets doubles <literal>"</literal>, car 
     ils sont utilis&eacute;s par mnoGoSearch pour s&eacute;parer une requ&ecirc;te en 
     mots. Avec l'exemple ci-dessus, mnoGoSearch va rechercher les
     pages contenant "mysql" et/ou "odbc". Les meilleures r&eacute;ponses
     seront class&eacute;es en premier, et affich&eacute;es en t&ecirc;te de liste.
     Si vous selectionez le mode de recherche "tous" ("ALL"), la recherche
     va retourner les documents qui contiennent l'un ou l'autre
     des mots que vous avez entr&eacute;. Dans le cas o&ugrave; vous utilisez le
     mode "ANY", la recheche retourne la lsite des documents qui contiennent
     l'un ou l'autre des mots. Si vous voulez acc&eacute;der aux fonctions
     avanc&eacute;es de recherche, vous pouvez utiliser le mode "BOOL", qui
     vous permet d'entrer directement des requ&ecirc;tes. 
    </para>
    <para>
     mnoGoSearch utilise les op&eacute;rateurs bool&eacute;ean suivants : 
    </para>
    <para>
     &amp; - AND, ET logique. Par exemple, &quot;mysql &amp;
     odbc&quot;. mnoGoSearch recherche toutes les URL qui contiennent
     &agrave; la fois les mots &quot;mysql&quot; et &quot;odbc&quot;.
    </para>
    <para>
     | -  OR, OU logique. Par exemple, &quot;mysql |
     odbc&quot;. mnoGoSearch recherche toutes les URL qui contiennent
     soit &quot;mysql&quot;, soit &quot;odbc&quot;.
    </para>
    <para>
     ~ - NOT, NON logique. Par exemple, &quot;mysql &amp; ~odbc&quot;.
     mnoGoSearch recherche toutes les URL qui contiennent le
     mot &quot;mysql&quot; mais ne contiennent pas le mot &quot;odbc&quot;.
     Attention : la requ&ecirc;te &quot;~odbc&quot; ne trouvera rien!
    </para>
    <para>
     () - Groupage de commandes pour les requ&ecirc;tes complexes : par exemple,
     &quot;(mysql | msql) &amp; ~postgres&quot;.  Le mode par requ&ecirc;te est
     simple et puissant &agrave; la fois. Vous pouvez utiliser les commandes
     bool&eacute;ennes habituelles avec ce mode.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Get_Res_Param">
   <refnamediv>
    <refname>Udm_Get_Res_Param</refname>
    <refpurpose>Lit les param&egrave;tres de r&eacute;sultats mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_get_res_param</function></funcdef>
      <paramdef>int <parameter>res</parameter></paramdef>
      <paramdef>int <parameter>param</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_get_res_param</function> retourne les param&egrave;tres
     de r&eacute;sultat en cas de succ&egrave;s, <literal>FALSE</literal> en cas d'erreur.
    </para>
    <para>
     Le param&egrave;tre <parameter>res</parameter> est un identifiant 
     de r&eacute;sultat, obtenu apr&egrave;s un appel &agrave; <parameter>Udm-Find</parameter>.
    </para>
    <para>
     Le param&egrave;tre <parameter>param</parameter> peut prendre les valeurs
     suivantes : 
    </para>
    <para>
     <parameter>UDM_PARAM_NUM_ROWS</parameter> - nombre de liens
     trouv&eacute;s dans la page courante. Il est &eacute;gal &agrave; 
     <parameter>UDM_PARAM_PAGE_SIZE</parameter> pour toutes les
     pages sauf pour la derni&egrave;re, o&ugrave; il peut &ecirc;tre inf&eacute;rieur.
    </para>
    <para>
     <parameter>UDM_PARAM_FOUND</parameter> - nombre total de r&eacute;sultats
     trouv&eacute;s.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Get_Res_Field">
   <refnamediv>
    <refname>Udm_Get_Res_Field</refname>
    <refpurpose>Lit un champs de r&eacute;sultat mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_get_res_field</function></funcdef>
      <paramdef>int <parameter>res</parameter></paramdef>
      <paramdef>int <parameter>row</parameter></paramdef>
      <paramdef>int <parameter>field</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_alloc_agent</function> retourne la valeur du 
     champs <parameter>field</parameter> dans la ligne <parameter>row</parameter>,
     du r&eacute;sultat <parameter>res</parameter>, et 
     <literal>FALSE</literal> sinon.
    </para>
    <para>
     Le param&egrave;tre <parameter>res</parameter> est un identifiant 
     de r&eacute;sultat, obtenu apr&egrave;s un appel &agrave; <parameter>Udm-Find</parameter>.
    </para>
    <para>
     Le param&egrave;tre <parameter>row</parameter> est le num&eacute;ro du lien dans
     la page courante. Il peut valoir de 0 jusqu'&agrave; 
     <parameter>UDM_PARAM_NUM_ROWS</parameter>.
    </para>
    <para>
     Le param&egrave;tre <parameter>field</parameter> est l'identifiant de
     champs, et peut prendre l'une des valeurs suivantes : 
    </para>
    <para>
     <parameter>UDM_FIELD_URL</parameter> - URL
    </para>
    <para>
     <parameter>UDM_FIELD_CONTENT</parameter> - "Content-type" : type MIME de contenu
    </para>
    <para>
     <parameter>UDM_FIELD_TITLE</parameter> - Titre de la page
    </para>
    <para>
     <parameter>UDM_FIELD_KEYWORDS</parameter> - Les mots cl&eacute;s, contenus dans les
     balises meta de la page.
    </para>
    <para>
     <parameter>UDM_FIELD_DESC</parameter> - La descriptioncontenus dans les
     balises meta de la page.
    </para>
    <para>
     <parameter>UDM_FIELD_TEXT</parameter> - Le corps de la page.
    </para>
    <para>
     <parameter>UDM_FIELD_SIZE</parameter> - La taille de la page.
    </para>
    <para>
     <parameter>UDM_FIELD_URLID</parameter> - Un identifiant unique.
    </para>
    <para>
     <parameter>UDM_FIELD_SCORE</parameter> - Le score de la page.
    </para>
    <para>
     <parameter>UDM_FIELD_MODIFIED</parameter> - La date de derni&egrave;re modification,
     sous la forme d'un timestamp.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Free_Res">
   <refnamediv>
    <refname>Udm_Free_Res</refname>
    <refpurpose>Lib&egrave;re un r&eacute;sultat mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_free_res</function></funcdef>
      <paramdef>int <parameter>res</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_free_res</function> retourne <literal>TRUE</literal> en
     cas de succ&egrave;s, <literal>FALSE</literal> sinon.
    </para>
    <para>
     Le param&egrave;tre <parameter>res</parameter> est un identifiant 
     de r&eacute;sultat, obtenu apr&egrave;s un appel &agrave; <parameter>Udm-Find</parameter>.
    </para>
    <para>
     <function>udm_free_res</function> lib&egrave;re la m&eacute;moire de tous
     les r&eacute;sultats g&eacute;n&eacute;r&eacute;s.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Free_Agent">
   <refnamediv>
    <refname>Udm_Free_Agent</refname>
    <refpurpose>D&eacute;truit une session mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_free_agent</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_free_res</function> retourne <literal>TRUE</literal> en
     cas de succ&egrave;s, <literal>FALSE</literal> sinon.
    </para>
    <para>
     Le param&egrave;tre <parameter>res</parameter> est un identifiant 
     de r&eacute;sultat, obtenu apr&egrave;s un appel &agrave; <parameter>Udm-Find</parameter>.
    </para>
    <para>
     <function>udm_free_agent</function> d&eacute;truit l'agent de recherche
     cr&eacute;&eacute; par <function>udm_alloc_agent</function>.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Errno">
   <refnamediv>
    <refname>Udm_Errno</refname>
    <refpurpose>Num&eacute;ro d'erreur mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>int <function>udm_errno</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_errno</function> retourne le num&eacute;ro d'erreur mnoGoSearch,
     ou bien <literal>0</literal> sinon.
    </para>
    <para>
     Le param&egrave;tre <parameter>agent</parameter> est un identifiant 
     de r&eacute;sultat, obtenu apr&egrave;s un appel &agrave; <parameter>Udm_Alloc_Agent</parameter>.
    </para>
    <para>
     <function>udm_errno</function> retourne le num&eacute;ro de l'erreur
     g&eacute;n&eacute;r&eacute; par l'agent <parameter>agent</parameter>.
    </para>
   </refsect1>
  </refentry>
  <refentry id="function.Udm_Error">
   <refnamediv>
    <refname>Udm_Error</refname>
    <refpurpose>Message d'erreur mnoGoSearch</refpurpose>
   </refnamediv>
   <refsect1>
    <title>Description</title>
    <funcsynopsis>
     <funcprototype>
      <funcdef>string <function>udm_error</function></funcdef>
      <paramdef>int <parameter>agent</parameter></paramdef>
     </funcprototype>
    </funcsynopsis>
    <para>
     <function>udm_errno</function> retourne le message d'erreur mnoGoSearch,
     ou bien une cha&icirc;ne vide sinon.
    </para>
    <para>
     Le param&egrave;tre <parameter>agent</parameter> est un identifiant 
     de r&eacute;sultat, obtenu apr&egrave;s un appel &agrave; <parameter>Udm_Alloc_Agent</parameter>.
    </para>
    <para>
     <function>udm_error</function> retourne le num&eacute;ro de l'erreur
     g&eacute;n&eacute;r&eacute; par l'agent <parameter>agent</parameter>.
    </para>
   </refsect1>
  </refentry>
 </reference>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
