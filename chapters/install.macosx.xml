<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.6 $ -->
<!-- EN-Revision: 1.5 Maintainer: dams Status: ready -->
<sect1 id="install.macosx">
 <title>Installation sous Unix et Mac OS X</title>
 <para>
  Cette section contient les notes et conseils pour installer &php; sur un
  serveur Mac OS X Server.
 </para>
 <sect2 id="install.macosx.packages">
  <title>Utilisation des paquets</title>
  <simpara>
   Il existe quelques versions pré-packagées et pré-compilées
   de &php; pour MacOSX. Cela peut être utile pour mettre en place une configuration
   standard, mais si vous avez besoin d'accéder à des fonctionnalités
   spécifiques (comme un serveur sécurisé, ou un pilote de bases de données
   exotiques), vous aurez à compiler &php; et/ou votre serveur web vous-même.
   Si vous n'êtes pas familiers avec la compilation et la mise en place
   d'applications, il est bon de vérifier si personne d'autre n'a
   réalisé un paquet.
  </simpara>
 </sect2>
 <sect2 id="install.macosx.compile">
  <title>Compilation pour OS X server</title>
  <simpara>
   Il existe deux versions légèrement différentes de Mac OS X, le 
   client et le serveur. Les lignes ci-dessous sont pour OS X Server.
  </simpara>
  <formalpara id="install.macosx.compile.example">
   <title>Mac OS X server install</title>
   <para>
    <orderedlist>
     <listitem>
      <simpara>Téléchargez les dernières distributions d'Apache et &php;.</simpara>
     </listitem>
     <listitem>
      <para>
       Décompressez les, et utilisez le script <command>configure</command> sur
       Apache, comme ceci.
       <programlisting role="shell">
<![CDATA[
./configure --exec-prefix=/usr \
--localstatedir=/var \
--mandir=/usr/share/man \
--libexecdir=/System/Library/Apache/Modules \
--iconsdir=/System/Library/Apache/Icons \
--includedir=/System/Library/Frameworks/Apache.framework/Versions/1.3/Headers \
--enable-shared=max \
--enable-module=most \
--target=apache
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <para>
       Si vous voulez que le compilateur fasse certaines optimisations,
       ajoutez cette ligne : 
       <programlisting role="shell">
<![CDATA[
setenv OPTIM=-O2
]]>
       </programlisting>
      </para>
     </listitem>
     <listitem>
      <para>
       Puis, alles dans le dossier &php; 4, et configurez &php;.
       <programlisting role="shell">
<![CDATA[
./configure --prefix=/usr \
    --sysconfdir=/etc \
    --localstatedir=/var \
    --mandir=/usr/share/man \
    --with-xml \
    --with-apache=/src/apache_1.3.12
]]>
       </programlisting>
       SI vous avez d'autres extensions à ajouter, assurez vous de placer
       les bonnes options ici. Pour la chaîne 
       <option role="configure">--with-apache</option>, ajoutez le chemin de
       votre distribution source apache, par exemple, 
       <filename class="directory">/src/apache_1.3.12</filename>.
      </para>
     </listitem>
     <listitem>
      <simpara>
       Faites <command>make</command> puis <command>make install</command>. Cela
       va ajouter un dossier à votre distribution Apache, sous 
       <filename class="directory">src/modules/php4</filename>.
      </simpara>
     </listitem>
     <listitem>
      <para>
       Maintenant, reconfigurez Apache pour compiler &php; 4.
       <programlisting role="shell">
<![CDATA[
./configure --exec-prefix=/usr \
--localstatedir=/var \
--mandir=/usr/share/man \
--libexecdir=/System/Library/Apache/Modules \
--iconsdir=/System/Library/Apache/Icons \
--includedir=/System/Library/Frameworks/Apache.framework/Versions/1.3/Headers \
--enable-shared=max \
--enable-module=most \
--target=apache \
--activate-module=src/modules/php4/libphp4.a
]]>
       </programlisting>
       Vous pouvez recevoir un messge qui vous dit que <filename>libmodphp4.a</filename> 
       est trop ancien. Si c'est le cas, allez dans le dossier 
       <filename class="directory">src/modules/php4</filename>
       de votre distribution Apache, et utilisez cette commande : 
       <command>ranlib libmodphp4.a</command>. Puis retournez à la racine de la
       distribution Apache, et lancez la commande <command>configure</command>
       ci-dessus. Cela aura mis la table de liens à jour. Lancez à nouveau
       <command>make</command> et <command>make install</command>.
      </para>
     </listitem>
     <listitem>
      <simpara>
       Copiez et renommez le fichier <filename>php.ini-dist</filename> dans votre
       dossier <filename class="directory">bin</filename> de votre dossier &php; : 
       <userinput>cp php.ini-dist /usr/local/bin/php.ini</userinput>
       ou, si vous n'avez pas de dossier local : 
       <userinput>cp php.ini-dist /usr/bin/php.ini</userinput>.
      </simpara>
     </listitem>
    </orderedlist>
   </para>
  </formalpara>
 </sect2>
 <sect2 id="install.macosx.client">
  <title>Compilation pour MacOS X client</title>
  <simpara>
   Ces conseils sont fournis gracieusement par <ulink url="&url.macosx;">Marc Liyanage</ulink>.
  </simpara>
  <simpara>
   Le module &php; d'Apache est inclus dans l'installation de Mac OS X.
   Cette version inclut le support des bases de données MySQL et PostgreSQL.
  </simpara>
  <simpara>
   NOTE : Attention lors des manipulations ci-dessous. Vous pourriez
   détruire la configuration de votre serveur.
  </simpara>
  <para>
   Faites ceci : 
   <itemizedlist>
    <listitem>
     <simpara>
      1.    Ouvrez une fenêtre de terminal
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      2.    Tapez "wget http://www.diax.ch/users/liyanage/software/macosx/libphp4.so.gz",
      et attendez le téléchargement.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      3.    Tapez "gunzip libphp4.so.gz" 
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      4.    Tapez "sudo apxs -i -a -n php4 libphp4.so" 
     </simpara>
    </listitem>
   </itemizedlist>
   Maintenant, tapez "<literal>sudo open -a TextEdit /etc/httpd/httpd.conf</literal>"
   TextEdit va ouvrir le fichier de configuration de votre serveur web.
   Recherchez les deux lignes suivantes, à la fin du fichier (utilisez
   la commande de recherche) : 
   <programlisting role="apache">
<![CDATA[
   #AddType application/x-httpd-php .php 
   #AddType application/x-httpd-php-source .phps
]]>
   </programlisting>
   Supprimez les deux signes dièse (<literal>#</literal>), puis sauvez le fichier,
   et quittez TextEdit.
  </para>
  <para>
   Finalement, tapez "<literal>sudo apachectl graceful</literal>" pour redémarrer le
   serveur Apache.
  </para>
  <para>
   &php; devrait être fonctionnel. Vous pouvez le tester en créant un fichier dans
   votre dossier "Sites", appelé "test.php". Dans ce fichier, écrivez la ligne
   ci-contre : "<literal>&lt;?php phpinfo() ?&gt;</literal>".
  </para>
  <para>
   Maintenant, ouvrez votre navigateur à l'adresse suivante : 
   <literal>127.0.0.1/~your_username/test.php</literal>. Vous devriez
   obtenir la page d'information de <literal>phpinfo</literal>.
  </para>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
