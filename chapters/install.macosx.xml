<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision: 1.2 $ -->
<sect1 id="install.macosx">
 <title>Installation sous Unix et Mac OS X</title>
 <para>
  Cette section contient les notes et conseils pour installer &php; sur un
  serveur Mac OS X Server.
 </para>
 <sect2 id="install.macosx.packages">
  <title>Utilisation des paquets</title>
  <simpara>
   Il existe quelques versions pr&eacute;-packag&eacute;es et pr&eacute;-compil&eacute;es
   de &php; pour MacOSX. Cela &ecirc;tre utile pour mettre en place une configuration
   standard, mais si vous avez besoin d'acc&eacute;der a des fonctionnalit&eacute;s
   sp&eacute;cifiques (comme un serveur s&eacute;curis&eacute;, ou un pilote de bases de donn&eacute;es
   exotiques), vous aurez &agrave; compiler &php; et/ou votre serveur web vous-m&ecirc;me.
   Si vous n'&ecirc;tes pas familiers avec la compilation et la mise en place
   d'applications, il est bon de v&eacute;rifier si personne d'autre n'a
   r&eacute;alis&eacute; un package.
  </simpara>
 </sect2>
 <sect2 id="install.macosx.compile">
  <title>Compilation pour OS X server</title>
  <simpara>
   Il existe deux versions l&eacute;g&egrave;rement diff&eacute;rentes de Mac OS X, le 
   client et le serveur. Les lignes ci-dessous sont pour OS X Server.
  </simpara>
   <example id="install.macosx.compile.example">
   <title>Installation sur Mac OS X server</title>
   <screen>
<![CDATA[
1. Get the latest distributions of Apache and PHP
2. Untar them, and run the configure program on Apache like so.
    ./configure --exec-prefix=/usr \ 
    --localstatedir=/var \ 
    --mandir=/usr/share/man \ 
    --libexecdir=/System/Library/Apache/Modules \ 
    --iconsdir=/System/Library/Apache/Icons \ 
    --includedir=/System/Library/Frameworks/Apache.framework/Versions/1.3/Headers \ 
    --enable-shared=max \ 
    --enable-module=most \ 
    --target=apache 

4. You may also want to add this line: 
    setenv OPTIM=-O2 
    If you want the compiler to do some optimization. 
    
5. Next, go to the PHP 4 source directory and configure it. 
    ./configure --prefix=/usr \ 
    --sysconfdir=/etc \ 
    --localstatedir=/var \ 
    --mandir=/usr/share/man \ 
    --with-xml \ 
    --with-apache=/src/apache_1.3.12 

    If you have any other additions (MySQL, GD, etc.), be sure to add
    them here. For the --with-apache string, put in the path to your 
    apache source directory, for example "/src/apache_1.3.12". 
6. make
7. make install    
    This will add a directory to your Apache source directory under
    src/modules/php4.
    
8. Now, reconfigure Apache to build in PHP 4.
    ./configure --exec-prefix=/usr \ 
    --localstatedir=/var \ 
    --mandir=/usr/share/man \ 
    --libexecdir=/System/Library/Apache/Modules \ 
    --iconsdir=/System/Library/Apache/Icons \ 
    --includedir=/System/Library/Frameworks/Apache.framework/Versions/1.3/Headers \ 
    --enable-shared=max \ 
    --enable-module=most \ 
    --target=apache \ 
    --activate-module=src/modules/php4/libphp4.a 

    You may get a message telling you that libmodphp4.a is out of date.
    If so, go to the src/modules/php4 directory inside your apache
    source directory and run this command: 

    ranlib libmodphp4.a 

    Then go back to the root of the apache source directory and run the
    above configure command again. That'll bring the link table up to
    date. 

9. make

10. make install

11. copy and rename the php.ini-dist file to your "bin" directory from your
    PHP 4 source directory:
    cp php.ini-dist /usr/local/bin/php.ini 

    or (if your don't have a local directory) 

    cp php.ini-dist /usr/bin/php.ini 
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="install.macosx.client">
  <title>Compilation pour MacOS X client</title>
  <simpara>
   Ces conseils sont fournis gracieusement par <ulink url="&url.macosx;">Marc Liyanage</ulink>.
  </simpara>
  <simpara>
   Le module &php; d'Apache est inclus dans l'installation de Mac OS X.
   Cette version inclut le support des bases de donn&eacute;es MySQL et PostgreSQL.
  </simpara>
  <simpara>
   NOTE: Attention lors des manipulations ci-dessous : vous pourriez
   d&eacute;truire la configuration de votre serveur.
  </simpara>
  <para>
   Faites ceci : 
   <itemizedlist>
    <listitem>
     <simpara>
      1.	Ouvrez une fen&ecirc;tre de terminal
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      2.	Tapez "wget http://www.diax.ch/users/liyanage/software/macosx/libphp4.so.gz",
      et attendez le t&eacute;l&eacute;chargement.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      3.	Tapez "gunzip libphp4.so.gz" 
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      4.	Tapez "sudo apxs -i -a -n php4 libphp4.so" 
     </simpara>
    </listitem>
   </itemizedlist>
   Maintenant, tapez "<literal>sudo open -a TextEdit /etc/httpd/httpd.conf</literal>"
   TextEdit va ouvrir le fichier de configuration de votre serveur web.
   Recherchez les deux lignes suivantes, &agrave; la fin du fichier (utilisez
   la commande de recherche) : 
   <programlisting role="apache">
<![CDATA[
   #AddType application/x-httpd-php .php 
   #AddType application/x-httpd-php-source .phps
]]>
   </programlisting>
   Supprimez les deux signes di&egrave;se (<literal>#</literal>), puis sauvez le fichier,
   et quittez TextEdit.
  </para>
  <para>
   Finalement, tapez "<literal>sudo apachectl graceful</literal>" pour red&eacute;marrer le
   serveur Apache.
  </para>
  <para>
   &php; devrait &ecirc;tre fonctionnel. Vous pouvez le tester en cr&eacute;ant un fichier dans
   votre dossier "Sites", appel&eacute; "test.php". Dans ce fichier, &eacute;crivez la ligne
   ci-contre : "<literal>&lt;?php phpinfo() ?&gt;</literal>".
  </para>
  <para>
   Maintenant, ouvrez votre navigateur &agrave; l'adresse suivante : 
   <literal>127.0.0.1/~your_username/test.php</literal>. Vous devriez
   obtenir la page d'information de <literal>phpinfo</literal>.
  </para>
 </sect2>
</sect1>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
